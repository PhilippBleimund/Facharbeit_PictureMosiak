\begin{tikzpicture}[y=-1cm]
    \pgfmathsetmacro\start{2}
    \pgfmathsetmacro\endValue{5}
    \draw[very thick, -{Stealth[scale=1.5]}](-2,1.5) -- (\start,1.5);

    %Warteschlange
    \foreach \x in {0,...,\endValue}{
        \filldraw[very thick, draw = black, fill = black!10](\start+\x, 1) rectangle (\start+\x+1, 2);
    }

    \pgfmathsetmacro\middleLine{\start+((\endValue+1)/2)}
    \node[align=center] at (\middleLine, 0.7){\large Warteschlange \small(bereit)};

    \draw[very thick, -{Stealth[scale=1.5]}](\start+\endValue+1,1.5) -- (\start+\endValue+3,1.5);

    \draw[very thick, draw = black](\start+\endValue+3, 0.7) rectangle (\start+\endValue+3+2.5, 2.3) node[pos=.5] {CPU};

    %Linien
    \pgfmathsetmacro\middleCPU{\start+\endValue+3+1.25}
    \pgfmathsetmacro\endLine{\start+\endValue+1}

    \draw[very thick](\middleCPU, 2.3) -- (\middleCPU, 9);
    \draw[very thick, -{Stealth[scale=1.5]}](-1, 9) -- (-1, 1.5);

    %Entzug der CPU
    \draw[very thick, -{Stealth[scale=1.5]}](\middleCPU, 3) -- (-1, 3) node [midway, above] {\large Entzug \small (timeout)};

    %Event 1
    \draw[very thick, -{Stealth[scale=1.5]}](\middleCPU, 4.5) -- (\endLine, 4.5) node [midway, above] {\large timeout};
    \foreach \x in {0,...,\endValue}{
        \filldraw[very thick, draw = black, fill = black!10](\start+\x, 4) rectangle (\start+\x+1, 5) node[pos=.5] {\large 1};
    }
    \node[align=center] at (\middleLine, 3.7){\large Warteschlange \small(blockiert)};
    \draw[very thick](\start, 4.5) -- (-1, 4.5) node [midway, above, align=center] {\large Event 1\\\large eingetreten};

    %Event 2
    \draw[very thick, -{Stealth[scale=1.5]}](\middleCPU, 6.5) -- (\endLine, 6.5) node [midway, above] {\large timeout};
    \foreach \x in {0,...,\endValue}{
        \filldraw[very thick, draw = black, fill = black!10](\start+\x, 6) rectangle (\start+\x+1, 7) node[pos=.5] {\large 2};
    }
    \node[align=center] at (\middleLine, 5.7){\large Warteschlange \small(blockiert)};
    \draw[very thick](\start, 6.5) -- (-1, 6.5) node [midway, above, align=center] {\large Event 2\\\large eingetreten};

    %Event n
    \draw[very thick, -{Stealth[scale=1.5]}](\middleCPU, 9) -- (\endLine, 9) node [midway, above] {\large timeout};
    \foreach \x in {0,...,\endValue}{
        \filldraw[very thick, draw = black, fill = black!10](\start+\x, 8.5) rectangle (\start+\x+1, 9.5) node[pos=.5] {\large n};
    }
    \node[align=center] at (\middleLine, 8.2){\large Warteschlange \small(blockiert)};
    \draw[very thick](\start, 9) -- (-1, 9) node [midway, above, align=center] {\large Event n\\\large eingetreten};
\end{tikzpicture}