(window.ansFrontendRelayWebpackJsonpFunction=window.ansFrontendRelayWebpackJsonpFunction||[]).push([["component-Modals-Editor"],{"3qAy":function(e,n,t){"use strict";t.r(n);var a={};t.r(a),t.d(a,"default",(function(){return v}));var l={};t.r(l),t.d(l,"default",(function(){return k}));var i={};t.r(i),t.d(i,"default",(function(){return F}));var r={};t.r(r),t.d(r,"default",(function(){return K}));var s=t("lwsE"),o=t.n(s),u=t("W8MJ"),d=t.n(u),c=t("7W2i"),m=t.n(c),p=t("a1gu"),g=t.n(p),f=t("Nsbk"),y=t.n(f),b=function(){var e=[{kind:"LocalArgument",name:"threadId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null},{kind:"LocalArgument",name:"numMessagesKnownOnClient",type:"Int!",defaultValue:null}],n=[{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"threadId",variableName:"threadId"}],t={kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},a={platforms:["MOBILE_WEB"]},l=[{kind:"Variable",name:"numMessagesKnownOnClient",variableName:"numMessagesKnownOnClient"}],i={kind:"ScalarField",alias:null,name:"msgId",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},o={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},u=[o,s,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}];return{kind:"Request",fragment:{kind:"Fragment",name:"MessageEditorModal_threadReplyAdd_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"threadReplyAdd",storageKey:null,args:n,concreteType:"ThreadReplyAdd",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:null,concreteType:"Thread",plural:!1,selections:[t,{kind:"Condition",passingValue:!0,isCustom:!0,customValue:a,condition:"onPlatform",selections:[{kind:"LinkedField",alias:null,name:"allRecentMessages",storageKey:null,args:l,concreteType:"Message",plural:!0,selections:[i,{kind:"FragmentSpread",name:"Message_message",args:null}]}]}]},r]}]},operation:{kind:"Operation",name:"MessageEditorModal_threadReplyAdd_Mutation",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"threadReplyAdd",storageKey:null,args:n,concreteType:"ThreadReplyAdd",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:null,concreteType:"Thread",plural:!1,selections:[t,s,{kind:"Condition",passingValue:!0,isCustom:!0,customValue:a,condition:"onPlatform",selections:[{kind:"LinkedField",alias:null,name:"allRecentMessages",storageKey:null,args:l,concreteType:"Message",plural:!0,selections:[i,{kind:"LinkedField",alias:null,name:"author",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[o,{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},s,{kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:u},{kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:u},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]}]},{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"time",args:null,storageKey:null},s]}]}]},r]}]},params:{operationKind:"mutation",name:"MessageEditorModal_threadReplyAdd_Mutation",id:"5bfd24a115d92ba69db012554716c2765b4aca5915424b3d5dcc36494b91f72c",text:null,metadata:{}}}}();b.hash="c7ff50dda204f628ee33fbef9dd2e6d1";var v=b,h=function(){var e=[{kind:"LocalArgument",name:"recipientUid",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null}],n=[{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"recipientUid",variableName:"recipientUid"}],t={kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"MessageEditorModal_threadCreate_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"threadCreate",storageKey:null,args:n,concreteType:"ThreadCreate",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:null,concreteType:"Thread",plural:!1,selections:[t]},a]}]},operation:{kind:"Operation",name:"MessageEditorModal_threadCreate_Mutation",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"threadCreate",storageKey:null,args:n,concreteType:"ThreadCreate",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:null,concreteType:"Thread",plural:!1,selections:[t,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]},a]}]},params:{operationKind:"mutation",name:"MessageEditorModal_threadCreate_Mutation",id:"f5294b1ebd962608176e296b88f234c2b5ff35bf3fe064f4cf7973588c6ea970",text:null,metadata:{}}}}();h.hash="f7d3e490ab2d5443ae5a2019afacaf36";var k=h,S=function(){var e=[{kind:"LocalArgument",name:"threadId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null}],n=[{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"threadId",variableName:"threadId"}],t={kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"MessageEditorModal_threadDraftSave_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"threadDraftSave",storageKey:null,args:n,concreteType:"ThreadDraftSave",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:null,concreteType:"Thread",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"viewerDraft",storageKey:null,args:null,concreteType:"ThreadDraft",plural:!1,selections:[t]}]}]}]},operation:{kind:"Operation",name:"MessageEditorModal_threadDraftSave_Mutation",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"threadDraftSave",storageKey:null,args:n,concreteType:"ThreadDraftSave",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:null,concreteType:"Thread",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"viewerDraft",storageKey:null,args:null,concreteType:"ThreadDraft",plural:!1,selections:[t,a]},a]}]}]},params:{operationKind:"mutation",name:"MessageEditorModal_threadDraftSave_Mutation",id:"6f8275d4e7fdaad4b7c8395300eb17743be0e81fc78834b91d4ddd0c64bf3c48",text:null,metadata:{}}}}();S.hash="17d6087142191cb03b56a4a3917848ab";var F=S,_=function(){var e=[{kind:"LocalArgument",name:"uid",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"isReply",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"threadId",type:"BigInt",defaultValue:0}],n=[{kind:"Variable",name:"uid",variableName:"uid"}],t={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},a=[{kind:"Variable",name:"threadId",variableName:"threadId"}],l={kind:"ScalarField",alias:null,name:"threadId",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},o=[s,r,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}];return{kind:"Request",fragment:{kind:"Fragment",name:"MessageEditorModalQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:n,concreteType:"User",plural:!1,selections:[t,{kind:"FragmentSpread",name:"UserName_user",args:null}]},{kind:"Condition",isCustom:!1,customValue:null,passingValue:!0,condition:"isReply",selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:a,concreteType:"Thread",plural:!1,selections:[l,{kind:"LinkedField",alias:null,name:"viewerDraft",storageKey:null,args:null,concreteType:"ThreadDraft",plural:!1,selections:[i]}]}]}]},operation:{kind:"Operation",name:"MessageEditorModalQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:n,concreteType:"User",plural:!1,selections:[t,r,s,{kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:o},{kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:o},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]}]},{kind:"Condition",passingValue:!0,isCustom:!1,customValue:null,condition:"isReply",selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:a,concreteType:"Thread",plural:!1,selections:[l,{kind:"LinkedField",alias:null,name:"viewerDraft",storageKey:null,args:null,concreteType:"ThreadDraft",plural:!1,selections:[i,r]},r]}]}]},params:{operationKind:"query",name:"MessageEditorModalQuery",id:"65534ee6bdb1d26344e738fec50eee35b36bb227aa6b2d8c3ea260cab7c79160",text:null,metadata:{}}}}();_.hash="529d8ee1db34b9e79a923bf803b58e4c";var T,w,E,C,K=_,O=t("zm58"),A=t("jufJ"),x=t("AFGi"),M=t("LNH1"),R=t("R+um"),q=t("QLaP"),I=t.n(q),L=t("VyO/"),P=t("q1tI"),D=t.n(P),j=t("teWg"),N=t("WBlH");function B(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=y()(e);if(n){var l=y()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return g()(this,t)}}var Q=function(e){m()(t,e);var n=B(t);function t(e){var a;return o()(this,t),(a=n.call(this,e)).threadDraftSaveMutation=function(e){var n=a.props.queryResult.thread;return null!==n&&void 0!==n&&n.threadId?Object(L.c)({mutation:t.mutations.threadDraftSave,variables:{threadId:n.threadId,content:JSON.stringify(e)}}):null},a.threadCreateMutation=function(e,n){var l=a.props.queryResult.user;return I()(l,"user should exists"),Object(L.c)({mutation:t.mutations.threadCreate,variables:{recipientUid:l.uid,content:JSON.stringify(e)}}).then((function(e){var t,l;a.onMutationComplete(null!==(t=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.threadCreate)&&void 0!==t?t:{},n)}))},a.threadReplyAddMutation=function(e,n){var l=a.props,i=l.queryResult,r=l.extraProps.initialCount,s=i.thread;return I()(s,"thread should exists"),Object(L.c)({mutation:t.mutations.threadReplyAdd,variables:{threadId:s.threadId,content:JSON.stringify(e),numMessagesKnownOnClient:r}}).then((function(e){var t;a.onMutationComplete(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.threadReplyAdd,n)}))},a.onMutationComplete=function(e,n){var t,l=a.props.dismissModalFlow,i=e.thread,r=e.status;if(r===j.a.success)l({nextUrl:null!==(t=null===i||void 0===i?void 0:i.url)&&void 0!==t?t:"/messages"});else if(Object.values(j.a).includes(r)){var s=D.a.createElement(N.a,{status:r});n.error(s)}else n.genericError()},a.getStartingContent=function(){var e,n,t=null===(e=a.props.queryResult.thread)||void 0===e||null===(n=e.viewerDraft)||void 0===n?void 0:n.content;return t?JSON.parse(t):Object(x.h)()},a.state={canAdd:!1,isSubmitting:!1},a}return d()(t,[{key:"render",value:function(){var e=this,n=this.props,t=n.dismissModalFlow,a=n.queryResult,l=n.extraProps.isReply,i=a.user;I()(i,"user should exists");var r=l?Object(A.plaintextTranslate)(D.a.createElement(A.Translate,null,"Replying to ",D.a.createElement(R.b,{user:i,format:"short"}))):Object(A.plaintextTranslate)(D.a.createElement(A.Translate,null,"Message ",D.a.createElement(R.b,{user:i,format:"short"}))),s=this.state.canAdd&&!this.state.isSubmitting;return D.a.createElement(M.b,null,(function(n){return D.a.createElement(O.a,{editorKey:"compose-inbox-message",primaryButtonText:Object(A.plaintextTranslate)("Send"),primaryButtonDisabled:!s,onPrimaryButtonClick:function(t){s&&(Object(x.q)(t)?n(Object(A.plaintextTranslate)("Please finish your message before sending."),M.d.error):e.setState({isSubmitting:!0},(function(){l?e.threadReplyAddMutation(t,n):e.threadCreateMutation(t,n)})))},onNavButtonClick:function(n){var a=function(){t()};if(l){var i=e.threadDraftSaveMutation(n);if(i)return void i.then((function(){a()}))}a()},modalLayoutHeader:r,titleText:Object(A.plaintextTranslate)(""),placeholder:Object(A.plaintextTranslate)("Write a message..."),startingContent:e.getStartingContent(),saveDraft:l?e.threadDraftSaveMutation:undefined,onEditorMeaningfulChange:function(n){e.setState({canAdd:!n.isEmpty()})},clearOnSubmit:!0,navButton:"close",useLightWeightContentStyleToolBar:!0})}))}}]),t}(D.a.Component);Q.queries={onLoad:void 0!==T?T:T=r},Q.mutations={threadDraftSave:void 0!==w?w:w=i,threadCreate:void 0!==E?E:E=l,threadReplyAdd:void 0!==C?C:C=a},Q.displayName="MessageEditorModal";n["default"]=Q},"4r9s":function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return w}));var a={};t.r(a),t.d(a,"default",(function(){return y}));var l=t("lwsE"),i=t.n(l),r=t("W8MJ"),s=t.n(r),o=t("7W2i"),u=t.n(o),d=t("a1gu"),c=t.n(d),m=t("Nsbk"),p=t.n(m),g=function(){var e={kind:"ScalarField",alias:null,name:"hasNetworkAdminAccess",args:null,storageKey:null},n={kind:"ScalarField",alias:"questionPoliciesUrl",name:"linkUrl",args:[{kind:"Literal",name:"name",value:"question_policies"}],storageKey:'linkUrl(name:"question_policies")'},t={kind:"ScalarField",alias:"spamUrl",name:"linkUrl",args:[{kind:"Literal",name:"name",value:"what_is_spam"}],storageKey:'linkUrl(name:"what_is_spam")'},a={kind:"ScalarField",alias:"bnbrUrl",name:"linkUrl",args:[{kind:"Literal",name:"name",value:"bnbr"}],storageKey:'linkUrl(name:"bnbr")'},l={kind:"ScalarField",alias:"vandalismUrl",name:"linkUrl",args:[{kind:"Literal",name:"name",value:"vandalism_policy"}],storageKey:'linkUrl(name:"vandalism_policy")'},i={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"OperationRevertModalQuery",type:"QueryRoot",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[e,{kind:"LinkedField",alias:null,name:"network",storageKey:null,args:null,concreteType:"Network",plural:!1,selections:[n,t,a,l]}]}]},operation:{kind:"Operation",name:"OperationRevertModalQuery",argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[e,{kind:"LinkedField",alias:null,name:"network",storageKey:null,args:null,concreteType:"Network",plural:!1,selections:[n,t,a,l,i]},i]}]},params:{operationKind:"query",name:"OperationRevertModalQuery",id:"89e0302ae940d974c47654d88074737bf4269b4366ceb76b0b7f1a3a814d5fa5",text:null,metadata:{}}}}();g.hash="0af9574f1491559d57fc8fc8fae4a510";var f,y=g,b=t("zm58"),v=t("jufJ"),h=t("/UD8"),k=t("AFGi"),S=t("RA+f"),F=t("q1tI"),_=t.n(F);function T(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=p()(e);if(n){var l=p()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return c()(this,t)}}var w=function(e){u()(t,e);var n=T(t);function t(e){var a;return i()(this,t),(a=n.call(this,e)).state={},a}return s()(t,[{key:"getStartingContent",value:function(e){var n,t=this.props.extraProps.restoreOnly,a=this.state.startingContent;return a||(t?Object(v.plaintextTranslate)("This edit was reviewed and complies with Quora policy."):null!==e&&void 0!==e&&null!==(n=e.viewer)&&void 0!==n&&n.hasNetworkAdminAccess?Object(v.plaintextTranslate)(_.a.createElement(_.a.Fragment,null,"This edit does not comply with Quora's policies and guidelines. Please see:"," ",_.a.createElement(v.UserGeneratedContent,{text:e.viewer.network.questionPoliciesUrl,translateParamName:"url"}))):"")}},{key:"render",value:function(){var e,n=this,t=this.props,a=t.extraProps,l=t.dismissModalFlow,i=t.queryResult,r=a.opid,s=a.restoreOnly,o=this.getStartingContent(i),u=_.a.createElement(S.e,{m:"medium"},_.a.createElement(S.s,{mb:"small"},_.a.createElement(v.Translate,null,"Comment (optional):")));if(!s&&null!==i&&void 0!==i&&null!==(e=i.viewer)&&void 0!==e&&e.hasNetworkAdminAccess){var d=_.a.createElement(h.c,{name:"revert-reason",stacked:!0,onChange:function(e){return n.setState({startingContent:e.target.value})},selected:this.state.startingContent,buttons:[{title:_.a.createElement(v.Translate,null,"Spam"),value:Object(v.plaintextTranslate)(_.a.createElement(_.a.Fragment,null,"Spamming is not allowed on Quora. Please see:"," ",_.a.createElement(v.UserGeneratedContent,{text:i.viewer.network.spamUrl,translateParamName:"url"})))},{title:_.a.createElement(v.Translate,null,"Be Nice Be Respectful"),value:Object(v.plaintextTranslate)(_.a.createElement(_.a.Fragment,null,"Hate speech, harassment, and personal attacks are not allowed on Quora. Please see:"," ",_.a.createElement(v.UserGeneratedContent,{text:i.viewer.network.bnbrUrl,translateParamName:"url"})))},{title:_.a.createElement(v.Translate,null,"Vandalism"),value:Object(v.plaintextTranslate)(_.a.createElement(_.a.Fragment,null,"Edits which alter meaning and don't suitably improve content are not allowed on Quora. Please see:"," ",_.a.createElement(v.UserGeneratedContent,{text:i.viewer.network.vandalismUrl,translateParamName:"url"})))},{title:_.a.createElement(v.Translate,null,"Other"),value:""}]});u=_.a.createElement(S.e,{m:"medium"},_.a.createElement(S.s,{mb:"small"},_.a.createElement(v.Translate,null,"Choose a reason for reverting this revision:")),d,_.a.createElement(S.s,{mt:"small"},_.a.createElement(v.Translate,null,"Comment (optional):")))}var c="revert-reason-".concat(o,"-").concat(r);return _.a.createElement(b.a,{onPrimaryButtonClick:function(e){return l({content:e})},onNavButtonClick:function(){return l({})},key:c,editorKey:c,titleText:s?Object(v.plaintextTranslate)("Restore Edit"):Object(v.plaintextTranslate)("Revert Edit"),startingContent:Object(k.w)(o),header:u,placeholder:s?Object(v.plaintextTranslate)("Enter a reason for restoring this revision."):Object(v.plaintextTranslate)("Enter a reason for reverting this revision."),primaryButtonText:s?Object(v.plaintextTranslate)("Restore"):Object(v.plaintextTranslate)("Revert")})}}]),t}(_.a.Component);w.queries={onLoad:void 0!==f?f:f=a},w.displayName="OperationRevertModal"},"6pmM":function(e,n,t){"use strict";var a={};t.r(a),t.d(a,"default",(function(){return v}));var l={};t.r(l),t.d(l,"default",(function(){return k}));var i=t("lwsE"),r=t.n(i),s=t("W8MJ"),o=t.n(s),u=t("7W2i"),d=t.n(u),c=t("a1gu"),m=t.n(c),p=t("Nsbk"),g=t.n(p),f=function(){var e=[{kind:"LocalArgument",name:"tribeId",type:"BigInt!",defaultValue:null}],n=[{kind:"Variable",name:"tribeId",variableName:"tribeId"}],t={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"ComposerHeader_tribe_Query",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:n,concreteType:"Tribe",plural:!1,selections:[t,a,l,{kind:"FragmentSpread",name:"TribeIcon_tribe",args:null},{kind:"FragmentSpread",name:"TribeName_tribe",args:null}]}]},operation:{kind:"Operation",name:"ComposerHeader_tribe_Query",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:n,concreteType:"Tribe",plural:!1,selections:[t,a,l,{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isFollowing",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"iconUrl",args:[{kind:"Literal",name:"size",value:100}],storageKey:"iconUrl(size:100)"},{kind:"ScalarField",alias:"iconRetinaUrl",name:"iconUrl",args:[{kind:"Literal",name:"size",value:200}],storageKey:"iconUrl(size:200)"},{kind:"ScalarField",alias:null,name:"nameString",args:null,storageKey:null}]}]},params:{operationKind:"query",name:"ComposerHeader_tribe_Query",id:"3b6b2947006dab5701ff6241f9ece76276c75866cfae145ed57fac830d17dc73",text:null,metadata:{}}}}();f.hash="1c56b44f1dada51517acca508a254edb";var y,b,v=f,h={kind:"Fragment",name:"ComposerHeader_user",type:"User",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},{kind:"FragmentSpread",name:"UserPhoto_user",args:null}],hash:"80728cc86bf641711ebbc04e3ea70341"},k=h,S=t("D5Zh"),F=t("3jYl"),_=t("OMLc"),T=t("rAPm"),w=t("RA+f"),E=t("n2ec"),C=t("PuWf"),K=t("r+vq"),O=t("8lmh"),A=t("VyO/"),x=t("q1tI"),M=t.n(x);function R(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=g()(e);if(n){var l=g()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return m()(this,t)}}var q=function(e){d()(t,e);var n=R(t);function t(){return r()(this,t),n.apply(this,arguments)}return o()(t,[{key:"render",value:function(){var e=this.props,n=e.user,a=e.tribeId,l=e.contextPicker,i=!a&&!l;return M.a.createElement(w.j,{mb:"small",alignItems:"center",whiteSpace:"pre",flexWrap:"nowrap",verticalAlign:"middle"},M.a.createElement(K.a,{user:n,size:18,frameColor:"raised",linked:!1}),!i&&M.a.createElement(w.e,{ml:"small"},M.a.createElement(_.b,{size:12,name:"VideoPlay",isFilled:!0,verticalAlign:"center"})),l||a&&M.a.createElement(w.j,{ml:"small",alignItems:"center",overflow:"hidden"},M.a.createElement(S.a,{variables:{tribeId:a},query:t.queries.tribe},(function(e){var n=e.data;return e.loading?null:(Object(O.tempFailureInvariant)(null===n||void 0===n?void 0:n.tribe,"tribe is ".concat(null===n||void 0===n?void 0:n.tribe)),M.a.createElement(M.a.Fragment,null,M.a.createElement(E.a,{tribe:n.tribe,linked:!1,size:18,mr:"tiny"}),M.a.createElement(T.a,{color:"gray_light",ellipsis:!0},M.a.createElement(F.Translate,null,M.a.createElement(C.a,{tribe:n.tribe,canUseEllipsis:!0})))))}))))}}]),t}(M.a.Component);q.fragments={user:void 0!==y?y:y=l},q.queries={tribe:void 0!==b?b:b=a},q.displayName="ComposerHeader";n.a=Object(A.b)(q)},"9GZO":function(e,n,t){"use strict";var a={};t.r(a),t.d(a,"default",(function(){return v}));var l,i=t("QILm"),r=t.n(i),s=t("lwsE"),o=t.n(s),u=t("W8MJ"),d=t.n(u),c=t("7W2i"),m=t.n(c),p=t("a1gu"),g=t.n(p),f=t("Nsbk"),y=t.n(f),b={kind:"Fragment",name:"TribeQuestionAskedInTribeHeader_tribe",type:"Tribe",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"FragmentSpread",name:"TribeLink_tribe",args:null},{kind:"FragmentSpread",name:"TribeIcon_tribe",args:null}],hash:"200d84caf1a0e92b9450f58da17dcd68"},v=b,h=t("jufJ"),k=t("rAPm"),S=t("RA+f"),F=t("VyO/"),_=t("q1tI"),T=t.n(_),w=t("n2ec"),E=t("Khkn");function C(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=y()(e);if(n){var l=y()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return g()(this,t)}}var K=function(e){m()(t,e);var n=C(t);function t(){return o()(this,t),n.apply(this,arguments)}return d()(t,[{key:"render",value:function(){var e=this.props,n=e.tribe,t=e.inline,a=void 0!==t&&t,l=e.extraText,i=r()(e,["tribe","inline","extraText"]);return T.a.createElement(S.e,Object.assign({},i,{display:a?"inline-flex":"flex",alignItems:l?"flex-start":"center"}),T.a.createElement(w.a,{tribe:n,size:18,mr:"tiny"}),T.a.createElement(k.a,{as:"span",color:"gray"},T.a.createElement(h.Translate,null,"Asked in"," ",T.a.createElement(S.s,{as:"span",medium:!0},T.a.createElement(E.a,{tribe:n}))),l))}}]),t}(T.a.Component);K.fragments={tribe:void 0!==l?l:l=a},K.displayName="TribeQuestionAskedInTribeHeader";n.a=Object(F.b)(K)},"9k9Z":function(e,n,t){"use strict";t.d(n,"b",(function(){return c}));var a=t("QILm"),l=t.n(a),i=t("jufJ"),r=t("q1tI"),s=t.n(r),o=t("OMLc"),u=t("zLpq"),d=t("59Xv"),c=function(){return!1},m=function(e){var n=e.stacked,t=void 0!==n&&n,a=e.size,r=void 0===a?"regular":a,m=l()(e,["stacked","size"]),p=t?d.a:u.a,g=t?{}:{size:r};return s.a.createElement(p,Object.assign({icon:s.a.createElement(o.b,{name:"Request"}),text:c()?Object(i.plaintextTranslate)("Ask to answer"):Object(i.plaintextTranslate)("Request")},g,m))};m.displayName="RequestButton",n.a=m},ARre:function(e,n,t){"use strict";var a;!function(e){e.permission_denied="permission_denied",e.permission_rate_limited="permission_rate_limited",e.success="success",e.add_answer_exception="add_answer_exception",e.no_permission_on_question="no_permission_on_question",e.no_permission_on_answer="no_permission_on_answer",e.question_deleted="question_deleted",e.ama_session_not_started="ama_session_not_started",e.add_answer_throttled="add_answer_throttled",e.edit_answer_throttled="edit_answer_throttled",e.no_empty_answers="no_empty_answers",e.answer_too_long="answer_too_long",e.add_answer_block="add_answer_block",e.one_answer_per_question="one_answer_per_question",e.one_answer_per_question_tribe="one_answer_per_question_tribe",e.existing_pending_answer="existing_pending_answer",e.answer_contains_unready_videos="answer_contains_unready_videos",e.question_hidden_from_tribe="question_hidden_from_tribe",e.business_account_unapproved="business_account_unapproved"}(a||(a={})),n.a=a},Axd8:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var a=t("e0uH"),l=new Map([[a.a.personal,1],[a.a.system,2],[a.a.ama,3],[a.a.routed,4],[a.a.profile,5],[a.a.mass,6]]);new Map([[1,a.a.personal],[2,a.a.system],[3,a.a.ama],[4,a.a.routed],[5,a.a.profile],[6,a.a.mass]]);function i(e){return l.get(a.a[e])}},C7EE:function(e,n,t){"use strict";t.d(n,"a",(function(){return a})),t.d(n,"b",(function(){return l})),t.d(n,"c",(function(){return c}));var a,l,i=t("lSNA"),r=t.n(i),s=t("jufJ"),o=t("q1tI"),u=t.n(o),d=t("x43M");!function(e){e.Post="Post",e.Question="Question",e.Link="Link"}(a||(a={})),function(e){e.Post="Post",e.Question="Question",e.Queue="Queue"}(l||(l={}));var c=function(e,n){var t;return Object(s.plaintextTranslate)(u.a.createElement(s.EnumTranslate,{value:n},(t={},r()(t,d.a.generic,"Something went wrong when posting to this Space. Please try again later."),r()(t,d.a.insufficient_permissions,"You do not have permission to post in this Space."),r()(t,d.a.title_and_content_empty,"Post may not be empty."),r()(t,d.a.title_empty,"Post may not be empty."),r()(t,d.a.content_empty,"Post may not be empty."),r()(t,d.a.title_too_long,"Your title is too long."),r()(t,d.a.content_too_long,"Your post is too long."),r()(t,d.a.rate_limit_exceeded,"You have created too many posts. Please try again later."),r()(t,d.a.requires_external_links,"This Space does not accept posts without external links."),r()(t,d.a.requires_quora_links,"This Space does not accept posts without links to Quora content."),r()(t,d.a.requires_text,"This Space does not accept posts without text."),r()(t,"DEFAULT","Something went wrong when posting to this Space. Please try again later."),t)))}},DAeU:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return h}));var a=t("lwsE"),l=t.n(a),i=t("W8MJ"),r=t.n(i),s=t("7W2i"),o=t.n(s),u=t("a1gu"),d=t.n(u),c=t("Nsbk"),m=t.n(c),p=t("F6zL"),g=t("AFGi"),f=t("q1tI"),y=t.n(f),b=t("zm58");function v(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=m()(e);if(n){var l=m()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return d()(this,t)}}var h=function(e){o()(t,e);var n=v(t);function t(e){var a;return l()(this,t),(a=n.call(this,e)).state={title:a.props.extraProps.startingTitle},a}return r()(t,[{key:"renderHeader",value:function(){return y.a.createElement(y.a.Fragment,null,this.props.extraProps.header,this.getTitleEditor())}},{key:"getTitleEditor",value:function(){var e=this;return y.a.createElement(p.c,{value:this.state.title,variant:"large",useTextArea:!0,placeholder:this.props.extraProps.titlePlaceholder,onChange:function(n){return e.setState({title:n.target.value})}})}},{key:"editorDismissModalFlow",value:function(e){var n=Object(g.w)(this.state.title),t=JSON.stringify(n);return this.props.dismissModalFlow({title:t,content:e.content})}},{key:"render",value:function(){var e=this,n=this.props,t=n.extraProps,a=n.dismissModalFlow;return y.a.createElement(b.a,Object.assign({},t,{header:this.renderHeader(),onPrimaryButtonClick:function(n){return a({title:JSON.stringify(Object(g.w)(e.state.title)),content:n})},onNavButtonClick:function(){return a({})}}))}}]),t}(f.Component)},GDBS:function(e,n,t){"use strict";var a;!function(e){e.none="none",e.request_button="request_button",e.autoexpanded="autoexpanded",e.from_rad="from_rad",e.from_button="from_button",e.from_auto_modal="from_auto_modal",e.from_sent_requests="from_sent_requests",e.existing_topic="existing_topic",e.new_topic="new_topic",e.close_or_modal_bg="close_or_modal_bg",e.done_button="done_button",e.new_modal_opened="new_modal_opened",e.modal_suggestion="modal_suggestion",e.modal_search="modal_search",e.rad_suggestion="rad_suggestion",e.on_question_page="on_question_page",e.a2a_modal="a2a_modal"}(a||(a={})),n.a=a},JusU:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return K}));var a={};t.r(a),t.d(a,"default",(function(){return y}));var l=t("lwsE"),i=t.n(l),r=t("W8MJ"),s=t.n(r),o=t("7W2i"),u=t.n(o),d=t("a1gu"),c=t.n(d),m=t("Nsbk"),p=t.n(m),g=function(){var e=[{kind:"LocalArgument",name:"tribeId",type:"BigInt!",defaultValue:null}],n=[{kind:"Variable",name:"tribeId",variableName:"tribeId"}],t={name:"PaidSubscriptionEnabledForProducer",value:"true"},a={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"TribeSubmissionRulesModalQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:n,concreteType:"Tribe",plural:!1,selections:[{kind:"FragmentSpread",name:"SubmissionRulesText_tribe",args:null},{kind:"FragmentSpread",name:"TribeNameWithIcon_tribe",args:null},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:t,condition:"onFeature",selections:[{kind:"FragmentSpread",name:"ContentMonetizationDisclaimer_tribe",args:null}]}]}]},operation:{kind:"Operation",name:"TribeSubmissionRulesModalQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:n,concreteType:"Tribe",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"submissionRules",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"settings",storageKey:null,args:null,concreteType:"TribeSettings",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"submissionReviewPeriod",args:null,storageKey:null},a]},{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"nameString",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null},a,{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isFollowing",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"iconUrl",args:[{kind:"Literal",name:"size",value:100}],storageKey:"iconUrl(size:100)"},{kind:"ScalarField",alias:"iconRetinaUrl",name:"iconUrl",args:[{kind:"Literal",name:"size",value:200}],storageKey:"iconUrl(size:200)"},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:t,condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"producerBundleStatus",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"defaultAccessOption",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"producerDirectStatus",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"adRevenueShareStatus",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanContribute",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanModerate",args:null,storageKey:null}]}]}]},params:{operationKind:"query",name:"TribeSubmissionRulesModalQuery",id:"3c8f846c2280dd5c900a8770c423015a59769c56692e2c42a7be8ce5b348319b",text:null,metadata:{}}}}();g.hash="1366787e4373bf5c886524c9e42bfd5d";var f,y=g,b=t("pl0F"),v=t("jufJ"),h=t("7r18"),k=t("7/5D"),S=t("RA+f"),F=t("RAJQ"),_=t("eEjP"),T=t("nwxp"),w=t("q1tI"),E=t.n(w);function C(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=p()(e);if(n){var l=p()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return c()(this,t)}}var K=function(e){u()(t,e);var n=C(t);function t(){return i()(this,t),n.apply(this,arguments)}return s()(t,[{key:"renderHeader",value:function(){var e;return null!==(e=this.props.queryResult)&&void 0!==e&&e.tribe?E.a.createElement(S.e,{mb:"medium"},E.a.createElement(_.a,{tribe:this.props.queryResult.tribe,linked:!1})):null}},{key:"render",value:function(){var e=this.props.dismissModalFlow,n=this.props.queryResult.tribe;if(!n)throw Error("queryresult and Tribe info are expected for TribeSubmissionRulesModal.");return E.a.createElement(h.f,{navButton:Object(T.b)()?"back":"close",navButtonProps:{onClick:function(){return e()}},extraBodyProps:{display:"flex"}},this.props.extraProps.showHowThisWorksContent?E.a.createElement(S.e,null,E.a.createElement(k.a,{mb:"tiny"},E.a.createElement(v.Translate,null,"How this works")),E.a.createElement(S.e,{pt:"medium"},E.a.createElement(v.Translate,null,"Submitters are notified when you accept or decline a submission. They are also notified when the Space automatically declines their submission at the end of the review period."))):E.a.createElement(S.j,{flexDirection:"column"},E.a.createElement(S.e,null,this.renderHeader(),E.a.createElement(k.a,{mb:"tiny"},E.a.createElement(v.Translate,null,"Submission Rules")),E.a.createElement(F.a,{tribe:n,truncated:!1})),this.props.extraProps.showContentMonetizationDisclaimer&&E.a.createElement(S.e,{mt:"medium"},E.a.createElement(b.a,{contentType:"Post",tribe:n}))))}}]),t}(E.a.Component);K.queries={onLoad:void 0!==f?f:f=a},K.displayName="TribeSubmissionRulesModal"},KOB0:function(e,n,t){"use strict";var a;!function(e){e[void 0]="undefined",e.name_change_request="name_change_request",e.content_warning="content_warning",e.edit_block_warning="edit_block_warning",e.mark_not_helpful="mark_not_helpful",e.send_message="send_message",e.delete_question_comment="delete_question_comment",e.delete_answer_comment="delete_answer_comment",e.resolve_name_change="resolve_name_change",e.anon_send_message="anon_send_message",e.anon_mute="anon_mute",e.anon_unmute="anon_unmute",e.remove_user_photos="remove_user_photos",e.edit_admin_notes_wiki="edit_admin_notes_wiki",e.flag_operation="flag_operation",e.delete_post_comment="delete_post_comment",e.flag_fake_name="flag_fake_name",e.reject_name_change="reject_name_change",e.verify_name="verify_name",e.mark_bad_credential="mark_bad_credential"}(a||(a={})),n.a=a},LGbj:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var a=t("GDBS"),l=new Map([[a.a.none,0],[a.a.request_button,1],[a.a.autoexpanded,2],[a.a.from_rad,3],[a.a.from_button,4],[a.a.from_auto_modal,5],[a.a.from_sent_requests,15],[a.a.existing_topic,6],[a.a.new_topic,7],[a.a.close_or_modal_bg,8],[a.a.done_button,9],[a.a.new_modal_opened,16],[a.a.modal_suggestion,10],[a.a.modal_search,11],[a.a.rad_suggestion,12],[a.a.on_question_page,13],[a.a.a2a_modal,14]]);new Map([[0,a.a.none],[1,a.a.request_button],[2,a.a.autoexpanded],[3,a.a.from_rad],[4,a.a.from_button],[5,a.a.from_auto_modal],[15,a.a.from_sent_requests],[6,a.a.existing_topic],[7,a.a.new_topic],[8,a.a.close_or_modal_bg],[9,a.a.done_button],[16,a.a.new_modal_opened],[10,a.a.modal_suggestion],[11,a.a.modal_search],[12,a.a.rad_suggestion],[13,a.a.on_question_page],[14,a.a.a2a_modal]]);function i(e){return l.get(a.a[e])}},LrWd:function(e,n,t){"use strict";var a={};t.r(a),t.d(a,"default",(function(){return u}));var l={};t.r(l),t.d(l,"default",(function(){return m}));var i={};t.r(i),t.d(i,"default",(function(){return g}));var r=t("J4zp"),s=t.n(r),o=function(){var e=[{kind:"LocalArgument",name:"pid",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null}],n=[{kind:"LinkedField",alias:null,name:"postEdit",storageKey:null,args:[{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"pid",variableName:"pid"}],concreteType:"PostEdit",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"post",storageKey:null,args:null,concreteType:"Post",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"title",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"UniversalComposerModalWrapper_postEdit_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:n},operation:{kind:"Operation",name:"UniversalComposerModalWrapper_postEdit_Mutation",argumentDefinitions:e,selections:n},params:{operationKind:"mutation",name:"UniversalComposerModalWrapper_postEdit_Mutation",id:"c679363392481806f1201ec0703b2cf2bea2def80b831fefe1900f86f1efcbd7",text:null,metadata:{}}}}();o.hash="075f3ee85218f0d184b5c309caa27104";var u=o,d=function(){var e=[{kind:"LocalArgument",name:"tribeId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"title",type:"JSONString!",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null},{kind:"LocalArgument",name:"shouldQueue",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"accessOption",type:"AccessOptionTypes",defaultValue:null}],n=[{kind:"Variable",name:"accessOption",variableName:"accessOption"},{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"shouldQueue",variableName:"shouldQueue"},{kind:"Variable",name:"title",variableName:"title"},{kind:"Variable",name:"tribeId",variableName:"tribeId"}],t={kind:"ScalarField",alias:null,name:"success",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"failureType",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"pid",args:null,storageKey:null},o={kind:"ScalarField",alias:null,name:"tribeItemId",args:null,storageKey:null},u={kind:"ScalarField",alias:null,name:"shouldPromptFollowerInviteModal",args:null,storageKey:null},d={kind:"LinkedField",alias:null,name:"viewerPostDraft",storageKey:null,args:null,concreteType:"PostDraft",plural:!1,selections:[i,r,{kind:"ScalarField",alias:null,name:"title",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null}]},c={kind:"LinkedField",alias:"addContent",name:"tribeNuxStep",storageKey:'tribeNuxStep(name:"ContentStep")',args:[{kind:"Literal",name:"name",value:"ContentStep"}],concreteType:"TribeNuxStep",plural:!1,selections:[i,r,{kind:"ScalarField",alias:null,name:"completedSubtasks",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isCompleted",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"shouldShow",args:null,storageKey:null}]},m={kind:"ScalarField",alias:null,name:"numViewerPendingSubmissionsInTribe",args:null,storageKey:null},p={kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"UniversalComposerModalWrapper_postAdd_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"postAdd",storageKey:null,args:n,concreteType:"PostAdd",plural:!1,selections:[t,a,l,{kind:"LinkedField",alias:null,name:"post",storageKey:null,args:null,concreteType:"Post",plural:!1,selections:[i,r,s,{kind:"LinkedField",alias:null,name:"tribeItem",storageKey:null,args:null,concreteType:null,plural:!1,selections:[i,r,o,{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[u,d,c]}]}]},{kind:"LinkedField",alias:null,name:"queueItem",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[d]}]},{kind:"LinkedField",alias:null,name:"submission",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[m,d]}]},p]}]},operation:{kind:"Operation",name:"UniversalComposerModalWrapper_postAdd_Mutation",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"postAdd",storageKey:null,args:n,concreteType:"PostAdd",plural:!1,selections:[t,a,l,{kind:"LinkedField",alias:null,name:"post",storageKey:null,args:null,concreteType:"Post",plural:!1,selections:[i,r,s,{kind:"LinkedField",alias:null,name:"tribeItem",storageKey:null,args:null,concreteType:null,plural:!1,selections:[i,r,o,{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[u,d,c,i]}]}]},{kind:"LinkedField",alias:null,name:"queueItem",storageKey:null,args:null,concreteType:null,plural:!1,selections:[r,{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[d,i]},i]},{kind:"LinkedField",alias:null,name:"submission",storageKey:null,args:null,concreteType:null,plural:!1,selections:[r,{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[m,d,i]},i]},p]}]},params:{operationKind:"mutation",name:"UniversalComposerModalWrapper_postAdd_Mutation",id:"fd58b31ba12a9fdaca70cc35cd0f73d33506e13454453f8ffcde3ee2b3b68373",text:null,metadata:{}}}}();d.hash="83ccec25e6256c5f67829663b62d44f2";var c,m=d,p={kind:"Fragment",name:"UniversalComposerModalWrapper_tribe",type:"Tribe",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanCreateContentQueueItem",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanContribute",args:null,storageKey:null}],hash:"b912111ecc66490e5b1432f897302fc9"},g=p,f=t("jufJ"),y=t("OMLc"),b=t("ui+i"),v=t("8lmh"),h=t("VyO/"),k=t("q1tI"),S=t.n(k);!function(e){e.permission_denied="permission_denied",e.permission_rate_limited="permission_rate_limited",e.success="success",e.generic="generic",e.insufficient_permissions="insufficient_permissions",e.title_and_content_empty="title_and_content_empty",e.title_empty="title_empty",e.content_empty="content_empty",e.title_too_long="title_too_long",e.content_too_long="content_too_long",e.rate_limit_exceeded="rate_limit_exceeded",e.user_banned="user_banned",e.user_edit_blocked="user_edit_blocked",e.requires_external_links="requires_external_links",e.requires_quora_links="requires_quora_links",e.requires_text="requires_text",e.tribe_does_not_accept_posts="tribe_does_not_accept_posts"}(c||(c={}));var F,_,T,w=c,E=function C(e){var n=e.tribe,t=e.pid,a=e.isPostEdit,l=void 0!==a&&a,i=e.children,r=e.dismissModalFlow,o=e.onSuccess,u=e.onComplete,d=e.accessOption,c=S.a.useState(!1),m=s()(c,2),p=m[0],g=m[1],k=S.a.useState(!1),F=s()(k,2),_=F[0],T=F[1],E=function(e){var t=e.content,a=e.title,l=e.shouldQueue,i=void 0!==l&&l;Object(v.tempFailureInvariant)(t,"content is ".concat(t)),Object(v.tempFailureInvariant)(a,"title is ".concat(a)),function(e){var t=e.shouldQueue,a=e.title,l=e.content;Object(h.c)({mutation:C.mutations.postAdd,variables:{tribeId:n.tribeId,title:a,content:l,shouldQueue:t,accessOption:null!==d&&void 0!==d?d:null}}).then((function(e){var n=e.data;g(!1),o({data:n,shouldQueue:t})}))["catch"]((function(e){Object(v.logJsError)("UniversalComposerModalWrapper-submit","Error: ".concat(e.message)),g(!1)}))}({shouldQueue:i,title:a,content:t}),null===u||void 0===u||u()};return i({postButtonProps:function(){var e=n.viewerCanCreateContentQueueItem,a=n.viewerCanContribute?S.a.createElement(f.Translate,{context:f.partOfSpeech.verb},"Post"):S.a.createElement(f.Translate,{context:f.partOfSpeech.verb},"Submit"),i=null;return i=l?{text:Object(f.plaintextTranslate)("Update"),onClick:function(e){var n=e.content,a=e.title;p||(g(!0),Object(v.tempFailureInvariant)(t,"pid is ".concat(t)),Object(v.tempFailureInvariant)(n,"content is ".concat(n)),Object(v.tempFailureInvariant)(a,"title is ".concat(a)),function(e){var n=e.content,t=e.pid;Object(h.c)({mutation:C.mutations.postEdit,variables:{pid:t,content:n}}).then((function(e){var n=e.data.postEdit;g(!1),n.status===w.success&&(null===r||void 0===r||r({reason:"edit_success"}))}))["catch"]((function(e){Object(v.logJsError)("UniversalComposerModalWrapper-edit","Error: ".concat(e.message)),g(!1)}))}({content:JSON.stringify(Object(b.a)(JSON.parse(a),JSON.parse(n))),pid:t}))}}:e?{leftText:a,leftOnClick:function(e){var n=e.content,t=e.title;p||(g(!0),E({content:n,title:t}))},rightIcon:S.a.createElement(y.b,{name:"ChevronDown"}),forceRightIconSize:16,isSplitButton:!0,rightPartHasPopoverMenu:!0,getOverflowMenuItems:function(e,n){return function(e,n){var t=[];return t.push({label:Object(f.plaintextTranslate)("Add to queue"),onSelected:function(){T(!_),E({content:n(),title:e(),shouldQueue:!0})},isCheckable:!0,closeOnClick:!0,isOn:_}),t}(e,n)}}:{text:a,onClick:function(e){var n=e.content,t=e.title;p||(g(!0),E({content:n,title:t}))}},Object.assign({},i,{disabled:p})}()})};E.displayName="UniversalComposerModalWrapper",E.fragments={tribe:void 0!==F?F:F=i},E.mutations={postAdd:void 0!==_?_:_=l,postEdit:void 0!==T?T:T=a};n.a=Object(h.b)(E)},LsdO:function(e,n,t){"use strict";var a={};t.r(a),t.d(a,"default",(function(){return T}));var l={};t.r(l),t.d(l,"default",(function(){return E}));var i={};t.r(i),t.d(i,"default",(function(){return K}));var r={};t.r(r),t.d(r,"default",(function(){return q}));var s=t("o0o1"),o=t.n(s),u=t("yXPU"),d=t.n(u),c=t("J4zp"),m=t.n(c),p=t("lwsE"),g=t.n(p),f=t("W8MJ"),y=t.n(f),b=t("7W2i"),v=t.n(b),h=t("a1gu"),k=t.n(h),S=t("Nsbk"),F=t.n(S),_=function(){var e=[{kind:"LocalArgument",name:"qid",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"answerer_uid",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"a2a_type",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"action_source",type:"BigInt!",defaultValue:null}],n=[{kind:"LinkedField",alias:null,name:"questionAskToAnswerAdd",storageKey:null,args:[{kind:"Variable",name:"a2aType",variableName:"a2a_type"},{kind:"Variable",name:"actionSource",variableName:"action_source"},{kind:"Variable",name:"answererUid",variableName:"answerer_uid"},{kind:"Variable",name:"qid",variableName:"qid"}],concreteType:"QuestionAskToAnswerAdd",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"success",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"translatedMessage",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerHasAskedToAnswer",args:[{kind:"Variable",name:"uid",variableName:"answerer_uid"}],storageKey:null}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"AskQuestionSelector_questionAskToAnswerAdd_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:n},operation:{kind:"Operation",name:"AskQuestionSelector_questionAskToAnswerAdd_Mutation",argumentDefinitions:e,selections:n},params:{operationKind:"mutation",name:"AskQuestionSelector_questionAskToAnswerAdd_Mutation",id:"4ce3a457d74cc638d54fd6241929f2f5da731e2933e8b99576ca5a08e891977d",text:null,metadata:{}}}}();_.hash="d0c3b6c1d68b4b67f79e19b4654eda5c";var T=_,w={kind:"Fragment",name:"AskQuestionSelector_tribe",type:"Tribe",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null}],hash:"055c48d7fd1ba34b50f082966f7e2346"},E=w,C={kind:"Fragment",name:"AskQuestionSelector_user",type:"User",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null}],hash:"268d96df74dd1f086b437c521aa94b87"},K=C,O=function(){var e=[{kind:"LocalArgument",name:"query",type:"String!",defaultValue:null},{kind:"LocalArgument",name:"nid",type:"Int!",defaultValue:null},{kind:"LocalArgument",name:"uid",type:"BigInt",defaultValue:null},{kind:"LocalArgument",name:"tribeId",type:"BigInt",defaultValue:null}],n=[{kind:"Variable",name:"nid",variableName:"nid"}],t={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l=[{kind:"Variable",name:"contextOid",variableName:"tribeId"},{kind:"Literal",name:"limit",value:6},{kind:"Variable",name:"query",variableName:"query"},{kind:"Literal",name:"querySource",value:"question_duplicate"},{kind:"Literal",name:"queryType",value:"ask_question_duplicate"}],i={kind:"ScalarField",alias:null,name:"viewerHasAskedToAnswer",args:[{kind:"Variable",name:"uid",variableName:"uid"}],storageKey:null},r={kind:"ScalarField",alias:null,name:"qid",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},o={kind:"FragmentSpread",name:"QuestionTitle_question",args:null},u={kind:"FragmentSpread",name:"QuestionAnswerCount_question",args:null},d={kind:"ScalarField",alias:null,name:"title",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"isPartnerQuestion",args:null,storageKey:null},m={kind:"LinkedField",alias:null,name:"asker",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[t,a,{kind:"ScalarField",alias:null,name:"isEmployee",args:null,storageKey:null}]},p={kind:"LinkedField",alias:null,name:"network",storageKey:null,args:null,concreteType:"Network",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"nid",args:null,storageKey:null},t]},g={kind:"LinkedField",alias:null,name:"tribeItem",storageKey:null,args:null,concreteType:null,plural:!1,selections:[a,{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null},t]},t]},f={kind:"ScalarField",alias:null,name:"answerCount",args:null,storageKey:null},y={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"tribeItem",storageKey:null,args:null,concreteType:null,plural:!1,selections:[a,{kind:"ScalarField",alias:null,name:"tribeItemId",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[t,a,{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null}]}]};return{kind:"Request",fragment:{kind:"Fragment",name:"AskQuestionSelectorQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"network",storageKey:null,args:n,concreteType:"Network",plural:!1,selections:[t,a,{kind:"LinkedField",alias:null,name:"searchQuery",storageKey:null,args:l,concreteType:null,plural:!0,selections:[t,a,{kind:"InlineFragment",type:"QuestionSearchResult",selections:[{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[t,i,r,s,a,o,u]}]},{kind:"InlineFragment",type:"QuestionRedirectSearchResult",selections:[{kind:"LinkedField",alias:null,name:"toQuestion",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[t,s,r,a,o,u]}]}]}]}]},operation:{kind:"Operation",name:"AskQuestionSelectorQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"network",storageKey:null,args:n,concreteType:"Network",plural:!1,selections:[t,a,{kind:"LinkedField",alias:null,name:"searchQuery",storageKey:null,args:l,concreteType:null,plural:!0,selections:[t,a,{kind:"InlineFragment",type:"QuestionSearchResult",selections:[{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[t,i,r,a,d,c,m,s,p,g,f,y]}]},{kind:"InlineFragment",type:"QuestionRedirectSearchResult",selections:[{kind:"LinkedField",alias:null,name:"toQuestion",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[t,a,r,d,c,m,s,p,g,f,y]}]}]}]}]},params:{operationKind:"query",name:"AskQuestionSelectorQuery",id:"b34eb9d7b67bc020a443d39189223f7b7753cd42e87be4740d0d56764a662d7a",text:null,metadata:{}}}}();O.hash="76b91822473d3b19cf9126f4c4d2f850";var A,x,M,R,q=O,I=t("68Yv"),L=t("VH/0"),P=t("jufJ"),D=t("9k9Z"),j=t("MI6j"),N=t("cztr"),B=t("LNH1"),Q=t("RA+f"),V=t("bslc"),U=t("Kk/C"),z=t("VyO/"),W=t("wTYd"),H=t("UyMh"),J=t("q1tI"),G=t.n(J),Y=t("GDBS"),Z=t("LGbj"),X=t("e0uH"),$=t("Axd8"),ee=t("W+Km");function ne(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=F()(e);if(n){var l=F()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return k()(this,t)}}var te=void 0!==A?A:A=r,ae=[0,5,6,7,8,10,11,13,14,15,16,17,27];function le(e,n,t){var a;(a=e)&&a.length>0&&(a="\xbf"===a[0]?"\xbf"+a[1].toUpperCase()+a.slice(2):a[0].toUpperCase()+a.slice(1)),e=a;var l=0;if(!t)return[e,l];var i=(e=e.trim()).charAt(e.length-1);return[".","?","!"].includes(i)||(e=e.concat("?")),5===n&&"\xbf"!==e.charAt(0)&&(e="\xbf"+e,l+=1),[e,l]}var ie=function(e){v()(t,e);var n=ne(t);function t(e){var a;if(g()(this,t),(a=n.call(this,e)).initialInput=void 0,a.initialCursorPosition=void 0,a.firstEdit=void 0,a.selectorRef=void 0,a.handleInputChange=function(e){var n,t;null===(n=(t=a.props).handleInputChange)||void 0===n||n.call(t,e),a.setState({input:e})},a.manipulateInput=function(e){var n=le(e,a.getNid(),a.firstEdit);return a.firstEdit=!1,n},a.selectorRef=G.a.createRef(),a.initialInput=e.initialInput?e.initialInput:"",a.initialCursorPosition=0,a.firstEdit=!0,a.initialInput){var l,i=a.initialInput.length,r=le(a.initialInput,a.getNid(),!0),s=m()(r,2);a.initialInput=s[0],l=s[1],a.initialCursorPosition=i+l,a.firstEdit=!1,a.props.handleInputChange&&a.props.handleInputChange(a.initialInput)}return a.state={input:a.initialInput},a}return y()(t,[{key:"getNid",value:function(){return this.props.overrideNid||this.context}},{key:"focus",value:function(){return this.selectorRef.current.focus()}},{key:"onSelectHandler",value:function(e,n){if(this.props.handleExistingQuestionAnswerTranslate)this.props.handleExistingQuestionAnswerTranslate(e);else if(this.props.requestTarget){var t=this.getA2aMutationOptions(e);Object(z.c)(t).then((function(e){var t=e.data.questionAskToAnswerAdd;if(t){var a=t.success,l=t.translatedMessage;!a&&l&&n(Object(P.plaintextServerTranslated)(l),B.d.success)}}))}else Object(H.b)(e.url,"present")}},{key:"isRequestSent",value:function(e){return!!this.props.requestTarget&&e.viewerHasAskedToAnswer}},{key:"getA2aMutationOptions",value:function(e){var n=t.mutations.questionAskToAnswerAdd,a=e.qid,l=e.id,i=e.__typename,r=this.getA2aTypeAndUidFromRequestTarget(),s=r.a2aType;return{mutation:n,variables:{qid:a,answerer_uid:r.uid,a2a_type:Object($.a)(s),action_source:Object(Z.a)(Y.a.none)},optimisticResponse:{questionAskToAnswerAdd:{success:!0,translatedMessage:null,question:{id:l,__typename:i,viewerHasAskedToAnswer:!0}}}}}},{key:"getA2aTypeAndUidFromRequestTarget",value:function(){var e=this.props.requestTarget;if(!e)throw new Error("no requestTarget");var n=e.__typename;if("User"===n){var t=e;return{a2aType:X.a.profile,uid:t.uid}}throw new Error("bad typename ".concat(n))}},{key:"render",value:function(){var e=this,n=this.getNid(),a=ae.includes(n)?{manipulateInput:function(n){return e.manipulateInput(n)}}:{};return G.a.createElement(B.b,null,(function(l){return G.a.createElement(W.d,{nid:n},G.a.createElement(Q.e,{mt:"medium"},G.a.createElement(N.a,Object.assign({async:!0,queryTimeoutMsecs:500,options:d()(o.a.mark((function i(){var a,r,s,u,d,c,m,p,g;return o.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!e.props.showDuplicateQuestions){i.next=11;break}if(!e.state.input){i.next=8;break}return i.next=4,Object(z.e)({query:t.queries.selector,variables:{query:e.state.input,nid:n,tribeId:null===(u=e.props.tribe)||void 0===u?void 0:u.tribeId,uid:null===(d=e.props.user)||void 0===d?void 0:d.uid},fetchPolicy:"store-or-network"});case 4:c=i.sent,s=c.data,i.next=9;break;case 8:s={network:{searchQuery:[]}};case 9:i.next=12;break;case 11:s=null;case 12:if(Object(L.b)(I.b.ask_question_step,I.a.duplicate_questions_query),m=[],null===(a=s)||void 0===a||null===(r=a.network)||void 0===r||!r.searchQuery){i.next=24;break}p=function(n){var t=s.network.searchQuery[n];if(!t)return"continue";m.push({item:G.a.createElement(re,{searchQuery:t,isRequested:t.question&&e.isRequestSent(t.question),showRequestButton:!!e.props.requestTarget,includeSubText:!e.props.handleExistingQuestionAnswerTranslate}),title:Object(P.plaintextUserGeneratedContent)(e.state.input),onSelect:function(){t.question&&e.onSelectHandler(t.question,l)},refreshOnSelect:!0})},g=0;case 17:if(!(g<s.network.searchQuery.length)){i.next=24;break}if("continue"!==p(g)){i.next=21;break}return i.abrupt("continue",21);case 21:g++,i.next=17;break;case 24:return i.abrupt("return",m);case 25:case"end":return i.stop()}}),i)}))),inputPlaceholder:e.props.inputPlaceholder,limit:6,onInputChange:function(n){return e.handleInputChange(n)},initialInput:e.initialInput,initialCursorPosition:e.initialCursorPosition,onFocus:function(e){var n=e.target.value;e.target.value="",e.target.value=n},closeOnClick:!!e.props.handleExistingQuestionAnswerTranslate,closeOnClickAway:!!e.props.handleExistingQuestionAnswerTranslate,listComponent:Q.g,inputWrapperProps:{numChars:e.state.input.length,noBorder:!0,variant:"large",charLimit:e.props.withCharLimit?e.props.getCharLimit?e.props.getCharLimit(e.state.input):ee.a:undefined,charTolerance:e.props.withCharLimit?e.props.charTolerance:undefined,borderBottom:e.props.borderBottom,pb:e.props.borderBottom?"small":undefined,borderRadius:0},autoFocus:!0,forceOpenMenu:!e.props.handleExistingQuestionAnswerTranslate,useTextArea:e.props.useTextArea,autosize:!0,hideLoadingDots:!0,forwardedRef:e.selectorRef},a))))}))}}]),t}(G.a.Component);ie.contextType=W.b,ie.defaultProps={showDuplicateQuestions:!0,useTextArea:!0,charTolerance:.9,borderBottom:!0,withCharLimit:!0},ie.fragments={user:void 0!==x?x:x=i,tribe:void 0!==M?M:M=l},ie.queries={selector:te},ie.mutations={questionAskToAnswerAdd:void 0!==R?R:R=a},ie.displayName="AskQuestionSelector";n.a=Object(z.b)(ie);var re=function(e){v()(t,e);var n=ne(t);function t(){return g()(this,t),n.apply(this,arguments)}return y()(t,[{key:"renderRequestButton",value:function(){return this.props.showRequestButton?G.a.createElement(D.a,{pressed:this.props.isRequested}):null}},{key:"render",value:function(){var e,n,t=this.props.searchQuery;return t?(t.question?e=t.question:t.toQuestion&&(e=t.toQuestion),e?G.a.createElement(j.c,{mainText:G.a.createElement(U.a,{question:e,fontSize:"small"}),subText:this.props.includeSubText?G.a.createElement(V.a,{question:e}):null,includePageMargin:!1,secondaryComponent:null!==(n=this.renderRequestButton())&&void 0!==n?n:undefined,propagateOnClickSecondaryComponent:!0}):null):null}}]),t}(G.a.Component);re.displayName="AskQuestionSelectorResult"},P8a8:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return F}));var a=t("lwsE"),l=t.n(a),i=t("W8MJ"),r=t.n(i),s=t("7W2i"),o=t.n(s),u=t("a1gu"),d=t.n(u),c=t("Nsbk"),m=t.n(c),p=t("jufJ"),g=t("7r18"),f=t("RA+f"),y=t("nqCt"),b=t("nwxp"),v=t("q1tI"),h=t.n(v),k=t("eL6j");function S(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=m()(e);if(n){var l=m()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return d()(this,t)}}var F=function(e){o()(t,e);var n=S(t);function t(){return l()(this,t),n.apply(this,arguments)}return r()(t,[{key:"getTitleText",value:function(){return Object(p.plaintextTranslate)(h.a.createElement(p.Translate,null,"What is an owner?"))}},{key:"render",value:function(){var e=this.props.dismissModalFlow,n={titleText:this.getTitleText(),navButtonProps:{onClick:function(){return e()}}};return h.a.createElement(g.f,n,h.a.createElement(f.e,{pb:"medium"},h.a.createElement(f.s,null,h.a.createElement(p.Translate,null,"An owner of a Space is the admin who created the Space or has been granted ownership by the previous owner."," ",Object(y.a)("TribeEarningsProgramFeature",!1)?"They can invite or remove admins, delete the Space, and manage earnings for the Space.":"They can invite or remove admins and delete the Space."))),h.a.createElement(f.e,{mx:Object(b.e)()?"n_tiny":"n_small"},h.a.createElement(k.a,null)))}}]),t}(h.a.Component);F.displayName="TribeOwnerInfoModal"},QK84:function(e,n,t){"use strict";t.d(n,"b",(function(){return s})),t.d(n,"a",(function(){return o}));var a=t("UDrg"),l=t("QOfV"),i=t("zv2T"),r=function(e){return Object(i.e)()&&(e.producerDirectStatus===l.a.enabled||e.producerBundleStatus===l.a.enabled)},s=function(e,n){return!!n&&(!n.viewerCanContribute&&(e===a.a.post||e===a.a.answer)&&r(n))},o=function(e){return e&&!e.viewerCanAdmin&&(e.viewerCanContribute||e.viewerCanModerate)&&r(e)}},QwTT:function(e,n,t){"use strict";var a=t("2yMK"),l=t("jufJ"),i=t("VKzv"),r=t("RA+f"),s=t("q1tI"),o=t.n(s),u=t("oigA"),d=t("IAlV"),c=t("szkJ"),m=t("SseM"),p=t("NNru"),g=t("ZsYs"),f=function y(e){var n,t,s,f,b,v=e.businessUid,h=e.businessName,k=e.businessLogoUrl,S=e.businessCustomAction,F=e.onCTAChange,_=e.isAnswerEdit,T=void 0!==_&&_,w=e.businessProfileAdFeaturesAvailable;return v?o.a.createElement(r.e,{mb:"medium"},o.a.createElement(g["default"],{businessUid:v,businessName:null!==h&&void 0!==h?h:"",profileImageUrl:null!==k&&void 0!==k?k:undefined,businessProfileAdFeaturesAvailable:w,objectiveType:null!==(n=null===S||void 0===S?void 0:S.objectiveType)&&void 0!==n?n:y.defaultCustomAction.objectiveType,cta:null!==(t=Object(d.a)(null!==(s=null===S||void 0===S?void 0:S.cta)&&void 0!==s?s:null))&&void 0!==t?t:y.defaultCustomAction.cta,landingPageUrl:null!==(f=null===S||void 0===S?void 0:S.landingPageUrl)&&void 0!==f?f:"",leadGenFormId:null!==(b=null===S||void 0===S?void 0:S.leadGenFormId)&&void 0!==b?b:undefined,showProfileCustomAction:!0,updateCustomAction:function(e){F(e)},customActionPlacement:p.g.answerEditor},(function(e){var n,t=e.openModalFlow;return o.a.createElement(r.j,{flexDirection:"column",p:"small",justifyContent:"center",alignItems:"center"},T?null:o.a.createElement(i.a,{placement:"top",trigger:"none",text:o.a.createElement(l.Translate,null,"Customize the answer action here."),displayOnMobile:!0,initiallyVisible:!0,isDismissable:!0,hideOnBodyClick:!0,hideTime:5e3}),o.a.createElement(r.f,{width:"100%",onClick:function(){t()}},o.a.createElement(a.a,{logoImageUrl:k,cta:(null===S||void 0===S?void 0:S.cta)||u.a.learn_more,objectiveType:null!==(n=null===S||void 0===S?void 0:S.objectiveType)&&void 0!==n?n:c.a.profile,businessName:null!==h&&void 0!==h?h:"",landingPageUrl:null,isEditMode:!0,formPlacement:m.a.business_answer,bannerActionType:p.c.editable})))}))):null};f.displayName="BusinessAnswerEditorCTABanner",f.defaultCustomAction={objectiveType:c.a.profile,cta:u.a.learn_more},n.a=f},RAJQ:function(e,n,t){"use strict";var a={};t.r(a),t.d(a,"default",(function(){return y}));var l,i=t("lwsE"),r=t.n(i),s=t("W8MJ"),o=t.n(s),u=t("7W2i"),d=t.n(u),c=t("a1gu"),m=t.n(c),p=t("Nsbk"),g=t.n(p),f={kind:"Fragment",name:"SubmissionRulesText_tribe",type:"Tribe",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"submissionRules",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"settings",storageKey:null,args:null,concreteType:"TribeSettings",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"submissionReviewPeriod",args:null,storageKey:null}]}],hash:"a1d8fdf240dc1ae32310ccb790b3601a"},y=f,b=t("jufJ"),v=t("AFGi"),h=t("wB5M"),k=t("Kh5g"),S=t("RA+f"),F=t("VyO/"),_=t("nwxp"),T=t("q1tI"),w=t.n(T);function E(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=g()(e);if(n){var l=g()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return m()(this,t)}}var C=function(e){d()(t,e);var n=E(t);function t(){return r()(this,t),n.apply(this,arguments)}return o()(t,[{key:"render",value:function(){var e=this.props.tribe,n=e.submissionRules,t=e.settings.submissionReviewPeriod,a=this.props.bg;if(!n)return null;var l=JSON.parse(n),i=t&&w.a.createElement(b.Translate,null,"The Space admins and moderators have"," ",w.a.createElement(b.FormattedNumber,{value:t}),w.a.createElement(b.PluralTranslate,{value:t},{ONE:" day ",OTHER:" days "}),"to review submissions. Submissions not accepted in that time will be automatically declined. You will be notified when your submission's status is updated."),r=w.a.createElement(w.a.Fragment,null,w.a.createElement(S.e,{borderTop:!0,p:"small",color:"gray"}),w.a.createElement(S.s,{color:"gray"},i));return Object(v.q)(l)?i:this.props.truncated?w.a.createElement(w.a.Fragment,null,w.a.createElement(S.e,{pb:"small"},w.a.createElement(h.a,{qt:l,bg:a,charLimit:Object(_.e)()?90:130})),r):w.a.createElement(w.a.Fragment,null,w.a.createElement(S.e,{pb:"small"},w.a.createElement(k.a,{qt:l,bg:a})),r)}}]),t}(w.a.Component);C.fragments={tribe:void 0!==l?l:l=a},C.defaultProps={truncated:!0},C.displayName="SubmissionRulesText";n.a=Object(F.b)(C)},Sa7g:function(e,n,t){"use strict";t.r(n);var a={};t.r(a),t.d(a,"default",(function(){return k}));var l={};t.r(l),t.d(l,"default",(function(){return T}));var i=t("RIqP"),r=t.n(i),s=t("lwsE"),o=t.n(s),u=t("W8MJ"),d=t.n(u),c=t("PJYZ"),m=t.n(c),p=t("7W2i"),g=t.n(p),f=t("a1gu"),y=t.n(f),b=t("Nsbk"),v=t.n(b),h=function(){var e=[{kind:"LocalArgument",name:"recipientUid",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null},{kind:"LocalArgument",name:"adminAction",type:"AdminActions!",defaultValue:null}],n=[{kind:"LinkedField",alias:null,name:"adminMessageSend",storageKey:null,args:[{kind:"Variable",name:"adminAction",variableName:"adminAction"},{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"recipientUid",variableName:"recipientUid"}],concreteType:"AdminMessageSend",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"success",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"errorMsg",args:null,storageKey:null}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"AdminMessageModal_adminMessageSend_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:n},operation:{kind:"Operation",name:"AdminMessageModal_adminMessageSend_Mutation",argumentDefinitions:e,selections:n},params:{operationKind:"mutation",name:"AdminMessageModal_adminMessageSend_Mutation",id:"28ea17c072cf743f7bcc485606c2e8e41137c0544215be332ffefce63c0cf4cc",text:null,metadata:{}}}}();h.hash="5ca0ff6ff57d0a11865f245263cf7246";var k=h,S=function(){var e=[{kind:"LocalArgument",name:"recipientUid",type:"BigInt!",defaultValue:null}],n=[{kind:"Variable",name:"uid",variableName:"recipientUid"}],t={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},i=[l,a,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}];return{kind:"Request",fragment:{kind:"Fragment",name:"AdminMessageModalQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:n,concreteType:"User",plural:!1,selections:[t,{kind:"FragmentSpread",name:"UserName_user",args:null}]}]},operation:{kind:"Operation",name:"AdminMessageModalQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:n,concreteType:"User",plural:!1,selections:[t,a,l,{kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:i},{kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:i},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]}]}]},params:{operationKind:"query",name:"AdminMessageModalQuery",id:"e39ca418fd8d68ffd021387a73bce79a60a147b371077c3c8d9d4436f73924fd",text:null,metadata:{}}}}();S.hash="a108a9a9b8aaff91a598b99db95e6810";var F,_,T=S,w=t("jufJ"),E=t("7r18"),C=t("AFGi"),K=t("EreF"),O=t("LNH1"),A=t("RA+f"),x=t("R+um"),M=t("VyO/"),R=t("nwxp"),q=t("q1tI"),I=t.n(q),L=t("KOB0");function P(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=v()(e);if(n){var l=v()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return y()(this,t)}}var D=function(e){g()(t,e);var n=P(t);function t(e){var a;return o()(this,t),(a=n.call(this,e)).editorRef=void 0,a.editorRef=I.a.createRef(),a.state={editorHasContent:!1},a.handleComposerMeaningfulChange=a.handleComposerMeaningfulChange.bind(m()(a)),a}return d()(t,[{key:"getTitle",value:function(){switch(this.props.extraProps.adminAction){case L.a.content_warning:return I.a.createElement(w.ForceEnglishForInternalTools,null,"Send Content Warning as Quora Moderation");case L.a.edit_block_warning:return I.a.createElement(w.ForceEnglishForInternalTools,null,"Warn about Blocking Edits as Quora Moderation");default:return I.a.createElement(w.ForceEnglishForInternalTools,null,"Send Message as Quora Moderation")}}},{key:"getStartingContent",value:function(){var e=[];switch(this.props.extraProps.adminAction){case L.a.content_warning:e=[Object(w.plaintextTranslate)(I.a.createElement(I.a.Fragment,null,"Hello,")),Object(w.plaintextTranslate)(I.a.createElement(I.a.Fragment,null,"[Message about content... Please cite sources.]")),Object(w.plaintextTranslate)(I.a.createElement(I.a.Fragment,null,"Quora Moderation"))];break;case L.a.edit_block_warning:e=[Object(w.plaintextTranslate)(I.a.createElement(I.a.Fragment,null,"Hello,")),Object(w.plaintextTranslate)(I.a.createElement(I.a.Fragment,null,"[Message about possibly blocking editing... Please cite sources.]")),Object(w.plaintextTranslate)(I.a.createElement(I.a.Fragment,null,"Quora Moderation"))]}return e.map((function(e){return Object(C.w)(e)})).reduce((function(e,n){var t;return(t=e.sections).push.apply(t,r()(n.sections)),e}),Object(C.h)())}},{key:"adminMessageSendMutation",value:function(e,n){var a=this.props,l=a.extraProps,i=a.dismissModalFlow,r=l.recipientUid;return Object(M.c)({mutation:t.mutations.adminMessageSend,variables:{recipientUid:r,content:JSON.stringify(e),adminAction:l.adminAction}}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.adminMessageSend,l=a.success,r=a.errorMsg;r?n(Object(w.plaintextServerTranslated)(r),O.d.error):l?(n(Object(w.plaintextForceEnglishForInternalTools)("Your message was sent successfully."),O.d.success),i(),window.location.reload()):n.genericError()}))}},{key:"handleSubmit",value:function(e){var n,t=null===(n=this.editorRef.current)||void 0===n?void 0:n.save();t?Object(C.q)(t)?e(Object(w.plaintextForceEnglishForInternalTools)("Please finish your message before sending."),O.d.error):this.adminMessageSendMutation(t,e):e.genericError()}},{key:"handleComposerMeaningfulChange",value:function(e){e&&e.isEmpty&&this.setState({editorHasContent:!e.isEmpty()})}},{key:"render",value:function(){var e=this,n=this.props,t=n.dismissModalFlow,a=n.queryResult,l=a.user;if(!l)throw Error("Query Result is ".concat(a," for AdminMessageModal."));return I.a.createElement(O.b,null,(function(n){return I.a.createElement(E.f,{header:I.a.createElement(E.m,null,e.getTitle()),hasPadding:!1,navButtonProps:{onClick:function(){return t()}},primaryButtonProps:{text:Object(w.plaintextForceEnglishForInternalTools)("Send Message"),onClick:function(){return e.handleSubmit(n)},disabled:!e.state.editorHasContent},secondaryButtonProps:{text:Object(w.plaintextForceEnglishForInternalTools)("Cancel"),onClick:function(){return t()}}},I.a.createElement(A.e,null,I.a.createElement(A.e,{mx:"large"},I.a.createElement(A.s,{bold:!0},I.a.createElement(w.Translate,null,"To: ",I.a.createElement(x.b,{user:l})))),I.a.createElement(A.e,{my:"large",mx:"large",maxHeight:Object(R.b)()?"400px":undefined,overflowY:Object(R.b)()?"scroll":undefined,borderAll:Object(R.b)()},I.a.createElement(K.a,{ref:e.editorRef,placeholder:Object(w.plaintextForceEnglishForInternalTools)("Type a message..."),content:e.getStartingContent(),focusOnLoad:!0,toolbarOnWeb:!1,commandsToDisable:["horizontal-rule","video"],onMeaningfulChange:e.handleComposerMeaningfulChange}))))}))}}]),t}(I.a.Component);D.queries={onLoad:void 0!==F?F:F=l},D.mutations={adminMessageSend:void 0!==_?_:_=a},D.displayName="AdminMessageModal";n["default"]=D},"VH/0":function(e,n,t){"use strict";t.d(n,"b",(function(){return s})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return u}));var a=t("Yc5t"),l=t("AaDK"),i=t("q1tI"),r=t.n(i),s=function(e,n){return Object(l.a)("ask_question_flow",{step:e,action:n,is_react:!0})},o=function(e,n,t){return Object(l.a)("ask_question_flow_transitions",{from_step:e,to_step:n,is_standalone:t,is_react:!0})},u=function(e){var n=e.stepType,t=e.customLog,i=e.children;return r.a.createElement(a.a,{onImpression:function(e){e&&Object(l.a)("ask_question_flow_impressions",{step:n,custom_log:t})}},i)}},Vx0C:function(e,n,t){"use strict";var a={};t.r(a),t.d(a,"default",(function(){return S}));var l={};t.r(l),t.d(l,"default",(function(){return _}));var i={};t.r(i),t.d(i,"default",(function(){return w}));var r={};t.r(r),t.d(r,"default",(function(){return C}));var s={};t.r(s),t.d(s,"default",(function(){return O}));var o={};t.r(o),t.d(o,"default",(function(){return x}));var u={};t.r(u),t.d(u,"default",(function(){return N}));var d=t("lwsE"),c=t.n(d),m=t("W8MJ"),p=t.n(m),g=t("7W2i"),f=t.n(g),y=t("a1gu"),b=t.n(y),v=t("Nsbk"),h=t.n(v),k=function(){var e=[{kind:"LocalArgument",name:"tribeId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"qid",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null}],n=[{kind:"LinkedField",alias:"answerSubmit",name:"tribeSubmissionAnswerAdd",storageKey:null,args:[{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"qid",variableName:"qid"},{kind:"Variable",name:"tribeId",variableName:"tribeId"}],concreteType:"TribeSubmissionAnswerAdd",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"success",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"msg",args:null,storageKey:null}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"AnswerEditorMutation_tribeSubmissionAnswerAdd_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:n},operation:{kind:"Operation",name:"AnswerEditorMutation_tribeSubmissionAnswerAdd_Mutation",argumentDefinitions:e,selections:n},params:{operationKind:"mutation",name:"AnswerEditorMutation_tribeSubmissionAnswerAdd_Mutation",id:"ecd9744455648ff619e26fc8d40495eb3cac513bbd7038981b27fc0d6954f372",text:null,metadata:{}}}}();k.hash="9d1c805bcc9396e756467de1801ca174";var S=k,F=function(){var e=[{kind:"LocalArgument",name:"qid",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null},{kind:"LocalArgument",name:"tribeId",type:"BigInt",defaultValue:null},{kind:"LocalArgument",name:"attachDisclaimer",type:"Boolean",defaultValue:null},{kind:"LocalArgument",name:"businessUid",type:"BigInt",defaultValue:null},{kind:"LocalArgument",name:"businessCustomAction",type:"BusinessCustomActionInput",defaultValue:null},{kind:"LocalArgument",name:"accessOption",type:"AccessOptionTypes",defaultValue:null}],n=[{kind:"Variable",name:"accessOption",variableName:"accessOption"},{kind:"Variable",name:"attachDisclaimer",variableName:"attachDisclaimer"},{kind:"Variable",name:"businessCustomAction",variableName:"businessCustomAction"},{kind:"Variable",name:"businessUid",variableName:"businessUid"},{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"qid",variableName:"qid"},{kind:"Variable",name:"tribeId",variableName:"tribeId"}],t={kind:"ScalarField",alias:null,name:"success",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"errorType",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"msg",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},o={kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},u={kind:"ScalarField",alias:null,name:"aid",args:null,storageKey:null},d={kind:"LinkedField",alias:null,name:"businessCredential",storageKey:null,args:null,concreteType:"BusinessCredential",plural:!1,selections:[r,s,{kind:"ScalarField",alias:null,name:"translatedString",args:null,storageKey:null}]},c={kind:"ScalarField",alias:null,name:"viewerAnswerUrl",args:null,storageKey:null},m={kind:"ScalarField",alias:null,name:"redirectUrl",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"AnswerEditorMutation_answerCreate_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:"answerSubmit",name:"answerCreate",storageKey:null,args:n,concreteType:"AnswerCreate",plural:!1,selections:[t,a,l,i,{kind:"LinkedField",alias:null,name:"answer",storageKey:null,args:null,concreteType:"Answer",plural:!1,selections:[r,s,o,u,d,{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[c]}]},m]}]},operation:{kind:"Operation",name:"AnswerEditorMutation_answerCreate_Mutation",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:"answerSubmit",name:"answerCreate",storageKey:null,args:n,concreteType:"AnswerCreate",plural:!1,selections:[t,a,l,i,{kind:"LinkedField",alias:null,name:"answer",storageKey:null,args:null,concreteType:"Answer",plural:!1,selections:[r,s,o,u,d,{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[c,r]}]},m]}]},params:{operationKind:"mutation",name:"AnswerEditorMutation_answerCreate_Mutation",id:"3a353520d48406ff6fe75903dcc6630668a26223c0ba8d5c2a69c04daf5b4290",text:null,metadata:{}}}}();F.hash="8f81d2142548dfd6d360c0e667ce35d3";var _=F,T=function(){var e=[{kind:"LocalArgument",name:"aid",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null},{kind:"LocalArgument",name:"toggleDisclaimer",type:"Boolean",defaultValue:null},{kind:"LocalArgument",name:"businessUid",type:"BigInt",defaultValue:null},{kind:"LocalArgument",name:"businessCustomAction",type:"BusinessCustomActionInput",defaultValue:null}],n=[{kind:"Variable",name:"aid",variableName:"aid"},{kind:"Variable",name:"businessCustomAction",variableName:"businessCustomAction"},{kind:"Variable",name:"businessUid",variableName:"businessUid"},{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"toggleDisclaimer",variableName:"toggleDisclaimer"}],t={kind:"ScalarField",alias:null,name:"success",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"errorType",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"msg",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},o={kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},u={kind:"ScalarField",alias:"hasDisclaimer",name:"hasContentFlag",args:[{kind:"Literal",name:"contentFlag",value:"disclaimer"}],storageKey:'hasContentFlag(contentFlag:"disclaimer")'},d={kind:"LinkedField",alias:null,name:"businessCredential",storageKey:null,args:null,concreteType:"BusinessCredential",plural:!1,selections:[r,s,{kind:"ScalarField",alias:null,name:"translatedString",args:null,storageKey:null}]},c={kind:"LinkedField",alias:null,name:"question",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[r,s,{kind:"ScalarField",alias:null,name:"qid",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerHasDrafted",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerShouldShowWriteAnswer",args:null,storageKey:null}]},m={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},p={kind:"ScalarField",alias:null,name:"logoUrl",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"objectiveType",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"cta",args:null,storageKey:null},y={kind:"ScalarField",alias:null,name:"landingPageUrl",args:null,storageKey:null},b={kind:"ScalarField",alias:null,name:"leadGenFormId",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"AnswerEditorMutation_answerEdit_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:"answerSubmit",name:"answerEdit",storageKey:null,args:n,concreteType:"AnswerEdit",plural:!1,selections:[t,a,l,i,{kind:"LinkedField",alias:null,name:"answer",storageKey:null,args:null,concreteType:"Answer",plural:!1,selections:[r,s,o,u,d,c,{kind:"LinkedField",alias:null,name:"businessAnswer",storageKey:null,args:null,concreteType:"BusinessAnswer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"businessProfile",storageKey:null,args:null,concreteType:"BusinessProfile",plural:!1,selections:[m,p]},{kind:"LinkedField",alias:null,name:"businessCustomAction",storageKey:null,args:null,concreteType:"BusinessCustomAction",plural:!1,selections:[g,f,y,b]}]}]}]}]},operation:{kind:"Operation",name:"AnswerEditorMutation_answerEdit_Mutation",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:"answerSubmit",name:"answerEdit",storageKey:null,args:n,concreteType:"AnswerEdit",plural:!1,selections:[t,a,l,i,{kind:"LinkedField",alias:null,name:"answer",storageKey:null,args:null,concreteType:"Answer",plural:!1,selections:[r,s,o,u,d,c,{kind:"LinkedField",alias:null,name:"businessAnswer",storageKey:null,args:null,concreteType:"BusinessAnswer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"businessProfile",storageKey:null,args:null,concreteType:"BusinessProfile",plural:!1,selections:[m,p,r]},{kind:"LinkedField",alias:null,name:"businessCustomAction",storageKey:null,args:null,concreteType:"BusinessCustomAction",plural:!1,selections:[g,f,y,b,r]},r]}]}]}]},params:{operationKind:"mutation",name:"AnswerEditorMutation_answerEdit_Mutation",id:"f181774fada3f5d56d3293e0919213f9afe6e70324443c5a99025e7ce85448ab",text:null,metadata:{}}}}();T.hash="2e263ba10f9882c318171c21a72ca2c9";var w=T,E=function(){var e=[{kind:"LocalArgument",name:"qid",type:"BigInt!",defaultValue:null}],n={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},a=[{kind:"LinkedField",alias:null,name:"answerDraftClear",storageKey:null,args:[{kind:"Variable",name:"qid",variableName:"qid"}],concreteType:"AnswerDraftClear",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[n,t,{kind:"ScalarField",alias:null,name:"showUserHasDraftPrompt",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerHasDrafted",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"viewerDraft",storageKey:null,args:null,concreteType:"AnswerDraft",plural:!1,selections:[n,t,{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"saveTime",args:null,storageKey:null}]}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"AnswerEditorMutation_answerDraftClear_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:a},operation:{kind:"Operation",name:"AnswerEditorMutation_answerDraftClear_Mutation",argumentDefinitions:e,selections:a},params:{operationKind:"mutation",name:"AnswerEditorMutation_answerDraftClear_Mutation",id:"7c88aab55d593b559c615800fbbfe0644e93dfcec0f7023ff858707b6d3d499c",text:null,metadata:{}}}}();E.hash="91fd1669d5cef6b91abbc0229e41da25";var C=E,K=function(){var e=[{kind:"LocalArgument",name:"qid",type:"BigInt",defaultValue:null},{kind:"LocalArgument",name:"aid",type:"BigInt",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null},{kind:"LocalArgument",name:"isAutoSaved",type:"Boolean",defaultValue:null},{kind:"LocalArgument",name:"isAnswerEdit",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"hasDisclaimer",type:"Boolean",defaultValue:null}],n=[{kind:"Variable",name:"aid",variableName:"aid"},{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"hasDisclaimer",variableName:"hasDisclaimer"},{kind:"Variable",name:"isAutoSaved",variableName:"isAutoSaved"},{kind:"Variable",name:"qid",variableName:"qid"}],t={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l=[t,a,{kind:"LinkedField",alias:null,name:"viewerDraft",storageKey:null,args:null,concreteType:"AnswerDraft",plural:!1,selections:[t,a,{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"saveTime",args:null,storageKey:null}]}],i=[{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:l}],r=[{kind:"LinkedField",alias:null,name:"answer",storageKey:null,args:null,concreteType:"Answer",plural:!1,selections:l}];return{kind:"Request",fragment:{kind:"Fragment",name:"AnswerEditorMutation_answerDraftSave_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"answerDraftSave",storageKey:null,args:n,concreteType:"AnswerDraftSave",plural:!1,selections:[{kind:"Condition",isCustom:!1,customValue:null,passingValue:!1,condition:"isAnswerEdit",selections:i},{kind:"Condition",isCustom:!1,customValue:null,passingValue:!0,condition:"isAnswerEdit",selections:r}]}]},operation:{kind:"Operation",name:"AnswerEditorMutation_answerDraftSave_Mutation",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"answerDraftSave",storageKey:null,args:n,concreteType:"AnswerDraftSave",plural:!1,selections:[{kind:"Condition",passingValue:!1,isCustom:!1,customValue:null,condition:"isAnswerEdit",selections:i},{kind:"Condition",passingValue:!0,isCustom:!1,customValue:null,condition:"isAnswerEdit",selections:r}]}]},params:{operationKind:"mutation",name:"AnswerEditorMutation_answerDraftSave_Mutation",id:"b146f6b43241f2eed9df1bde4b24da88f8a7a6efed3dcfeb03851aebe19f4e28",text:null,metadata:{}}}}();K.hash="0241c5f177cc9cff8b9ae4d7da41e4b9";var O=K,A=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},t={kind:"LinkedField",alias:null,name:"viewerDraft",storageKey:null,args:null,concreteType:"AnswerDraft",plural:!1,selections:[e,n]};return{kind:"Fragment",name:"AnswerEditorMutation_answer",type:"Answer",metadata:null,argumentDefinitions:[],selections:[e,n,{kind:"ScalarField",alias:null,name:"aid",args:null,storageKey:null},{kind:"ScalarField",alias:"hasDisclaimer",name:"hasContentFlag",args:[{kind:"Literal",name:"contentFlag",value:"disclaimer"}],storageKey:'hasContentFlag(contentFlag:"disclaimer")'},{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[e,n,{kind:"ScalarField",alias:null,name:"qid",args:null,storageKey:null},t]},t]}}();A.hash="ff1543cc136191c4cf3acffed5a88555";var x=A,M=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"producerBundleStatus",args:null,storageKey:null};return{kind:"Fragment",name:"AnswerEditorMutation_question",type:"Question",metadata:null,argumentDefinitions:[],selections:[e,n,{kind:"ScalarField",alias:null,name:"qid",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"tribeItem",storageKey:null,args:null,concreteType:null,plural:!1,selections:[e,n,{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[e,n,{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanCreateAnswerSubmissions",args:null,storageKey:null},t,{kind:"ScalarField",alias:null,name:"producerDirectStatus",args:null,storageKey:null}]}]},{kind:"LinkedField",alias:null,name:"viewerDraft",storageKey:null,args:null,concreteType:"AnswerDraft",plural:!1,selections:[e,n]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"PaidSubscriptionEnabledForProducer",value:"true"},condition:"onFeature",selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[t]}]}]}]}}();M.hash="da42c67f805e5f4750bea2ea0ebbe22d";var R,q,I,L,P,D,j,N=M,B=t("zv2T"),Q=t("yO5s"),V=t("Gnru"),U=t("VyO/"),z=t("R1F8"),W=t("q1tI"),H=t.n(W),J=t("ARre"),G=t("IAlV"),Y=t("Mh7H"),Z=t("QOfV");function X(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=h()(e);if(n){var l=h()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return b()(this,t)}}var $=function(e){f()(t,e);var n=X(t);function t(){return c()(this,t),n.apply(this,arguments)}return p()(t,[{key:"saveDraftMutationOptions",value:function(e,n,t,a){var l=this.props,i=l.isAnswerEdit,r=l.question,s=l.answer,o=i?{answer:s?{id:s.id,__typename:s.__typename,viewerDraft:s.viewerDraft?{id:s.viewerDraft.id,__typename:s.viewerDraft.__typename,content:JSON.stringify(e),saveTime:Object(z.o)()}:null}:null,question:null}:{question:r?{id:r.id,__typename:r.__typename,viewerDraft:r.viewerDraft?{id:r.viewerDraft.id,__typename:r.viewerDraft.__typename,content:JSON.stringify(e),saveTime:Object(z.o)()}:null}:null,answer:null};return{variables:{aid:i?null===s||void 0===s?void 0:s.aid:null,qid:i?null:null===r||void 0===r?void 0:r.qid,content:JSON.stringify(e),isAutoSaved:n,isAnswerEdit:!!i,hasDisclaimer:a},optimisticResponse:{answerDraftSave:Object.assign({},o)},onCompleted:function(e){!i&&Boolean(null===e||void 0===e?void 0:e.answerDraftSave)&&t("QuestionSaveDraft",{qid:null===r||void 0===r?void 0:r.qid})}}}},{key:"editAnswerMutationOptions",value:function(e,n,t,a,l){var i=this.props,r=i.answer,s=i.toggleDisclaimer;if(!r)return undefined;var o=r.id,u=r.aid,d=r.question,c=r.hasDisclaimer,m=s?!c:c;return{variables:{aid:u,content:JSON.stringify(e),toggleDisclaimer:s,businessUid:n,businessCustomAction:a?Object.assign({},a,{cta:Object(G.b)(a.cta),objectiveType:Object(Y.b)(a.objectiveType)}):null},optimisticResponse:{answerSubmit:{success:!0,errorType:null,msg:null,answer:{id:o,__typename:"Answer",hasDisclaimer:m,content:JSON.stringify(e),question:{id:d.id,__typename:"Question",qid:d.qid,viewerHasDrafted:!1,viewerShouldShowWriteAnswer:!1},businessCredential:t?{id:t.id,__typename:"BusinessCredential",translatedString:t.translatedString}:null,businessAnswer:null},status:J.a.success}},onCompleted:l}}},{key:"render",value:function(){var e,n,a,l,i=this,r=this.props,s=r.children,o=r.question,u=r.answer,d=r.isAnswerEdit,c=null!==(e=null===o||void 0===o||null===(n=o.tribeItem)||void 0===n?void 0:n.tribe)&&void 0!==e?e:{},m=c.tribeId,p=c.viewerCanCreateAnswerSubmissions,g=c.producerBundleStatus,f=c.producerDirectStatus,y=this.props.toggleDisclaimer,b=null!==o&&void 0!==o&&o.tribeItem?f===Z.a.enabled||g===Z.a.enabled:(null===o||void 0===o||null===(a=o.viewer)||void 0===a||null===(l=a.user)||void 0===l?void 0:l.producerBundleStatus)===Z.a.enabled,v=Object(B.e)()&&!d&&b;return H.a.createElement(Q.a.Consumer,null,(function(e){return H.a.createElement(V.ClientLogConsumer,null,(function(n){return H.a.createElement(U.a,{mutation:t.mutations.saveDraft,onError:function(){}},(function(a){return H.a.createElement(U.a,{mutation:t.mutations.clearDraft},(function(l){return H.a.createElement(U.a,{mutation:t.mutations.createAnswer},(function(r){return H.a.createElement(U.a,{mutation:t.mutations.createAnswerSubmission},(function(c){return H.a.createElement(U.a,{mutation:t.mutations.editAnswer},(function(t){return H.a.createElement(H.a.Fragment,null,s({saveDraft:function(e,t,r,s){var c;return r?l({variables:{qid:d?(null===u||void 0===u||null===(c=u.question)||void 0===c?void 0:c.qid)||0:(null===o||void 0===o?void 0:o.qid)||0},onCompleted:function(){d||n("QuestionSaveDraft",{qid:null===o||void 0===o?void 0:o.qid})}}):a(i.saveDraftMutationOptions(e,t,n,s))},submitAnswer:function(a,l,s,u,g){return d?t(i.editAnswerMutationOptions(a,l,s,u)):p||null!==e&&void 0!==e&&e.viewerCanCreateAnswerSubmissions?c({variables:{qid:(null===o||void 0===o?void 0:o.qid)||0,tribeId:m||(null===e||void 0===e?void 0:e.tribeId)||0,content:JSON.stringify(a)},onCompleted:function(e){var t;null!==e&&void 0!==e&&null!==(t=e.answerSubmit)&&void 0!==t&&t.success&&n("AddAnswer",{qid:null===o||void 0===o?void 0:o.qid})}}):r({variables:{qid:(null===o||void 0===o?void 0:o.qid)||0,content:JSON.stringify(a),tribeId:m||(null===e||void 0===e?void 0:e.tribeId),attachDisclaimer:y,businessUid:l,businessCustomAction:u?Object.assign({},u,{cta:Object(G.b)(u.cta),objectiveType:Object(Y.b)(u.objectiveType)}):null,accessOption:v&&null!==g&&g!==undefined?g:null},onCompleted:function(e){var t;(null===e||void 0===e||null===(t=e.answerSubmit)||void 0===t?void 0:t.status)===J.a.success&&n("AddAnswer",{qid:null===o||void 0===o?void 0:o.qid})}})},isTribeSubmission:p||(null===e||void 0===e?void 0:e.viewerCanCreateAnswerSubmissions)||!1}))}))}))}))}))}))}))}))}}]),t}(H.a.Component);$.fragments={question:void 0!==R?R:R=u,answer:void 0!==q?q:q=o},$.mutations={saveDraft:void 0!==I?I:I=s,clearDraft:void 0!==L?L:L=r,editAnswer:void 0!==P?P:P=i,createAnswer:void 0!==D?D:D=l,createAnswerSubmission:void 0!==j?j:j=a},$.displayName="AnswerEditorMutation";n.a=Object(U.b)($)},"W+Km":function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return r}));var a=t("DzJC"),l=t.n(a),i=250,r=function(e){return l()(e,3e3,{leading:!0,trailing:!1})}},WBlH:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var a=t("lSNA"),l=t.n(a),i=t("jufJ"),r=t("q1tI"),s=t.n(r),o=t("teWg");function u(e){var n,t=e.status;return s.a.createElement(i.Translate,null,s.a.createElement(i.EnumTranslate,{value:t},(n={},l()(n,o.a.suspected_spam,"The message you are trying to send contains content which has been identified as unsafe or abusive."),l()(n,o.a.unconfirmed_email,"Please confirm your email before sending this message."),l()(n,o.a.unsupported_characters,"Your message has failed to send because it contains unsupported characters."),l()(n,o.a.disabled_inbox,"This user currently has turned off receiving inbox messages."),l()(n,o.a.daily_rate_limit_exceeded,"You have reached the daily limit of sending messages to people who are not following you."),l()(n,o.a.no_access,"You don't have access to this thread."),n)))}},"WxC/":function(e,n,t){"use strict";t.d(n,"b",(function(){return u})),t.d(n,"d",(function(){return d})),t.d(n,"a",(function(){return c})),t.d(n,"c",(function(){return m})),t.d(n,"e",(function(){return p}));var a=t("lSNA"),l=t.n(a),i=t("jufJ"),r=t("q1tI"),s=t.n(r),o=t("amAD"),u=function(e){var n,t=e.level;return s.a.createElement(i.Translate,null,s.a.createElement(i.EnumTranslate,{value:t},(n={},l()(n,o.a.admin,"Admin"),l()(n,o.a.contributor,"Contributor"),l()(n,o.a.follower,"Follower"),l()(n,o.a.moderator,"Moderator"),n)))},d=function(e){var n,t=e.level;return s.a.createElement(i.EnumTranslate,{value:t},(n={},l()(n,o.a.admin,"admin"),l()(n,o.a.moderator,"moderator"),l()(n,o.a.contributor,"contributor"),l()(n,o.a.follower,"follower"),n))},c=function(e){var n,t=e.level;return s.a.createElement(i.Translate,null,s.a.createElement(i.EnumTranslate,{value:t},(n={},l()(n,o.a.admin,"Admins"),l()(n,o.a.contributor,"Contributors"),l()(n,o.a.follower,"Followers"),l()(n,o.a.moderator,"Moderators"),n)))},m=function(e){var n,t=e.level;return s.a.createElement(i.EnumTranslate,{value:t},(n={},l()(n,o.a.admin,"admins"),l()(n,o.a.moderator,"moderators"),l()(n,o.a.contributor,"contributors"),l()(n,o.a.follower,"followers"),n))},p=function(e){var n=e.level;return s.a.createElement(i.TranslationFragment,null,n===o.a.admin?"an ":"a ",s.a.createElement(d,{level:n}))}},"Y+rj":function(e,n,t){"use strict";t.r(n);var a={};t.r(a),t.d(a,"default",(function(){return o}));var l={};t.r(l),t.d(l,"default",(function(){return c}));var i=t("J4zp"),r=t.n(i),s=function(){var e=[{kind:"LocalArgument",name:"qid",type:"BigInt!",defaultValue:null}],n=[{kind:"Variable",name:"qid",variableName:"qid"}],t={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"qid",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"title",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"QuestionEditorModalQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:n,concreteType:"Question",plural:!1,selections:[t,a,l,i,{kind:"LinkedField",alias:null,name:"linkedQuestion",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[l,r]},{kind:"LinkedField",alias:null,name:"tribeItem",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[t,{kind:"FragmentSpread",name:"TribeQuestionAskedInTribeHeader_tribe",args:null}]}]}]}]},operation:{kind:"Operation",name:"QuestionEditorModalQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:n,concreteType:"Question",plural:!1,selections:[t,a,l,i,{kind:"LinkedField",alias:null,name:"linkedQuestion",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[l,r,t]},{kind:"LinkedField",alias:null,name:"tribeItem",storageKey:null,args:null,concreteType:null,plural:!1,selections:[a,{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[t,a,{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"nameString",args:null,storageKey:null},r,{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isFollowing",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"iconUrl",args:[{kind:"Literal",name:"size",value:100}],storageKey:"iconUrl(size:100)"},{kind:"ScalarField",alias:"iconRetinaUrl",name:"iconUrl",args:[{kind:"Literal",name:"size",value:200}],storageKey:"iconUrl(size:200)"}]},t]}]}]},params:{operationKind:"query",name:"QuestionEditorModalQuery",id:"232c71bbad85dd63c3b70b46d97385a5dee80b48a443a44525640f8b37c92590",text:null,metadata:{}}}}();s.hash="a220ca7c6555129b0b60eb40d1527787";var o=s,u=function(){var e=[{kind:"LocalArgument",name:"qid",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"titlePlaintext",type:"String!",defaultValue:null}],n=[{kind:"Variable",name:"qid",variableName:"qid"},{kind:"Variable",name:"titlePlaintext",variableName:"titlePlaintext"}],t={kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"title",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"qid",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},r={kind:"ScalarField",alias:"maxLength",name:"integerFeature",args:[{kind:"Literal",name:"name",value:"QuestionTitleMaxLength"}],storageKey:'integerFeature(name:"QuestionTitleMaxLength")'},s={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"QuestionEditorModal_questionEdit_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"questionEdit",storageKey:null,args:n,concreteType:"QuestionEdit",plural:!1,selections:[t,{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[a,{kind:"LinkedField",alias:null,name:"linkedQuestion",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[l,i]},{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[r]}]}]}]},operation:{kind:"Operation",name:"QuestionEditorModal_questionEdit_Mutation",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"questionEdit",storageKey:null,args:n,concreteType:"QuestionEdit",plural:!1,selections:[t,{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[a,{kind:"LinkedField",alias:null,name:"linkedQuestion",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[l,i,s]},{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[r,s]},s]}]}]},params:{operationKind:"mutation",name:"QuestionEditorModal_questionEdit_Mutation",id:"54f616ad8c684e5d19a6ed554f4684dad447fa3e342314e5297f63260d794d9c",text:null,metadata:{}}}}();u.hash="b6d61b8cac72d42fc9f04f8a6853c0b0";var d,c=u,m=t("LW3J"),p=t("jufJ"),g=t("cbxS"),f=t("F6zL"),y=t("7r18"),b=t("AFGi"),v=t("rAPm"),h=t("LNH1"),k=t("llss"),S=t("RA+f"),F=t("9GZO"),_=t("8lmh"),T=t("VyO/"),w=t("q1tI"),E=t.n(w);!function(e){e.permission_denied="permission_denied",e.permission_rate_limited="permission_rate_limited",e.success="success",e.generic_failure="generic_failure",e.question_empty="question_empty",e.rate_limit_exceeded="rate_limit_exceeded",e.text_too_long="text_too_long",e.question_state_stale="question_state_stale"}(d||(d={}));var C,K,O=d,A=void 0!==C?C:C=l,x=function(e){var n,t,a=e.dismissModalFlow,l=e.queryResult.question;Object(_.tempFailureInvariant)(l,"question is ".concat(l));var i=Object(b.t)(l.title,{includeMathTags:!0}),s=Object(w.useState)(i),o=r()(s,2),u=o[0],d=o[1],c=Object(w.useState)(!1),C=r()(c,2),K=C[0],x=C[1],M=Object(w.useState)(!1),R=r()(M,2),q=R[0],I=R[1];var L=l.linkedQuestion,P=l.tribeItem,D=Object(h.h)().setToast;return E.a.createElement(y.f,{titleText:Object(p.plaintextTranslate)("Edit Question"),navButtonProps:{onClick:function(){return a()}},secondaryButtonProps:{onClick:function(){return a()},text:Object(p.plaintextTranslate)("Cancel")},primaryButtonProps:{text:L?Object(p.plaintextTranslate)("Unlink and Save"):Object(p.plaintextTranslate)("Save"),disabled:!K,loading:q,onClick:function(){l&&(I(!0),Object(T.c)({variables:{qid:l.qid,titlePlaintext:u},mutation:A,onCompleted:function(){return I(!1)},onError:function(){return I(!1)}}).then((function(e){var n,t,l,i=null!==(n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.questionEdit)&&void 0!==n?n:{},r=i.status,s=i.question,o=null===s||void 0===s||null===(l=s.viewer)||void 0===l?void 0:l.maxLength;switch(r){case O.success:a(),P?L&&s&&!s.linkedQuestion?D.success(Object(p.plaintextTranslate)("Your edits are saved. This question is now unlinked from the parent question.")):D.success(Object(p.plaintextTranslate)("Your edits are saved.")):D.success(Object(p.plaintextTranslate)("Thank you for your change. Your edit is being reviewed."));break;case O.question_empty:D.error(Object(p.plaintextTranslate)("Your question cannot be blank."));break;case O.rate_limit_exceeded:D.error(Object(p.plaintextTranslate)("You have exceeded the limit for editing question text."));break;case O.text_too_long:D.error(Object(p.plaintextTranslate)(E.a.createElement(E.a.Fragment,null,"This question should be shorter.",E.a.createElement(E.a.Fragment,null,o&&E.a.createElement(E.a.Fragment,null," Please rephrase the question to be a concise, easily understood question with fewer than ",E.a.createElement(p.FormattedNumber,{value:o}),E.a.createElement(p.PluralTranslate,{value:o},{ONE:" character.",OTHER:" characters."}))))));break;case O.question_state_stale:D.error(Object(p.plaintextTranslate)("This question was edited recently, please try again."));break;default:D.error(Object(p.plaintextTranslate)("Could not save question. Please retry."))}})))}}},E.a.createElement(S.e,{borderAll:!0,borderRadius:"small"},E.a.createElement(S.e,{p:"small",pb:"tiny",borderBottom:!0},(null===l||void 0===l||null===(n=l.tribeItem)||void 0===n?void 0:n.tribe)&&E.a.createElement(v.a,{mb:"tiny"},E.a.createElement(m.a,null,E.a.createElement(F.a,{tribe:l.tribeItem.tribe,inline:!0}),L&&E.a.createElement(S.p,{href:L.url,color:"gray_light",navStyle:"present"},E.a.createElement(p.Translate,null,"See parent question")))),E.a.createElement(f.c,{value:u,useTextArea:!0,noBorder:!0,autosize:!0,variant:"large",placeholder:Object(p.plaintextTranslate)("What is your question?"),onChange:function(e){var n;(n=e.target.value)===i?(d(n),x(!1)):(d(n),x(!0))},onKeyDown:function(e){e.keyCode===k.a.ENTER&&e.preventDefault()}}))),(null===l||void 0===l||null===(t=l.tribeItem)||void 0===t?void 0:t.tribe)&&L&&E.a.createElement(g.a,{mt:"small",variant:"muted",title:E.a.createElement(p.Translate,null,"This question text is linked to"," ",E.a.createElement(S.p,{href:L.url,navStyle:"present"},"a parent question")," ","that shows the best answers across Quora. Editing this will unlink from the parent question and hide answers from this Space on the parent question.")}))};x.displayName="QuestionEditorModal",x.queries={onLoad:void 0!==K?K:K=a};n["default"]=x},YKuC:function(e,n,t){"use strict";var a={};t.r(a),t.d(a,"default",(function(){return v}));var l=t("QILm"),i=t.n(l),r=t("lwsE"),s=t.n(r),o=t("W8MJ"),u=t.n(o),d=t("7W2i"),c=t.n(d),m=t("a1gu"),p=t.n(m),g=t("Nsbk"),f=t.n(g),y=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null};return{kind:"Fragment",name:"AnswerEditorHeader_question",type:"Question",metadata:null,argumentDefinitions:[],selections:[e,n,{kind:"ScalarField",alias:null,name:"qid",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"viewerDisplayCredential",storageKey:null,args:null,concreteType:null,plural:!1,selections:[e,n,{kind:"FragmentSpread",name:"EditorHeader_credential",args:null}]},{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[e,n,{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"businessProfiles",storageKey:"businessProfiles(acceptedOnly:true,currentNetworkMembersOnly:true,paidSubscribersOnly:true)",args:[{kind:"Literal",name:"acceptedOnly",value:!0},{kind:"Literal",name:"currentNetworkMembersOnly",value:!0},{kind:"Literal",name:"paidSubscribersOnly",value:!0}],concreteType:"BusinessProfile",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isBusiness",args:null,storageKey:null}]},{kind:"FragmentSpread",name:"EditorHeader_viewer",args:null}]},{kind:"LinkedField",alias:null,name:"tribeItem",storageKey:null,args:null,concreteType:null,plural:!1,selections:[e]}]}}();y.hash="2d8bc4f2f98234d67d9bc5a6023dc877";var b,v=y,h=t("ttvG"),k=t("U3fp"),S=t("jufJ"),F=t("jQ0q"),_=t("QLaP"),T=t.n(_),w=t("SW3P"),E=t("VyO/"),C=t("q1tI"),K=t.n(C),O=t("UDrg");function A(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=f()(e);if(n){var l=f()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return p()(this,t)}}var x=function(e){c()(t,e);var n=A(t);function t(){var e;s()(this,t);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return(e=n.call.apply(n,[this].concat(l))).allowEditBusinessCredentials=function(){var n,t,a,l,i,r,s=null===(n=e.props.question)||void 0===n?void 0:n.viewer,o=Boolean(null===(t=e.props)||void 0===t||null===(a=t.question)||void 0===a?void 0:a.tribeItem),u=null!==(l=null===s||void 0===s||null===(i=s.user)||void 0===i?void 0:i.isBusiness)&&void 0!==l&&l;return Object(w.a)("enable_business_services")&&!o&&Boolean(null===s||void 0===s||null===(r=s.businessProfiles)||void 0===r?void 0:r.length)&&!u},e}return u()(t,[{key:"render",value:function(){var e=this.props,n=e.question,t=e.isAnswerEdit,a=void 0!==t&&t,l=e.businessUid,r=e.businessCredential,s=e.handleEditBusinessCredential,o=e.editCredentialHint,u=i()(e,["question","isAnswerEdit","businessUid","businessCredential","handleEditBusinessCredential","editCredentialHint"]),d=n.id,c=n.qid,m=n.viewer,p=n.viewerDisplayCredential,g=m.uid;T()(g,"AnswerEditorHeader currently only works for logged in viewers.");var f=this.allowEditBusinessCredentials(),y=a?undefined:K.a.createElement(S.Translate,null,"Edit credential or profile here");return K.a.createElement(F.a,{modalFlowProps:{initialModalProps:{name:"EditCredentials",queryVariables:{uid:g,choose:!0,nodeId:d}},initialFlowData:{chooseCredentialContentType:O.a.question,chooseCredentialOid:c},transitionName:"editCredentialsTransition"}},(function(e){var n=e.openModalFlow;return K.a.createElement(h["default"],{businessProfileUid:l,handleEditCredentials:function(e){if(e){var t=e.useBusinessCredentialFlow,a=e.businessUid,l=e.businessCredential,i=e.businessName,r=e.businessLogoUrl;t?null===s||void 0===s||s({businessUid:null!==a&&void 0!==a?a:null,businessCredential:null!==l&&void 0!==l?l:null,businessName:null!==i&&void 0!==i?i:null,businessLogoUrl:null!==r&&void 0!==r?r:null}):(p&&(null===s||void 0===s||s({businessUid:null,businessCredential:null,businessName:null,businessLogoUrl:null})),n())}}},(function(e){var t=e.openModalFlow;return K.a.createElement(k.a,Object.assign({openModal:function(){f?t():n()},credential:p,businessCredential:r,viewer:m,editCredentialHint:f?null!==o&&void 0!==o?o:y:undefined},u))}))}))}}]),t}(K.a.Component);x.fragments={question:void 0!==b?b:b=a},x.displayName="AnswerEditorHeader";n.a=Object(E.b)(x)},"ZMf+":function(e,n,t){"use strict";t.r(n);var a={};t.r(a),t.d(a,"default",(function(){return w}));var l={};t.r(l),t.d(l,"default",(function(){return C}));var i={};t.r(i),t.d(i,"default",(function(){return A}));var r={};t.r(r),t.d(r,"default",(function(){return I}));var s={};t.r(s),t.d(s,"default",(function(){return ae}));var o={};t.r(o),t.d(o,"default",(function(){return ie}));var u={};t.r(u),t.d(u,"default",(function(){return de}));var d={};t.r(d),t.d(d,"default",(function(){return Be}));var c={};t.r(c),t.d(c,"default",(function(){return Ve}));var m=t("lSNA"),p=t.n(m),g=t("lwsE"),f=t.n(g),y=t("W8MJ"),b=t.n(y),v=t("7W2i"),h=t.n(v),k=t("a1gu"),S=t.n(k),F=t("Nsbk"),_=t.n(F),T=function(){var e=[{kind:"LocalArgument",name:"tribeId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"pid",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"isPostEdit",type:"Boolean!",defaultValue:null}],n=[{kind:"Variable",name:"tribeId",variableName:"tribeId"}],t={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"viewerContentTypesCanAddInTribe",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"viewerCanContribute",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"viewerCanCreateContentQueueItem",args:null,storageKey:null},o={kind:"ScalarField",alias:null,name:"viewerHasSentFollowInvites",args:null,storageKey:null},u={kind:"ScalarField",alias:null,name:"submissionReviewPeriod",args:null,storageKey:null},d={name:"PaidSubscriptionEnabledForProducer",value:"true"},c={kind:"ScalarField",alias:null,name:"isFollowing",args:null,storageKey:null},m={kind:"ScalarField",alias:null,name:"viewerCanAdmin",args:null,storageKey:null},p={kind:"ScalarField",alias:null,name:"viewerCanModerate",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"producerBundleStatus",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"producerDirectStatus",args:null,storageKey:null},y={kind:"LinkedField",alias:null,name:"network",storageKey:null,args:null,concreteType:"Network",plural:!1,selections:[t,a,{kind:"ScalarField",alias:null,name:"contentLanguageCode",args:null,storageKey:null}]},b={kind:"ScalarField",alias:"questionTitleMaxLength",name:"integerFeature",args:[{kind:"Literal",name:"name",value:"QuestionTitleMaxLength"}],storageKey:'integerFeature(name:"QuestionTitleMaxLength")'},v={kind:"ScalarField",alias:"postTitleMaxLength",name:"integerFeature",args:[{kind:"Literal",name:"name",value:"QuoraShareAndPostTitleMaxLength"}],storageKey:'integerFeature(name:"QuoraShareAndPostTitleMaxLength")'},h=[{kind:"Variable",name:"pid",variableName:"pid"}],k={kind:"ScalarField",alias:null,name:"pid",args:null,storageKey:null},S={kind:"ScalarField",alias:null,name:"title",args:null,storageKey:null},F={kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},_=[a,t,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}];return{kind:"Request",fragment:{kind:"Fragment",name:"UniversalComposerModalQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:n,concreteType:"Tribe",plural:!1,selections:[t,a,l,i,r,s,o,{kind:"LinkedField",alias:null,name:"settings",storageKey:null,args:null,concreteType:"TribeSettings",plural:!1,selections:[u]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:d,condition:"onFeature",selections:[c,m,p,g,f,{kind:"FragmentSpread",name:"ContentMonetizationDisclaimerPrompt_tribe",args:null}]},{kind:"FragmentSpread",name:"UniversalComposerModalWrapper_tribe",args:null},{kind:"FragmentSpread",name:"TribeNameWithIcon_tribe",args:null},{kind:"FragmentSpread",name:"TribeName_tribe",args:null},{kind:"FragmentSpread",name:"PostComposerEditor_tribe",args:null}]},y,{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[b,v,{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[{kind:"FragmentSpread",name:"ComposerHeader_user",args:null}]},{kind:"FragmentSpread",name:"UniversalComposerNuxBanner_viewer",args:null}]},{kind:"Condition",isCustom:!1,customValue:null,passingValue:!0,condition:"isPostEdit",selections:[{kind:"LinkedField",alias:null,name:"post",storageKey:null,args:h,concreteType:"Post",plural:!1,selections:[k,S,F]}]}]},operation:{kind:"Operation",name:"UniversalComposerModalQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:n,concreteType:"Tribe",plural:!1,selections:[t,a,l,i,r,s,o,{kind:"LinkedField",alias:null,name:"settings",storageKey:null,args:null,concreteType:"TribeSettings",plural:!1,selections:[u,t]},{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"nameString",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null},c,{kind:"ScalarField",alias:null,name:"iconUrl",args:[{kind:"Literal",name:"size",value:100}],storageKey:"iconUrl(size:100)"},{kind:"ScalarField",alias:"iconRetinaUrl",name:"iconUrl",args:[{kind:"Literal",name:"size",value:200}],storageKey:"iconUrl(size:200)"},{kind:"LinkedField",alias:null,name:"viewerPostDraft",storageKey:null,args:null,concreteType:"PostDraft",plural:!1,selections:[t,a,S,F,{kind:"ScalarField",alias:null,name:"saveTime",args:null,storageKey:null}]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:d,condition:"onFeature",selections:[c,m,p,g,f]}]},y,{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[b,v,{kind:"ScalarField",alias:null,name:"hasSeenComposerTooltip",args:[{kind:"Literal",name:"tooltipType",value:1}],storageKey:"hasSeenComposerTooltip(tooltipType:1)"},{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[t,{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},a,{kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:_},{kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:_},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]}]},t]},{kind:"Condition",passingValue:!0,isCustom:!1,customValue:null,condition:"isPostEdit",selections:[{kind:"LinkedField",alias:null,name:"post",storageKey:null,args:h,concreteType:"Post",plural:!1,selections:[k,S,F,t]}]}]},params:{operationKind:"query",name:"UniversalComposerModalQuery",id:"5c198782b60e35d0883d75241d4f393f74608612fee5400b80eb3406da684c9b",text:null,metadata:{}}}}();T.hash="d69dfb787a8f2be0861219fca247b27c";var w=T,E=function(){var e=[{kind:"LocalArgument",name:"tribeId",type:"BigInt!",defaultValue:null}],n=[{kind:"Variable",name:"tribeId",variableName:"tribeId"}],t=[{kind:"Literal",name:"name",value:"ContentStep"}],a={kind:"ScalarField",alias:null,name:"shouldShow",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"UniversalComposerModalTribeNuxAddContentQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:n,concreteType:"Tribe",plural:!1,selections:[{kind:"LinkedField",alias:"addContent",name:"tribeNuxStep",storageKey:'tribeNuxStep(name:"ContentStep")',args:t,concreteType:"TribeNuxStep",plural:!1,selections:[a]}]}]},operation:{kind:"Operation",name:"UniversalComposerModalTribeNuxAddContentQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:n,concreteType:"Tribe",plural:!1,selections:[{kind:"LinkedField",alias:"addContent",name:"tribeNuxStep",storageKey:'tribeNuxStep(name:"ContentStep")',args:t,concreteType:"TribeNuxStep",plural:!1,selections:[a,l]},l]}]},params:{operationKind:"query",name:"UniversalComposerModalTribeNuxAddContentQuery",id:"67bd715657856220e7514446a2a1550a709d3374b39bee670f15290bd7067698",text:null,metadata:{}}}}();E.hash="0a46ed7177c7aebf05ed4ba221e83c8d";var C=E,K=function(){var e=[{kind:"LocalArgument",name:"tribeId",type:"BigInt!",defaultValue:null}],n=[{kind:"Variable",name:"tribeId",variableName:"tribeId"}],t={kind:"ScalarField",alias:null,name:"viewerShouldShowSubmissionPendingBanner",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"numViewerPendingSubmissionsInTribe",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"numViewerSubmissionsInTribe",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"tabType",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"hasBadge",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},o={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"UniversalComposerModalSubmissionQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:n,concreteType:"Tribe",plural:!1,selections:[t,a,l,{kind:"LinkedField",alias:null,name:"pageTabs",storageKey:null,args:null,concreteType:"PageTab",plural:!0,selections:[i,r,s]}]}]},operation:{kind:"Operation",name:"UniversalComposerModalSubmissionQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:n,concreteType:"Tribe",plural:!1,selections:[t,a,l,{kind:"LinkedField",alias:null,name:"pageTabs",storageKey:null,args:null,concreteType:"PageTab",plural:!0,selections:[i,r,s,o]},o]}]},params:{operationKind:"query",name:"UniversalComposerModalSubmissionQuery",id:"6aee189fd7378611f3a0c3d2a78214d93567c4d2111894d6d419ba0125dafe37",text:null,metadata:{}}}}();K.hash="cf26f3f95716a707797dca67c2f15b41";var O,A=K,x=t("JxlA"),M=t("lkOG"),R=t("68Yv"),q={kind:"Fragment",name:"ContentMonetizationDisclaimerPrompt_tribe",type:"Tribe",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null}],hash:"8d953a43eff004bf6b256d90ec3aa3a9"},I=q,L=t("jufJ"),P=t("zLpq"),D=t("OMLc"),j=t("Iu3b"),N=t("VyO/"),B=t("q1tI"),Q=t.n(B),V=function(e){var n=e.tribe;return Q.a.createElement(j.a,null,(function(e){var t=e.openStandaloneModal;return Q.a.createElement(P.a,{tooltipPlacement:"bottom",tooltipText:Q.a.createElement(L.ForceEnglishForCopyDrafting,null,"Monetization and access"),icon:Q.a.createElement(D.b,{size:20,name:"Money"}),onClick:function(){return t({modalProps:{name:"ContentMonetizationDisclaimerModal",queryVariables:{tribeId:n.tribeId},extraProps:{contentType:"Post"}},containerProps:{easyDismissEnabled:!0}})}})}))};V.displayName="ContentMonetizationDisclaimerPrompt",V.fragments={tribe:void 0!==O?O:O=r};var U=Object(N.b)(V),z=t("QK84"),W=t("7r18"),H=t("4oNN"),J=t("AFGi"),G=t("LJFN"),Y=t("LNH1"),Z=t("VKzv"),X=t("VwdU"),$=t("RA+f"),ee=t("RIqP"),ne=t.n(ee),te=function(){var e=[{kind:"LocalArgument",name:"tribeId",type:"BigInt!",defaultValue:null}],n={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},a=[{kind:"LinkedField",alias:null,name:"postDraftClear",storageKey:null,args:[{kind:"Variable",name:"tribeId",variableName:"tribeId"}],concreteType:"PostDraftClear",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[n,t,{kind:"LinkedField",alias:null,name:"viewerPostDraft",storageKey:null,args:null,concreteType:"PostDraft",plural:!1,selections:[n,t,{kind:"ScalarField",alias:null,name:"title",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null}]}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"PostComposerEditor_postDraftClear_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:a},operation:{kind:"Operation",name:"PostComposerEditor_postDraftClear_Mutation",argumentDefinitions:e,selections:a},params:{operationKind:"mutation",name:"PostComposerEditor_postDraftClear_Mutation",id:"9103dc4f89dd768a3414f36c24c3079b45a3c5ec7efe35def7d6c71b0f4c384d",text:null,metadata:{}}}}();te.hash="ef7768a660b93766416a4b02d609c607";var ae=te,le=function(){var e=[{kind:"LocalArgument",name:"tribeId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"title",type:"JSONString!",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null},{kind:"LocalArgument",name:"isAutoSaved",type:"Boolean",defaultValue:null},{kind:"LocalArgument",name:"draftId",type:"BigInt",defaultValue:null}],n={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},a=[{kind:"LinkedField",alias:null,name:"postDraftSave",storageKey:null,args:[{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"draftId",variableName:"draftId"},{kind:"Variable",name:"isAutoSaved",variableName:"isAutoSaved"},{kind:"Variable",name:"title",variableName:"title"},{kind:"Variable",name:"tribeId",variableName:"tribeId"}],concreteType:"PostDraftSave",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[n,t,{kind:"LinkedField",alias:null,name:"viewerPostDraft",storageKey:null,args:null,concreteType:"PostDraft",plural:!1,selections:[n,t,{kind:"ScalarField",alias:null,name:"title",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null}]}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"PostComposerEditor_postDraftSave_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:a},operation:{kind:"Operation",name:"PostComposerEditor_postDraftSave_Mutation",argumentDefinitions:e,selections:a},params:{operationKind:"mutation",name:"PostComposerEditor_postDraftSave_Mutation",id:"d42573c412c41c7ea72aa0ae1487e9495ad342b57246bf64133d6458552f6a9c",text:null,metadata:{}}}}();le.hash="16eefb7ea02e60ca786bcb7acf16c98a";var ie=le,re=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null};return{kind:"Fragment",name:"PostComposerEditor_tribe",type:"Tribe",metadata:null,argumentDefinitions:[],selections:[e,n,{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"viewerPostDraft",storageKey:null,args:null,concreteType:"PostDraft",plural:!1,selections:[e,n,{kind:"ScalarField",alias:null,name:"title",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"saveTime",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"viewerCanContribute",args:null,storageKey:null},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"PaidSubscriptionEnabledForProducer",value:"true"},condition:"onFeature",selections:[{kind:"FragmentSpread",name:"ContentMonetizationDisclaimerButtonWrapper_tribe",args:null}]}]}}();re.hash="4431805d74c4cdf9d03ca325fa2ed1c0";var se,oe,ue,de=re,ce=t("qU4x"),me=t("EreF"),pe=t("SKAY"),ge=t("8lmh"),fe=t("yju1"),ye=t("nwxp"),be=t("sEfC"),ve=t.n(be),he=t("4Xda"),ke=t("ui+i");function Se(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=_()(e);if(n){var l=_()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return S()(this,t)}}var Fe=ve()((function(e){var n=e.title,t=e.content;return(0,e.saveDraft)(n,t,!0)}),750,{maxWait:1e4,leading:!0}),_e=function(e){h()(t,e);var n=Se(t);function t(e){var a;f()(this,t),(a=n.call(this,e)).editorRef=void 0,a.shouldSaveOnClose=void 0,a.bodyPlaceholder=void 0,a.componentMounted=!1,a.updateSubmitButton=function(e){a.props.toggleCanSubmit(!e)},a.updatePhotoSelectorPreviewVisibility=function(e){Object(ye.g)()&&Object(fe.a)("setPhotoSelectorPreviewVisibility",{visible:e})},a.editorRef=Q.a.createRef();var l=a.getCurrentDraft();a.state={content:l,hyperlinkUrl:"",isDraftSaving:!1},a.shouldSaveOnClose=!0;var i=a.props.bodyPlaceholder;return a.bodyPlaceholder=i||Object(L.plaintextTranslate)("Say something..."),a}return b()(t,[{key:"componentDidMount",value:function(){this.setupEditor(),this.componentMounted=!0}},{key:"setupEditor",value:function(){Object(ye.g)()&&Object(fe.a)("setupEditor",{hasDraft:!1})}},{key:"getQTextContent",value:function(){return this.editorRef.current?this.editorRef.current.save():this.state.content}},{key:"clearDraft",value:function(){var e,n=this.props.tribe;var a=n.id,l=n.__typename,i=n.viewerPostDraft;if(i){null===(e=this.editorRef.current)||void 0===e||e.clearState();var r=i.id,s=i.__typename;Object(N.c)({mutation:t.mutations.clearDraft,variables:{tribeId:n.tribeId},optimisticResponse:{postDraftClear:{tribe:{id:a,__typename:l,viewerPostDraft:{id:r,__typename:s,title:null,content:null}}}}}),this.shouldSaveOnClose=!1}else Object(ge.logJsError)("PostComposerEditor","Invalid viewerPostDraft: ".concat(i))}},{key:"getSerializedQTextTitle",value:function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0];if(e){var n,t=this.getQTextContent(),a=null===t||void 0===t||null===(n=t.sections)||void 0===n?void 0:n[0];if("heading"===a.type)return JSON.stringify({sections:[a]})}return JSON.stringify(Object(J.w)(""))}},{key:"getSerializedQTextContent",value:function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0];if(e){var n,t=this.getQTextContent(),a=null===t||void 0===t||null===(n=t.sections)||void 0===n?void 0:n[0];if("heading"===a.type){var l=t.sections.slice(1);return JSON.stringify({sections:l})}}return JSON.stringify(this.getQTextContent())}},{key:"getCurrentDraft",value:function(){var e=this.props,n=e.tribe,t=e.post,a=e.isPostEdit,l=e.shareData,i=n.viewerPostDraft,r=Object(J.h)(),s=Object(J.h)(),o=a?null===t||void 0===t?void 0:t.title:null===i||void 0===i?void 0:i.title,u=a?null===t||void 0===t?void 0:t.content:null===i||void 0===i?void 0:i.content;return o&&(r=JSON.parse(o)),u&&(s=JSON.parse(u)),s=a?Object(ke.a)(r,s):s,null!==l&&void 0!==l&&l.shareText&&(s=function(e,n){var t=Object(J.w)(n);return{sections:[].concat(ne()(e.sections),ne()(t.sections))}}(s,l.shareText)),s}},{key:"appendSharedImages",value:function(){var e=this.props.shareData;null!==e&&void 0!==e&&e.shareImages&&Object(pe.handleMessage)("nativeShareImages",e)}},{key:"getStartingBody",value:function(){return this.state.content||Object(J.h)()}},{key:"isDirty",value:function(){var e,n;return null!==(e=null===(n=this.editorRef.current)||void 0===n?void 0:n.isDirty())&&void 0!==e&&e}},{key:"onSubmit",value:function(){this.shouldSaveOnClose=!1}},{key:"renderQTextEditor",value:function(e){var n=this;return Q.a.createElement(he.a.Consumer,null,(function(t){return Q.a.createElement(me.a,{placeholder:n.bodyPlaceholder,content:n.getStartingBody(),settingOverrides:{imageRemoveButtonEnabled:!0,qtext_hyperlink_embed:!0,lightWeightContentToolbar:Object(G.d)(),h1ButtonEnabled:Object(G.d)(),isDarkModeOn:t.isDarkModeOn,eagerImageUploading:!0,minHeight:Object(ye.e)()?"50vh":"260px"},ref:n.editorRef,isToolbarBottom:!Object(ye.f)(),editorPaddingReset:!0,onMeaningfulChange:function(e){var t=Object(J.t)(n.getSerializedQTextContent());(t.endsWith("?")||t.endsWith(Object(L.plaintextTranslate)("?")))&&n.props.onQuestionMarkTyped(),n.updateSubmitButton(e.isOnlyWhiteSpace()),n.updatePhotoSelectorPreviewVisibility(e.isEmpty()),n.props.shouldAutosaveDraft&&n.saveDraft()},onEditorSetup:function(e){n.updateSubmitButton(e.isOnlyWhiteSpace()),setTimeout((function(){n.updatePhotoSelectorPreviewVisibility(e.isEmpty())}),200),setTimeout((function(){n.appendSharedImages()}),500)},editorKey:"post-".concat(n.props.tribe.tribeId),onImageUploadStatusChange:n.props.onImageUploadStatusChange,stickyButtonInfo:e})}))}},{key:"focusEditor",value:function(){this.editorRef.current.focusEditor()}},{key:"render",value:function(){var e=this,n=this.props,t=n.tribe,a=n.shouldShowContentMonetizationDisclaimer;return Q.a.createElement(Q.a.Fragment,null,a?Q.a.createElement(ce.a,{tribe:t},(function(n){var t=n.stickyButtonInfo;return e.renderQTextEditor(t)})):this.renderQTextEditor())}},{key:"componentWillUnmount",value:function(){this.shouldSaveOnClose&&this.saveDraft(),this.updatePhotoSelectorPreviewVisibility(!1),this.componentMounted=!1}},{key:"saveDraft",value:function(){var e=this,n=this.props,a=n.tribe,l=n.isPostEdit,i=this.getSerializedQTextTitle(),r=this.getSerializedQTextContent(),s=a.id,o=a.__typename,u=a.viewerPostDraft;if(u){var d=u.id,c=u.__typename;if(!l){Fe({title:i,content:r,saveDraft:function(n,l){if(!e.state.isDraftSaving&&e.componentMounted){e.setState({isDraftSaving:!0});var i=function(){e.componentMounted&&e.setState({isDraftSaving:!1})};Object(N.c)({mutation:t.mutations.saveDraft,variables:{tribeId:a.tribeId,title:n,content:l,isAutoSaved:!0},optimisticResponse:{postDraftSave:{tribe:{id:s,__typename:o,viewerPostDraft:{id:d,__typename:c,title:n,content:l}}}},onCompleted:i,onError:i})}}})}}else Object(ge.logJsError)("PostComposerEditor","Invalid viewerPostDraft: ".concat(u))}}]),t}(Q.a.Component);_e.fragments={tribe:void 0!==se?se:se=u},_e.mutations={saveDraft:void 0!==oe?oe:oe=o,clearDraft:void 0!==ue?ue:ue=s},_e.displayName="PostComposerEditor";var Te=Object(N.b)(_e),we=t("LsdO");function Ee(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=_()(e);if(n){var l=_()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return S()(this,t)}}var Ce=function(e){h()(t,e);var n=Ee(t);function t(e){var a;return f()(this,t),(a=n.call(this,e)).questionSelectorRef=void 0,a.questionSelectorRef=Q.a.createRef(),a}return b()(t,[{key:"render",value:function(){var e=this;return Q.a.createElement(Q.a.Fragment,null,Q.a.createElement(we.a,{handleInputChange:function(n){e.props.handleInputChange&&e.props.handleInputChange(n)},initialInput:this.props.initialInput,requestTarget:undefined,inputPlaceholder:Object(L.plaintextTranslate)("What is your question?"),showDuplicateQuestions:!1,useTextArea:!0,borderBottom:this.props.borderBottom,ref:this.questionSelectorRef,user:null,tribe:null,withCharLimit:!1}))}}]),t}(Q.a.Component);Ce.defaultProps={initialInput:""},Ce.displayName="QuestionComposerEditor";var Ke=t("PuWf"),Oe=t("QLaP"),Ae=t.n(Oe),xe=t("AaDK"),Me=t("UDrg"),Re=t("Nka6"),qe=t("gDf8"),Ie=t("6pmM"),Le=t("C7EE"),Pe=t("LrWd"),De=function(){var e={kind:"ScalarField",alias:null,name:"hasSeenComposerTooltip",args:[{kind:"Literal",name:"tooltipType",value:1}],storageKey:"hasSeenComposerTooltip(tooltipType:1)"};return{kind:"Request",fragment:{kind:"Fragment",name:"UniversalComposerNuxBanner_markComposerTooltipAsSeen_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"markComposerTooltipAsSeen",storageKey:null,args:null,concreteType:"MarkComposerTooltipAsSeen",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[e]}]}]},operation:{kind:"Operation",name:"UniversalComposerNuxBanner_markComposerTooltipAsSeen_Mutation",argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"markComposerTooltipAsSeen",storageKey:null,args:null,concreteType:"MarkComposerTooltipAsSeen",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[e,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]}]},params:{operationKind:"mutation",name:"UniversalComposerNuxBanner_markComposerTooltipAsSeen_Mutation",id:"ed7f65bb1c4ecffacd11cee1d150200d8478d315d480e0518c964666b546fe85",text:null,metadata:{}}}}();De.hash="98373dc2f23cd4cd3517d1f7c470085b";var je,Ne,Be=De,Qe={kind:"Fragment",name:"UniversalComposerNuxBanner_viewer",type:"Viewer",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"hasSeenComposerTooltip",args:[{kind:"Literal",name:"tooltipType",value:1}],storageKey:"hasSeenComposerTooltip(tooltipType:1)"}],hash:"1f8d0dfe238130b507bd4355aa16078e"},Ve=Qe,Ue=t("6sb5"),ze=t("Yc5t"),We=t("cbxS");function He(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=_()(e);if(n){var l=_()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return S()(this,t)}}var Je=function(e){h()(t,e);var n=He(t);function t(e){var a;return f()(this,t),(a=n.call(this,e)).state={hasClosedNuxBanner:!1},a}return b()(t,[{key:"shouldComponentUpdate",value:function(e,n){return this.state.hasClosedNuxBanner!==n.hasClosedNuxBanner}},{key:"render",value:function(){var e=this;return!this.props.viewer.hasSeenComposerTooltip&&!this.state.hasClosedNuxBanner&&Q.a.createElement(ze.a,{ratioThreshold:1,minTimeInViewMs:1e3,onImpression:function(){Object(N.c)({mutation:t.mutations.markComposerTooltipAsSeen})}},Q.a.createElement($.q,null,Q.a.createElement($.a,{right:"small",top:"small",zIndex:"popover"},Q.a.createElement($.f,{onClick:function(n){n.preventDefault(),e.setState({hasClosedNuxBanner:!0}),e.props.onClose()},hover:{bg:"darken"},borderRadius:"circle"},Q.a.createElement(D.b,{color:"gray",name:"SmallClose"}))),Q.a.createElement(We.a,{dismissable:!1,mb:"large",p:"medium",variant:"muted"},Q.a.createElement("ul",null,Q.a.createElement("li",null,Q.a.createElement(Ue.a,null),Q.a.createElement(L.Translate,null,Q.a.createElement($.s,{as:"span",fontSize:"small"},"To add a link, paste the URL directly into your post."))),Q.a.createElement("li",null,Q.a.createElement(Ue.a,null),Q.a.createElement(L.Translate,null,Q.a.createElement($.s,{as:"span",fontSize:"small"},"To add a title (",Q.a.createElement(L.UserGeneratedJSX,null,Q.a.createElement(D.b,{size:16,name:"H1Font"})),"), create a list, access more formatting options, tap"," ",Q.a.createElement(L.UserGeneratedJSX,null,Q.a.createElement(D.b,{size:20,verticalAlign:"bottom",name:"EditorTextFormatting"})),".")))))))}}]),t}(Q.a.Component);Je.fragments={viewer:void 0!==je?je:je=c},Je.mutations={markComposerTooltipAsSeen:void 0!==Ne?Ne:Ne=d},Je.displayName="UniversalComposerNuxBanner";var Ge,Ye,Ze,Xe=Object(N.b)(Je);function $e(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=_()(e);if(n){var l=_()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return S()(this,t)}}var en=function(){return Object(ye.b)()?"web":Object(ye.a)()?"android":Object(ye.c)()?"iphone":Object(ye.f)()?"mweb":"device_unknown"},nn=void 0!==Ge?Ge:Ge=i,tn=void 0!==Ye?Ye:Ye=l,an=function(e){h()(t,e);var n=$e(t);function t(e){var a,l,i,r;return f()(this,t),(r=n.call(this,e)).postEditorRef=void 0,r.questionEditorRef=void 0,r.handleImageUploadStatusChange=function(e){r.setState({imageUploadStatus:e})},r.handleToggleCanSubmit=function(e){e!==r.state.canSubmitPost&&r.setState({canSubmitPost:e})},r.getAskQuestionButtonProps=function(e){var n=e.setToast,t=r.props,a=t.dismissModalFlow,l=t.queryResult.tribe;Object(ge.tempFailureInvariant)(l,"tribe is ".concat(l));var i=l.viewerCanCreateContentQueueItem,s=l.viewerCanContribute,o=r.state,u=o.isSubmitting,d=o.canSubmitQuestion,c=o.imageUploadStatus,m=s?Q.a.createElement(L.Translate,{context:L.partOfSpeech.verb},"Ask"):Q.a.createElement(L.Translate,{context:L.partOfSpeech.verb},"Submit"),p=null;p=i?{leftText:m,leftOnClick:function(){r.state.isSubmitting||r.setState({isSubmitting:!0},(function(){r.submitQuestion(a,n,r.state.shouldQueue)}))},rightIcon:Q.a.createElement(D.b,{name:"ChevronDown"}),forceRightIconSize:16,isSplitButton:!0,rightPartHasPopoverMenu:!0,overflowMenuItems:r.renderOverflowMenuItems(n)}:{text:m,onClick:function(){r.state.isSubmitting||r.setState({isSubmitting:!0},(function(){r.submitQuestion(a,n,r.state.shouldQueue)}))}};var g=c===G.b.uploading||!d;return Object.assign({},p,{disabled:u||g})},r.getPostTabButtonProps=function(e){var n,t=r.state,a=t.canSubmitPost,l=t.imageUploadStatus,i=r.props,s=i.extraProps,o=i.flowData,u=i.triggerTransition,d=!a||l===G.b.uploading,c=Object.assign({},e,{disabled:e.disabled||d});return s.canMonetize&&!s.isPostEdit?{text:Object(L.plaintextForceEnglishForCopyDrafting)("Next"),onClick:function(){var e,n,t;o.serializedQTextTitle=null===(e=r.postEditorRef.current)||void 0===e?void 0:e.getSerializedQTextTitle(!0),o.serializedQTextContent=null===(n=r.postEditorRef.current)||void 0===n?void 0:n.getSerializedQTextContent(!0),null===(t=r.postEditorRef.current)||void 0===t||t.onSubmit(),u()},disabled:d}:e.isSplitButton?Object.assign({},c,{leftOnClick:function(){var n,t,a;return null===(n=e.leftOnClick)||void 0===n?void 0:n.call(e,{content:null===(t=r.postEditorRef.current)||void 0===t?void 0:t.getSerializedQTextContent(!0),title:null===(a=r.postEditorRef.current)||void 0===a?void 0:a.getSerializedQTextTitle(!0)})},overflowMenuItems:null===(n=e.getOverflowMenuItems)||void 0===n?void 0:n.call(e,(function(){var e;return null===(e=r.postEditorRef.current)||void 0===e?void 0:e.getSerializedQTextTitle(!0)}),(function(){var e;return null===(e=r.postEditorRef.current)||void 0===e?void 0:e.getSerializedQTextContent(!0)}))}):Object.assign({},c,{onClick:function(){var n,t,a;return null===(n=e.onClick)||void 0===n?void 0:n.call(e,{content:null===(t=r.postEditorRef.current)||void 0===t?void 0:t.getSerializedQTextContent(!0),title:null===(a=r.postEditorRef.current)||void 0===a?void 0:a.getSerializedQTextTitle(!0)})}})},r.getPrimaryButtonProps=function(e){var n=e.setToast,t=e.postButtonProps,a=r.state.activeTabName,l={useHaptics:!0};return a===Le.a.Post?Object.assign({},r.getPostTabButtonProps(t),l):a===Le.a.Question?Object.assign({},r.getAskQuestionButtonProps({setToast:n}),l):null},r.blockActionIfImageIsUploading=function(e,n){return function(){r.state.imageUploadStatus===G.b.uploading?n(Object(L.plaintextTranslate)("Your images are still uploading. Please wait and try again soon."),Y.d.error):e()}},r.renderOverflowMenuItems=function(e){var n=r.props.dismissModalFlow,t=[];return t.push({label:Object(L.plaintextTranslate)("Add to queue"),onSelected:function(){r.setState((function(e){return{shouldQueue:!e.shouldQueue}})),r.submitQuestion(n,e,!0)},isCheckable:!0,closeOnClick:!0,isOn:r.state.shouldQueue}),t},r.postEditorRef=Q.a.createRef(),r.questionEditorRef=Q.a.createRef(),r.state={activeTabName:r.getInitialContentTypeTab(),showQuestionTooltip:!1,isSubmitting:!1,canSubmitPost:!1,canSubmitQuestion:!1,imageUploadStatus:G.b.ready,hasCopiedPostInputToQuestionInput:!1,hasClosedNuxBanner:!1,questionInput:null!==(a=null===(l=r.props.extraProps)||void 0===l?void 0:l.initialQuestionInput)&&void 0!==a?a:"",shouldQueue:!1,shareData:null===(i=r.props.extraProps)||void 0===i?void 0:i.shareData},r}return b()(t,[{key:"maybeShowQuestionTooltip",value:function(){var e,n,t,a=this;if(!(null!==(e=this.props.extraProps)&&void 0!==e&&e.isPostEdit||null!==(n=this.props.extraProps)&&void 0!==n&&n.isDraftEdit)){var l=null===(t=this.postEditorRef.current)||void 0===t?void 0:t.getQTextContent(),i=Object(J.k)(l,"plain");Object(ye.b)()&&i&&!this.state.showQuestionTooltip&&!this.state.hasCopiedPostInputToQuestionInput&&(setTimeout((function(){a.setState({showQuestionTooltip:!0})}),300),Object(xe.a)("scribe_only",{scribe_category:"universal_composer_show_question_tooltip",log_viewer:!0,platform:en()}))}}},{key:"shouldAutosavePostDraft",value:function(){var e;return!(null!==(e=this.props.extraProps)&&void 0!==e&&e.isPostEdit)}},{key:"getInitialQuestionInput",value:function(){var e,n,t=null===(e=this.postEditorRef)||void 0===e||null===(n=e.current)||void 0===n?void 0:n.getSerializedQTextContent();return this.state.showQuestionTooltip&&!this.state.hasCopiedPostInputToQuestionInput&&t?Object(J.t)(t):this.state.questionInput}},{key:"renderBody",value:function(e){var n,t,a=this;if(null===(n=this.props.queryResult)||void 0===n||!n.tribe)return null;var l=this.props.queryResult,i=l.tribe,r=l.viewer,s=l.post,o=null===r||void 0===r?void 0:r.postTitleMaxLength,u=this.getInitialQuestionInput();return Q.a.createElement(Q.a.Fragment,null,this.shouldShowPostTab()&&e===Le.a.Post&&Q.a.createElement($.e,null,Q.a.createElement(Te,{ref:this.postEditorRef,titleCharLimit:o,titlePlaceholder:Object(L.plaintextTranslate)(Q.a.createElement(Q.a.Fragment,null,"Say something to ",Q.a.createElement(Ke.a,{tribe:i}),"...")),tribe:i,post:s||undefined,isPostEdit:null===(t=this.props.extraProps)||void 0===t?void 0:t.isPostEdit,onQuestionMarkTyped:function(){return a.maybeShowQuestionTooltip()},toggleCanSubmit:this.handleToggleCanSubmit,onImageUploadStatusChange:this.handleImageUploadStatusChange,shouldAutosaveDraft:this.shouldAutosavePostDraft(),shouldShowContentMonetizationDisclaimer:Object(ye.e)()&&!!Object(z.a)(i),shareData:this.state.shareData})),this.shouldShowQuestionTab()&&e===Le.a.Question&&Q.a.createElement($.e,null,Q.a.createElement(Ce,{ref:this.questionEditorRef,borderBottom:!1,initialInput:u,handleInputChange:function(e){a.setState({questionInput:e}),a.setState({canSubmitQuestion:e.length>0})}})))}},{key:"focusEditorInner",value:function(){var e;this.state.activeTabName!==Le.a.Post&&this.state.activeTabName!==Le.a.Question||(null===(e=this.postEditorRef.current)||void 0===e||e.focusEditor())}},{key:"focusEditor",value:function(e){var n=this;e!==undefined?setTimeout((function(){n.focusEditorInner()}),e):this.focusEditorInner()}},{key:"parseMutationResults",value:function(e,n){switch(n){case Me.a.post:var t,a,l,i,r=e.postAdd;if(!r)throw new Error("postAdd invalid: ".concat(r));var s=r.post,o=void 0===s?null:s,u=r.failureType,d=r.success,c=r.contentType,m=null===o||void 0===o||null===(t=o.tribeItem)||void 0===t?void 0:t.tribeItemId,p=(null===o||void 0===o||null===(a=o.tribeItem)||void 0===a||null===(l=a.tribe)||void 0===l?void 0:l.shouldPromptFollowerInviteModal)||!1,g=null!==(i=null===o||void 0===o?void 0:o.pid)&&void 0!==i?i:undefined;return{tribeItemId:m,success:null!==d&&void 0!==d&&d,isSubmission:Object(Re.a)(c)===Me.a.tribe_submission,failureType:u,shouldPromptFollowerInviteModal:p,oid:g};case Me.a.question:var f=e.questionCreate;if(!f)throw new Error("questionCreate invalid: ".concat(f));var y=f.failureType;if(y===M.a.shouldBeTribeSubmission)return{success:!0,tribeItemId:null,isSubmission:!0,failureType:y};if(y===M.a.shouldBeTribeContentQueueItem)return{success:!0,tribeItemId:null,isSubmission:!1,failureType:y};var b,v,h,k=f.question,S=f.success,F=(null===k||void 0===k||null===(b=k.tribeItem)||void 0===b||null===(v=b.tribe)||void 0===v?void 0:v.shouldPromptFollowerInviteModal)||!1;return{success:null!==S&&void 0!==S&&S,tribeItemId:null===k||void 0===k||null===(h=k.tribeItem)||void 0===h?void 0:h.tribeItemId,isSubmission:!1,failureType:y,shouldPromptFollowerInviteModal:F};default:Ae()(!1,"Unexpected content type ".concat(n))}throw new Error("unreachable")}},{key:"getSubmissionSuccessToastContent",value:function(){var e,n,t=this.props.queryResult;if(null===t||void 0===t||null===(e=t.tribe)||void 0===e||null===(n=e.settings)||void 0===n||!n.submissionReviewPeriod)return Object(L.plaintextTranslate)("Your submission was successful.");var a=t.tribe.settings.submissionReviewPeriod;return Object(L.plaintextTranslate)(Q.a.createElement(L.Translate,null,"Submission successful. The Space has"," ",Q.a.createElement(L.FormattedNumber,{value:a})," ",Q.a.createElement(L.PluralTranslate,{value:a},{ONE:"day to review.",OTHER:"days to review."})))}},{key:"getToastContent",value:function(e,n,t,a,l){var i;return n?a?this.getSubmissionSuccessToastContent():l?Object(L.plaintextTranslate)(Q.a.createElement(L.Translate,null,"Successfully added this",Q.a.createElement(L.EnumTranslate,{value:e},(i={},p()(i,Me.a.post," post "),p()(i,Me.a.question," question "),p()(i,Me.a.answer," answer "),p()(i,"DEFAULT"," "),i)),"to the queue.")):null:e===Me.a.question?Object(M.b)(n,t):e===Me.a.post?(Ae()(null!==t,"Failure type must be set when success is false"),Object(Le.c)(n,Object(qe.a)(t))):Object(L.plaintextTranslate)("You can't submit this content.")}},{key:"showToastAndMaybeDismissModal",value:function(e,n,t,a,l){var i=this.parseMutationResults(e,n),r=i.tribeItemId,s=i.success,o=i.isSubmission,u=void 0!==o&&o,d=i.failureType,c=i.shouldPromptFollowerInviteModal,m=void 0!==c&&c,p=i.oid,g=void 0===p?undefined:p,f=this.getToastContent(n,s,d,u,l);if(f&&a(f,s?Y.d.success:Y.d.error),s){var y,b,v,h,k,S,F=null===(y=this.props.queryResult)||void 0===y||null===(b=y.tribe)||void 0===b?void 0:b.tribeId;if(u&&F&&function(e){Object(N.e)({query:nn,variables:{tribeId:e},fetchPolicy:"network-only"})}(F),n===Me.a.post)null===(k=this.postEditorRef.current)||void 0===k||k.onSubmit(),null===(S=this.postEditorRef.current)||void 0===S||S.clearDraft();var _=m&&!this.state.shouldQueue&&!(null!==(v=this.props.queryResult)&&void 0!==v&&null!==(h=v.tribe)&&void 0!==h&&h.viewerHasSentFollowInvites),T=l?Le.b.Queue:n===Me.a.post?Le.b.Post:Le.b.Question;t({reason:"submit_success",tribeItemId:null!==r&&void 0!==r?r:undefined,showInviteModal:_,submitType:T,toastContent:f,oid:g}),F&&function(e){Object(N.e)({query:tn,variables:{tribeId:e},fetchPolicy:"network-only"})}(F)}}},{key:"submitQuestion",value:function(e,n,a){var l=this,i=this.props.queryResult;if(null!==i&&void 0!==i&&i.tribe){var r=i.tribe,s=this.state.questionInput;Object(N.c)({mutation:t.mutations.questionCreate,variables:{titlePlaintext:s,sourceLocation:R.c.tribes,limitedUserDistro:!1,targetType:Object(Re.b)(Me.a.tribe),targetOid:r.tribeId,shouldCheckDuplicate:!1,shouldCheckCorrection:!1,shouldQueue:a},onError:function(){l.setState((function(){return{isSubmitting:!1}})),n.genericError()}}).then((function(t){var i=t.data;l.setState((function(){return{isSubmitting:!1}})),l.showToastAndMaybeDismissModal(i,Me.a.question,e,n,a),l.shouldAutosavePostDraft()&&l.state.showQuestionTooltip&&l.clearPostDraft()}))["catch"]((function(e){Object(ge.logJsError)("UniversalComposerModal-submit","Error: ".concat(e.message)),l.setState({isSubmitting:!1})}))}}},{key:"clearPostDraft",value:function(){if(this.postEditorRef.current)this.postEditorRef.current.clearDraft();else{var e,n=null===(e=this.props.queryResult)||void 0===e?void 0:e.tribe;if(!n)return;Object(N.c)({mutation:Te.mutations.clearDraft,variables:{tribeId:n.tribeId}})}}},{key:"shouldShowPostTab",value:function(){var e,n;if(null!==(e=this.props.extraProps)&&void 0!==e&&e.isPostEdit)return!0;if(null===(n=this.props.queryResult)||void 0===n||!n.tribe)return null;var t=this.props.queryResult.tribe.viewerContentTypesCanAddInTribe;return t.includes(Object(Re.b)(Me.a.quora_share))||t.includes(Object(Re.b)(Me.a.post))}},{key:"shouldShowQuestionTab",value:function(){var e,n;if(null===(e=this.props.queryResult)||void 0===e||!e.tribe)return null;var t=(null===(n=this.props.queryResult)||void 0===n?void 0:n.tribe).viewerContentTypesCanAddInTribe;return(void 0===t?[]:t).includes(Object(Re.b)(Me.a.question))}},{key:"getInitialContentTypeTab",value:function(){return this.props.extraProps.defaultTab?this.props.extraProps.defaultTab:this.shouldShowPostTab()?Le.a.Post:Le.a.Question}},{key:"renderHeader",value:function(e){var n,t,a,l=this;if(null===(n=this.props.queryResult)||void 0===n||!n.tribe)return null;var i=this.state.activeTabName,r=Q.a.createElement($.j,{alignItems:"center",justifyContent:Object(ye.b)()?"center":undefined},Q.a.createElement(D.b,{name:"Pen"}),Q.a.createElement($.s,{fontSize:14,ml:"tiny"},Object(L.plaintextTranslate)(Q.a.createElement(L.Translate,{context:L.partOfSpeech.noun},"Post")))),s=Q.a.createElement($.j,{alignItems:"center",justifyContent:Object(ye.b)()?"center":undefined},Q.a.createElement(D.b,{name:"AskQuestion"}),Q.a.createElement($.s,{fontSize:14,ml:"tiny"},Object(L.plaintextTranslate)(Q.a.createElement(L.Translate,{context:L.partOfSpeech.noun},"Question"))));if(null!==(t=this.props.extraProps)&&void 0!==t&&t.isPostEdit||null!==(a=this.props.extraProps)&&void 0!==a&&a.isDraftEdit||!this.shouldShowQuestionTab())return r;if(this.shouldShowPostTab()){var o=[];return this.shouldShowPostTab()&&o.push({label:Object(L.plaintextTranslate)(Q.a.createElement(L.Translate,{context:L.partOfSpeech.noun},"Post")),subLabel:Object(L.plaintextTranslate)("Post what's on your mind"),onSelected:function(){l.setState((function(e){return{activeTabName:Le.a.Post,hasCopiedPostInputToQuestionInput:e.hasCopiedPostInputToQuestionInput||e.showQuestionTooltip&&e.activeTabName===Le.a.Question,showQuestionTooltip:!1,shareData:undefined}}))}}),this.shouldShowPostTab()&&o.push({label:Object(L.plaintextTranslate)(Q.a.createElement(L.Translate,{context:L.partOfSpeech.noun},"Question")),subLabel:Object(L.plaintextTranslate)("Ask others for answers"),onSelected:this.blockActionIfImageIsUploading((function(){l.state.showQuestionTooltip&&!l.state.hasCopiedPostInputToQuestionInput&&Object(xe.a)("scribe_only",{scribe_category:"universal_composer_switch_to_question_tab_after_question_tooltip",log_viewer:!0,platform:en()}),l.setState({activeTabName:Le.a.Question,shareData:undefined})}),e)}),Q.a.createElement($.j,{alignItems:"center",justifyContent:Object(ye.b)()?this.shouldRenderContentMonetizationDisclaimer()?"space-between":"center":undefined},this.shouldRenderContentMonetizationDisclaimer()&&Q.a.createElement($.j,null),Q.a.createElement(H.a,{menuItems:o,alignment:"auto"},(function(e){return Q.a.createElement(X.a,{condition:l.state.showQuestionTooltip,wrapper:function(e){return Q.a.createElement(Z.a,{text:Object(L.plaintextTranslate)("Is this a question?"),subText:Object(L.plaintextTranslate)("Asking a question means you will get more answers"),placement:"bottom",hideTime:null,isDismissable:!0,hideOnAnchorClick:!0,displayOnMobile:!0,initiallyVisible:!0,size:"large",variant:"blue",trigger:"none"},e)}},Q.a.createElement(P.a,{icon:Q.a.createElement(D.b,{name:i===Le.a.Post?"Pen":"AskQuestion"}),text:i===Le.a.Post?Object(L.plaintextTranslate)(Q.a.createElement(L.Translate,{context:L.partOfSpeech.noun},"Post")):Object(L.plaintextTranslate)(Q.a.createElement(L.Translate,{context:L.partOfSpeech.noun},"Question")),onClick:e,chevronSuffix:"down_flippable"}))})),this.shouldRenderContentMonetizationDisclaimer()&&Q.a.createElement(U,{tribe:this.props.queryResult.tribe}))}return s}},{key:"shouldRenderContentMonetizationDisclaimer",value:function(){var e=this.props.queryResult.tribe;return!Object(ye.e)()&&(Object(ye.b)()&&Object(z.a)(e)&&this.state.activeTabName===Le.a.Post)}},{key:"render",value:function(){var e=this,n=this.props,t=n.dismissModalFlow,a=n.queryResult,l=n.extraProps;if(null===a||void 0===a||!a.tribe)throw Error("queryResult and Tribe info are expected for UniversalComposerModal.");var i=a.tribe,r=a.viewer,s=a.post,o=!i.viewerCanContribute,u=this.state.activeTabName,d=o?{buttonComponent:Q.a.createElement(j.a,{standaloneModalProps:{containerProps:{mobileHeight:"45%"},modalProps:{name:"TribeSubmissionRulesModal",queryVariables:{tribeId:i.tribeId},desktopWidth:650,extraProps:{showContentMonetizationDisclaimer:this.state.activeTabName===Le.a.Post&&Object(z.b)(Me.a.post,i)}},postDismissCallback:function(){e.focusEditor(300)}}},(function(e){var n=e.openStandaloneModal;return Q.a.createElement(P.a,{key:"rules",onClick:function(e){e.preventDefault(),n()},mr:"small",icon:Q.a.createElement(D.b,{name:"Info"}),text:Object(L.plaintextTranslate)("Rules"),size:Object(ye.e)()?"small":"regular"})}))}:null;return Q.a.createElement(Y.b,null,(function(n){return Q.a.createElement(Pe.a,{tribe:i,pid:null===s||void 0===s?void 0:s.pid,isPostEdit:l.isPostEdit,dismissModalFlow:t,onComplete:function(){e.postEditorRef.current.shouldSaveOnClose=!1},onSuccess:function(a){var l=a.data,i=a.shouldQueue;return e.showToastAndMaybeDismissModal(l,Me.a.post,t,n,i)}},(function(a){var l,s=a.postButtonProps;return Q.a.createElement(W.f,{navButton:"close",primaryButtonProps:e.getPrimaryButtonProps({setToast:n,postButtonProps:s}),secondaryButtonProps:d,hasPadding:!1,navButtonProps:{onClick:function(){var a,l,i,r=null===(a=e.postEditorRef.current)||void 0===a?void 0:a.getQTextContent(),s=!!r&&!Object(J.q)(r)||(null===(l=e.postEditorRef.current)||void 0===l?void 0:l.isDirty());null!==(i=e.props.extraProps)&&void 0!==i&&i.isPostEdit||!s||!Object(ye.e)()||e.state.activeTabName!==Le.a.Post?t({reason:"close"}):Object(fe.a)("showActionSheet",{title:"",buttonTitles:[Object(L.plaintextTranslate)("Clear Draft"),Object(L.plaintextTranslate)("Save Draft"),Object(L.plaintextTranslate)("Keep Editing")],destructiveButtonIndex:0},(function(a){var l,i=a.buttonIndex,r=function(e){Object(ye.g)()?t({reason:e}):setTimeout((function(){t({reason:e})}),500)};0===i?(null===(l=e.postEditorRef.current)||void 0===l||l.clearDraft(),r("close_clear_draft")):1===i&&e.blockActionIfImageIsUploading((function(){var n;null===(n=e.postEditorRef.current)||void 0===n||n.saveDraft(),r("close_save_draft")}),n)()}))}},header:null!==(l=e.renderHeader(n))&&void 0!==l?l:undefined,footerExtra:Object(ye.b)()?Q.a.createElement($.e,{id:"modal_footer_portal_container",width:"100%",height:"38px"}):undefined,displayFooterExtraInline:!0},Q.a.createElement($.e,{px:"medium",pt:"small"},e.state.activeTabName===Le.a.Post&&Q.a.createElement(Xe,{viewer:r,onClose:function(){var n;return null===(n=e.postEditorRef.current)||void 0===n?void 0:n.focusEditor()}}),Q.a.createElement($.e,{mb:Object(ye.g)()?"medium":"small"},null!==r.user&&Q.a.createElement(Ie.a,{user:r.user,tribeId:null===i||void 0===i?void 0:i.tribeId})),e.renderBody(u)))}))}))}}]),t}(B.Component);an.queries={onLoad:void 0!==Ze?Ze:Ze=a},an.mutations={questionCreate:x.d};n["default"]=an},ZR8f:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return ne}));var a={};t.r(a),t.d(a,"default",(function(){return y}));var l=t("lwsE"),i=t.n(l),r=t("W8MJ"),s=t.n(r),o=t("7W2i"),u=t.n(o),d=t("a1gu"),c=t.n(d),m=t("Nsbk"),p=t.n(m),g=function(){var e=[{kind:"LocalArgument",name:"aid",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"qid",type:"BigInt",defaultValue:null},{kind:"LocalArgument",name:"isAnswerEdit",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"tribeId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"hasContextualTribe",type:"Boolean!",defaultValue:null}],n={kind:"ScalarField",alias:"businessProfileAdFeaturesAvailable",name:"booleanFeature",args:[{kind:"Literal",name:"name",value:"BusinessProfileAdFeaturesAvailable"}],storageKey:'booleanFeature(name:"BusinessProfileAdFeaturesAvailable")'},t={kind:"ScalarField",alias:"answerShortContentCharLimit",name:"integerFeature",args:[{kind:"Literal",name:"name",value:"AnswerShortContentCharLimit"}],storageKey:'integerFeature(name:"AnswerShortContentCharLimit")'},a=[{kind:"Literal",name:"acceptedOnly",value:!0},{kind:"Literal",name:"currentNetworkMembersOnly",value:!0},{kind:"Literal",name:"paidSubscribersOnly",value:!0}],l={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},i={kind:"ScalarField",alias:"isEligibleForBundle",name:"isEligibleForEarningsPrograms",args:[{kind:"Literal",name:"programType",value:"bundle"}],storageKey:'isEligibleForEarningsPrograms(programType:"bundle")'},r={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},o={kind:"ScalarField",alias:null,name:"disclaimer",args:null,storageKey:null},u={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"isBusiness",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"producerBundleStatus",args:null,storageKey:null},m={kind:"ScalarField",alias:null,name:"logoUrl",args:null,storageKey:null},p={kind:"ScalarField",alias:null,name:"hasPaidFeaturesAccess",args:null,storageKey:null},g=[{kind:"Variable",name:"qid",variableName:"qid"}],f={kind:"ScalarField",alias:null,name:"qid",args:null,storageKey:null},y={kind:"ScalarField",alias:null,name:"viewerHasSubmissionToQuestion",args:null,storageKey:null},b={kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},v={kind:"LinkedField",alias:null,name:"viewerDraft",storageKey:null,args:null,concreteType:"AnswerDraft",plural:!1,selections:[r,u,b,{kind:"ScalarField",alias:null,name:"hasDisclaimer",args:null,storageKey:null}]},h={kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null},k={kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},S={kind:"ScalarField",alias:null,name:"submissionReviewPeriod",args:null,storageKey:null},F={kind:"LinkedField",alias:null,name:"settings",storageKey:null,args:null,concreteType:"TribeSettings",plural:!1,selections:[S]},_={kind:"FragmentSpread",name:"TribeContextProvider_tribe",args:null},T={name:"PaidSubscriptionEnabledForProducer",value:"true"},w={kind:"ScalarField",alias:null,name:"producerDirectStatus",args:null,storageKey:null},E={kind:"ScalarField",alias:null,name:"viewerCanContribute",args:null,storageKey:null},C={kind:"ScalarField",alias:null,name:"viewerCanAdmin",args:null,storageKey:null},K={kind:"ScalarField",alias:null,name:"viewerCanModerate",args:null,storageKey:null},O={kind:"Condition",passingValue:!0,isCustom:!0,customValue:T,condition:"onFeature",selections:[c,w,E,C,K,{kind:"FragmentSpread",name:"ContentMonetizationDisclaimerButtonWrapper_tribe",args:null}]},A={kind:"FragmentSpread",name:"AnswerEditorHeader_question",args:null},x={kind:"FragmentSpread",name:"QuestionTitle_question",args:null},M=[{kind:"Variable",name:"aid",variableName:"aid"}],R={kind:"ScalarField",alias:null,name:"aid",args:null,storageKey:null},q={kind:"LinkedField",alias:null,name:"viewerDraft",storageKey:null,args:null,concreteType:"AnswerDraft",plural:!1,selections:[r,u,b]},I={kind:"ScalarField",alias:"hasDisclaimer",name:"hasContentFlag",args:[{kind:"Literal",name:"contentFlag",value:"disclaimer"}],storageKey:'hasContentFlag(contentFlag:"disclaimer")'},L={kind:"ScalarField",alias:null,name:"objectiveType",args:null,storageKey:null},P={kind:"ScalarField",alias:null,name:"cta",args:null,storageKey:null},D={kind:"ScalarField",alias:null,name:"landingPageUrl",args:null,storageKey:null},j={kind:"ScalarField",alias:null,name:"leadGenFormId",args:null,storageKey:null},N={kind:"ScalarField",alias:null,name:"translatedString",args:null,storageKey:null},B={kind:"LinkedField",alias:null,name:"businessCredential",storageKey:null,args:null,concreteType:"BusinessCredential",plural:!1,selections:[r,u,N]},Q=[{kind:"Variable",name:"tribeId",variableName:"tribeId"}],V={kind:"LinkedField",alias:null,name:"businessProfiles",storageKey:"businessProfiles(acceptedOnly:true,currentNetworkMembersOnly:true,paidSubscribersOnly:true)",args:a,concreteType:"BusinessProfile",plural:!0,selections:[l,r]},U={kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},z={kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},W={kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},H={kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},J={kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},G={kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},Y=[u,r,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}],Z={kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:Y},X={kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:Y},$={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},ee={name:"annotate_with_ids",value:"true"},ne={kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null},te={kind:"Condition",passingValue:!0,isCustom:!0,customValue:ee,condition:"onGate",selections:[ne]},ae={kind:"LinkedField",alias:null,name:"settings",storageKey:null,args:null,concreteType:"TribeSettings",plural:!1,selections:[S,r]},le={kind:"ScalarField",alias:null,name:"viewerCanCreateContentQueueItem",args:null,storageKey:null},ie={kind:"ScalarField",alias:null,name:"viewerCanCreateAnswerSubmissions",args:null,storageKey:null},re={kind:"Condition",passingValue:!0,isCustom:!0,customValue:T,condition:"onFeature",selections:[c,w,E,C,K]},se={kind:"LinkedField",alias:null,name:"viewerDisplayCredential",storageKey:null,args:null,concreteType:null,plural:!1,selections:[r,u,{kind:"ScalarField",alias:null,name:"credentialId",args:null,storageKey:null},N]},oe={kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[r,u,s,{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[r,u,s,U,z,W,H,J,G,Z,X,d,$,te]},V]},ue={kind:"ScalarField",alias:null,name:"title",args:null,storageKey:null},de={kind:"ScalarField",alias:null,name:"isPartnerQuestion",args:null,storageKey:null},ce={kind:"LinkedField",alias:null,name:"asker",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[r,u,{kind:"ScalarField",alias:null,name:"isEmployee",args:null,storageKey:null}]},me={kind:"LinkedField",alias:null,name:"network",storageKey:null,args:null,concreteType:"Network",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"nid",args:null,storageKey:null},r]},pe={kind:"Condition",passingValue:!0,isCustom:!0,customValue:ee,condition:"onGate",selections:[ne,{kind:"LinkedField",alias:null,name:"tribeItem",storageKey:null,args:null,concreteType:null,plural:!1,selections:[u,{kind:"ScalarField",alias:null,name:"tribeItemId",args:null,storageKey:null}]}]};return{kind:"Request",fragment:{kind:"Fragment",name:"AnswerEditorModalQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[n,t,{kind:"LinkedField",alias:null,name:"businessProfiles",storageKey:"businessProfiles(acceptedOnly:true,currentNetworkMembersOnly:true,paidSubscribersOnly:true)",args:a,concreteType:"BusinessProfile",plural:!0,selections:[l]},i,{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[r,s,o,u,d,c,{kind:"LinkedField",alias:null,name:"businessProfile",storageKey:null,args:null,concreteType:"BusinessProfile",plural:!1,selections:[s,l,m,p]},{kind:"FragmentSpread",name:"ComposerHeader_user",args:null}]},{kind:"FragmentSpread",name:"NullspaceSubscriptionAcceptReminder_viewer",args:null}]},{kind:"Condition",isCustom:!1,customValue:null,passingValue:!1,condition:"isAnswerEdit",selections:[{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:g,concreteType:"Question",plural:!1,selections:[r,u,f,y,v,{kind:"LinkedField",alias:null,name:"tribeItem",storageKey:null,args:null,concreteType:null,plural:!1,selections:[r,u,{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[r,h,u,k,F,_,O]}]},A,{kind:"FragmentSpread",name:"AnswerEditorMutation_question",args:null},x]}]},{kind:"Condition",isCustom:!1,customValue:null,passingValue:!0,condition:"isAnswerEdit",selections:[{kind:"LinkedField",alias:null,name:"answer",storageKey:null,args:M,concreteType:"Answer",plural:!1,selections:[r,u,R,b,{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[r,u,f,x,A]},q,I,{kind:"LinkedField",alias:null,name:"businessAnswer",storageKey:null,args:null,concreteType:"BusinessAnswer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"businessProfile",storageKey:null,args:null,concreteType:"BusinessProfile",plural:!1,selections:[s,l,m]},{kind:"LinkedField",alias:null,name:"businessCustomAction",storageKey:null,args:null,concreteType:"BusinessCustomAction",plural:!1,selections:[L,P,D,j]}]},B,{kind:"FragmentSpread",name:"AnswerEditorMutation_answer",args:null}]}]},{kind:"Condition",isCustom:!1,customValue:null,passingValue:!0,condition:"hasContextualTribe",selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:Q,concreteType:"Tribe",plural:!1,selections:[k,h,F,O,_]}]}]},operation:{kind:"Operation",name:"AnswerEditorModalQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[n,t,V,i,{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[r,s,o,u,U,z,W,H,J,G,Z,X,d,c,{kind:"LinkedField",alias:null,name:"businessProfile",storageKey:null,args:null,concreteType:"BusinessProfile",plural:!1,selections:[s,l,m,p,r]},$,te]},{kind:"ScalarField",alias:"showProducerInviteAcceptReminder",name:"shouldShowEarningsProgramsProducerDismissible",args:[{kind:"Literal",name:"dismissible",value:"producer_invite_accept_reminder"}],storageKey:'shouldShowEarningsProgramsProducerDismissible(dismissible:"producer_invite_accept_reminder")'},r]},{kind:"Condition",passingValue:!1,isCustom:!1,customValue:null,condition:"isAnswerEdit",selections:[{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:g,concreteType:"Question",plural:!1,selections:[r,u,f,y,v,{kind:"LinkedField",alias:null,name:"tribeItem",storageKey:null,args:null,concreteType:null,plural:!1,selections:[r,u,{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[r,h,u,k,ae,le,ie,E,c,w,re]}]},se,oe,ue,de,ce,k,me,{kind:"Condition",passingValue:!0,isCustom:!0,customValue:T,condition:"onFeature",selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[c,r]},r]}]},pe]}]},{kind:"Condition",passingValue:!0,isCustom:!1,customValue:null,condition:"isAnswerEdit",selections:[{kind:"LinkedField",alias:null,name:"answer",storageKey:null,args:M,concreteType:"Answer",plural:!1,selections:[r,u,R,b,{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[r,u,f,ue,de,ce,k,me,{kind:"LinkedField",alias:null,name:"tribeItem",storageKey:null,args:null,concreteType:null,plural:!1,selections:[u,{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[h,r]},r]},se,oe,{kind:"LinkedField",alias:null,name:"viewerDraft",storageKey:null,args:null,concreteType:"AnswerDraft",plural:!1,selections:[r,u]},pe]},q,I,{kind:"LinkedField",alias:null,name:"businessAnswer",storageKey:null,args:null,concreteType:"BusinessAnswer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"businessProfile",storageKey:null,args:null,concreteType:"BusinessProfile",plural:!1,selections:[s,l,m,r]},{kind:"LinkedField",alias:null,name:"businessCustomAction",storageKey:null,args:null,concreteType:"BusinessCustomAction",plural:!1,selections:[L,P,D,j,r]},r]},B]}]},{kind:"Condition",passingValue:!0,isCustom:!1,customValue:null,condition:"hasContextualTribe",selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:Q,concreteType:"Tribe",plural:!1,selections:[k,h,ae,le,ie,E,r,re]}]}]},params:{operationKind:"query",name:"AnswerEditorModalQuery",id:"d65ea96fbbd06175003b0c074f29a920d19c0081882a1270bdcc8d2146a3d526",text:null,metadata:{}}}}();g.hash="844ea23ce52456fdad8c381526f1be2c";var f,y=g,b=t("QwTT"),v=t("6pmM"),h=t("qU4x"),k=t("QK84"),S=t("zv2T"),F=t("0teY"),_=t("zm58"),T=t("jufJ"),w=t("cbxS"),E=t("zLpq"),C=t("OMLc"),K=t("Iu3b"),O=t("6pr2"),A=t("AFGi"),x=t("Kh5g"),M=t("LNH1"),R=t("VwdU"),q=t("RA+f"),I=t("Kk/C"),L=t("bqYg"),P=t("Gnru"),D=t("KP5v"),j=t("SW3P"),N=t("AaDK"),B=t("nwxp"),Q=t("vN+2"),V=t.n(Q),U=t("q1tI"),z=t.n(U),W=t("ARre"),H=t("IAlV"),J=t("UDrg"),G=t("Mh7H"),Y=t("YKuC"),Z=t("Vx0C"),X=t("kWkq");function $(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=p()(e);if(n){var l=p()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return c()(this,t)}}var ee=function(e){var n=e.isAnswerEdit,t=e.pageFramework,a=e.sourceComponent,l=e.clientLogMetadata,i=void 0===l?{}:l;return z.a.useEffect((function(){n||Object(P.logEvent)(i,"AnswerAddModalOpen",{})}),[i,n]),z.a.useEffect((function(){Object(N.a)("answer_editor_opened",{pageFramework:t,editorFramework:"react",editorType:"modal",sourceComponent:a})}),[t,a]),null},ne=function(e){u()(t,e);var n=$(t);function t(e){var a,l,r,s,o,u,d,c,m,p,g;i()(this,t),(g=n.call(this,e)).editorRef=void 0,g.stickyButtonInfo=void 0,g.allowEditBusinessCredentials=function(){var e,n,t=g.props.queryResult.viewer,a=void 0===t?null:t,l=Boolean(null===a||void 0===a||null===(e=a.businessProfiles)||void 0===e?void 0:e.length),i=null===a||void 0===a||null===(n=a.user)||void 0===n?void 0:n.isBusiness;return Object(j.a)("enable_business_services")&&(l||i)},g.getSecondaryButtonProps=function(e){var n,t,a=g.props.queryResult,l=a.question,i=a.tribe,r=a.viewer,s=(null===l||void 0===l||null===(n=l.tribeItem)||void 0===n?void 0:n.tribe)||i;return e&&s?{buttonComponent:z.a.createElement(K.a,{standaloneModalProps:{containerProps:{mobileHeight:"45%"},modalProps:{name:"TribeSubmissionRulesModal",queryVariables:{tribeId:s.tribeId},desktopWidth:650,extraProps:{showContentMonetizationDisclaimer:Object(k.b)(J.a.answer,s)}}}},(function(e){var n=e.openStandaloneModal;return z.a.createElement(E.a,{key:"rules",onClick:function(){n()},mr:"small",icon:z.a.createElement(C.b,{name:"Info"}),text:Object(T.plaintextTranslate)("Rules"),size:Object(B.e)()?"small":"regular"})}))}:Object(F.b)(e||!!s,r.isEligibleForBundle,null===(t=r.user)||void 0===t?void 0:t.producerBundleStatus)?{buttonComponent:z.a.createElement(F.a,{viewer:r,contentType:"Answer"})}:null},g.editorRef=z.a.createRef();var f=g.props.queryResult,y=f.answer,v=f.viewer,h=f.question,S=null!==(a=null===y||void 0===y||null===(l=y.businessAnswer)||void 0===l?void 0:l.businessProfile)&&void 0!==a?a:null===v||void 0===v||null===(r=v.user)||void 0===r?void 0:r.businessProfile,_=null===y||void 0===y||null===(s=y.businessAnswer)||void 0===s?void 0:s.businessCustomAction,w=(null===y||void 0===y?void 0:y.hasDisclaimer)||(null===h||void 0===h||null===(o=h.viewerDraft)||void 0===o?void 0:o.hasDisclaimer);return g.state={includeDisclaimer:null!==w&&void 0!==w&&w,originallyIncludedDisclaimer:null!==w&&void 0!==w&&w,disclaimer:null===(u=v.user)||void 0===u?void 0:u.disclaimer,isSubmitting:!1,content:null,businessUid:null!==(d=null===S||void 0===S?void 0:S.uid)&&void 0!==d?d:null,businessCredential:null!==(c=null===y||void 0===y?void 0:y.businessCredential)&&void 0!==c?c:null,businessName:null!==(m=null===S||void 0===S?void 0:S.name)&&void 0!==m?m:null,businessLogoUrl:null!==(p=null===S||void 0===S?void 0:S.logoUrl)&&void 0!==p?p:null,businessCustomAction:_?Object.assign({},_,{cta:Object(H.a)(_.cta),objectiveType:Object(G.a)(_.objectiveType)}):b.a.defaultCustomAction,hasSeenShortContentBanner:!1,showShortContentBanner:null},g}return s()(t,[{key:"getStartingContent",value:function(){var e=this.props,n=e.queryResult,t=n.question,a=n.answer,l=e.extraProps.isAnswerEdit,i=(null===a||void 0===a?void 0:a.viewerDraft)||(null===t||void 0===t?void 0:t.viewerDraft);if(!i)return Object(A.h)();if(null!==i&&void 0!==i&&i.content){var r=JSON.parse(i.content);if(!Object(A.q)(r))return r}return l&&a&&a.content?JSON.parse(a.content):Object(A.h)()}},{key:"getEditorKey",value:function(){var e=this.props,n=e.queryResult,t=n.question,a=void 0===t?null:t,l=n.answer,i=void 0===l?null:l,r=e.extraProps.isAnswerEdit,s=r?"answer":"question",o=r?null===i||void 0===i?void 0:i.aid:null===a||void 0===a?void 0:a.qid;return"".concat(s,"-").concat(o)}},{key:"renderMonetizationStickyButton",value:function(){var e,n=this,t=this.props.queryResult,a=t.question,l=t.tribe,i=(null===a||void 0===a||null===(e=a.tribeItem)||void 0===e?void 0:e.tribe)||l;return!Object(B.b)()&&i&&Object(k.a)(i)?z.a.createElement(h.a,{tribe:i},(function(e){var t=e.stickyButtonInfo;return n.stickyButtonInfo=t,null})):null}},{key:"isBusinessAnswer",value:function(){var e,n,t=this.props.queryResult,a=t.question,l=void 0===a?null:a,i=t.tribe,r=t.viewer,s=(null===l||void 0===l||null===(e=l.tribeItem)||void 0===e?void 0:e.tribe)||i,o=null===r||void 0===r||null===(n=r.user)||void 0===n?void 0:n.businessProfile;return Object(j.a)("enable_business_services")&&this.state.businessUid&&(!o||(null===o||void 0===o?void 0:o.hasPaidFeaturesAccess))&&!s}},{key:"checkShortAnswer",value:function(e){var n=this.props.queryResult.viewer.answerShortContentCharLimit;return n!==undefined&&!Object(A.z)(e,n)}},{key:"onSubmit",value:function(e,n,t,a,l){var i,r=this,s=this.props,o=s.queryResult,u=o.question,d=void 0===u?null:u,c=o.answer,m=void 0===c?null:c,p=o.tribe,g=s.dismissModalFlow,f=s.extraProps,y=f.isAnswerEdit,b=f.pageFramework,v=f.sourceComponent,h=f.canMonetize,k=s.triggerTransition,S=s.flowData,F=(null===d||void 0===d||null===(i=d.tribeItem)||void 0===i?void 0:i.tribe)||p,_=this.state.isSubmitting,w=y?null===m||void 0===m?void 0:m.question:d;if(Object(N.a)("answer_editor_modal_submit",{qid:null===w||void 0===w?void 0:w.qid,pageFramework:b,editorFramework:"react",sourceComponent:v}),this.checkShortAnswer(e)&&!this.state.hasSeenShortContentBanner){var E=Object(D.a)("short_content_education");if("non_expandable"===E||"expandable"===E||Object(j.a)("short_content_education"))return this.setState((function(){return{hasSeenShortContentBanner:!0,showShortContentBanner:Object(j.a)("short_content_education")?"expandable":E||null}})),void this.editorRef.current.focusEditor()}if(h&&!y)return n(e,!0),S.businessUid=this.state.businessUid,S.businessCredential=this.state.businessCredential,S.businessCustomAction=this.state.businessCustomAction,void k();this.setState((function(){return{isSubmitting:!0}})),_||t(e,this.state.businessUid,this.state.businessCredential,this.state.businessCustomAction).then((function(e){var n,t;r.setState((function(){return{isSubmitting:!1}}));var i=null!==(n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.answerSubmit)&&void 0!==n?n:{},s=i.status,o=i.redirectUrl,u=i.success,d=i.msg;if(s&&s!==W.a.success||!u&&d)s===W.a.add_answer_block?g({submission:!1,shouldOpenUnconfirmedEmailModal:!0}):s?l(z.a.createElement(X.a,{status:s}),M.d.error):d&&l(Object(T.plaintextServerTranslated)(d),M.d.error);else if(a){var c,m=null===F||void 0===F||null===(c=F.settings)||void 0===c?void 0:c.submissionReviewPeriod;g({submission:!0,submissionReviewPeriod:m})}else g({redirectUrl:o,submission:!0})}))["catch"]((function(){r.setState((function(){return{isSubmitting:!1}}))}))}},{key:"renderAnswerEditorHeader",value:function(){var e,n=this,t=this.props,a=t.queryResult,l=a.question,i=void 0===l?null:l,r=a.answer,s=void 0===r?null:r,o=t.extraProps,u=o.isAnswerEdit,d=o.editCredentialHint,c=u?null===s||void 0===s?void 0:s.question:i;return c&&z.a.createElement(Y.a,{question:c,isAnswerEdit:u,businessUid:null!==(e=this.state.businessUid)&&void 0!==e?e:undefined,businessCredential:this.state.businessCredential,handleEditBusinessCredential:function(e){var t=e.businessUid,a=e.businessCredential,l=e.businessName,i=e.businessLogoUrl;n.setState((function(e){return{businessUid:t,businessCredential:a,businessName:l,businessLogoUrl:i,businessCustomAction:t===e.businessUid?e.businessCustomAction:b.a.defaultCustomAction}}))},editCredentialHint:d})}},{key:"renderDisclaimerOverflowMenu",value:function(){var e=this,n=this.state.disclaimer,t=Object(T.plaintextTranslate)("Answer"),a=n?Object(T.plaintextTranslate)("Toggle Disclaimer"):Object(T.plaintextTranslate)("Attach Disclaimer");return z.a.createElement(K.a,{standaloneModalProps:{modalProps:{name:"AnswerDisclaimerEditorModal"},postDismissCallback:function(n){var t=null===n||void 0===n?void 0:n.disclaimer;t&&e.setState({disclaimer:t,includeDisclaimer:!0})}}},(function(l){var i=l.openStandaloneModal;return z.a.createElement(O.a,{size:"small",title:t,items:[{label:a,onSelected:function(t){n?e.setState((function(e){return{includeDisclaimer:!e.includeDisclaimer}})):i()}}]})}))}},{key:"renderDisclaimerSection",value:function(){var e=this.state,n=e.includeDisclaimer,t=e.disclaimer;return n&&t?z.a.createElement(q.e,{p:"medium",pt:0},z.a.createElement(q.e,{borderTop:!0,pt:"medium",color:"gray",mb:"tiny"},z.a.createElement(x.a,{qt:JSON.parse(t)})),z.a.createElement(q.p,{href:"/settings/privacy"},z.a.createElement(T.Translate,null,"Edit on Settings Page"))):undefined}},{key:"render",value:function(){var e,n=this,t=this.props,a=t.queryResult,l=a.question,i=void 0===l?null:l,r=a.answer,s=void 0===r?null:r,o=a.tribe,u=a.viewer,d=t.dismissModalFlow,c=t.extraProps,m=c.isAnswerEdit,p=c.pageFramework,g=c.sourceComponent,f=c.clientLogMetadata,y=void 0===f?"{}":f,h=c.canMonetize,k=(null===i||void 0===i||null===(e=i.tribeItem)||void 0===e?void 0:e.tribe)||o,F=this.state,E=F.isSubmitting,K=F.content,O=F.originallyIncludedDisclaimer,A=F.includeDisclaimer!==O,x=m?null===s||void 0===s?void 0:s.question:i,j=null===u||void 0===u?void 0:u.businessProfileAdFeaturesAvailable,Q=s?{type:J.a.answer,oid:s.aid}:i?{type:J.a.question,oid:i.qid}:undefined,U=!1;Object(B.b)()&&(U=Boolean(Object(D.a)("answer_inline_composer_to_modal")));var W=U||this.state.showShortContentBanner||this.isBusinessAnswer();return z.a.createElement(P.ClientLogProvider,{value:JSON.parse(y)},z.a.createElement(R.a,{condition:!!k,wrapper:function(e){return k?z.a.createElement(L.a,{tribe:k},n.renderMonetizationStickyButton(),e):e}},z.a.createElement(z.a.Fragment,null,z.a.createElement(ee,{isAnswerEdit:m,pageFramework:p,sourceComponent:g,clientLogMetadata:y}),z.a.createElement(Z.a,{question:i,answer:s,isAnswerEdit:m,toggleDisclaimer:A},(function(e){var t=e.saveDraft,a=e.submitAnswer,l=e.isTribeSubmission;return z.a.createElement(M.b,null,(function(e){return z.a.createElement(_.a,{ref:n.editorRef,editorKey:n.getEditorKey(),header:z.a.createElement(q.e,{bg:"white",borderBottom:!1},z.a.createElement(q.e,{px:"medium"},null!==u.user&&(U&&x?n.renderAnswerEditorHeader():z.a.createElement(v.a,{user:u.user,tribeId:null===k||void 0===k?void 0:k.tribeId})),x&&z.a.createElement(q.e,{mt:"small"},z.a.createElement(I.a,{question:x})),(Object(B.b)()||n.allowEditBusinessCredentials())&&x&&!U&&n.renderAnswerEditorHeader())),footer:W&&z.a.createElement(z.a.Fragment,null,U&&z.a.createElement(q.e,{id:"modal_footer_portal_container",width:"100%",height:"38px"}),"expandable"===n.state.showShortContentBanner?z.a.createElement(q.c,{"in":!!n.state.showShortContentBanner,appear:!0},(function(i){return z.a.createElement(q.g,{animation:i,slideIn:"bottom",slideOut:"bottom"},z.a.createElement(w.a,{dismissable:!0,isExpandable:!0,icon:z.a.createElement(C.b,{name:"Info"}),title:z.a.createElement(T.Translate,null,"Consider expanding upon your answer"),subtitle:z.a.createElement(T.Translate,null,"Share a first-hand experience, add actionable advice, or include relevant images and quotes to get more views."),onDismiss:function(){n.setState({showShortContentBanner:null}),n.editorRef.current.focusEditor()},onExpand:function(){n.editorRef.current.focusEditor()},buttonOnClick:function(){var i=n.editorRef.current.save();n.onSubmit(i,t,a,l,e)},buttonTitle:Object(T.plaintextTranslate)("Post anyway"),buttonVariant:"blue_outline",buttonPosition:"bottom"}))})):"non_expandable"===n.state.showShortContentBanner?z.a.createElement(q.c,{"in":!!n.state.showShortContentBanner,appear:!0},(function(e){return z.a.createElement(q.g,{animation:e,slideIn:"bottom",slideOut:"bottom"},z.a.createElement(w.a,{dismissable:!0,icon:z.a.createElement(C.b,{name:"Info"}),title:z.a.createElement(T.Translate,null,"Consider expanding upon your answer by sharing a first-hand experience, adding actionable advice, or including relevant images and quotes to get more views."),onDismiss:function(){n.setState({showShortContentBanner:null}),n.editorRef.current.focusEditor()}}))})):n.isBusinessAnswer()?z.a.createElement(b.a,{businessUid:n.state.businessUid,businessName:n.state.businessName,businessProfileAdFeaturesAvailable:j,businessLogoUrl:n.state.businessLogoUrl,businessCustomAction:n.state.businessCustomAction,onCTAChange:function(e){return n.setState((function(){return{businessCustomAction:e}}))},isAnswerEdit:m}):undefined),displayFooterExtraInline:U,saveDraft:function(e,n,a){return t(e,n,a)},primaryButtonText:h&&!m?Object(T.plaintextForceEnglishForCopyDrafting)("Next"):l&&k?Object(T.plaintextTranslate)("Submit"):z.a.createElement(T.Translate,{context:T.partOfSpeech.verb},"Post"),onPrimaryButtonClick:function(i){n.onSubmit(i,t,a,l,e)},secondaryButtonProps:n.getSecondaryButtonProps(l),onNavButtonClick:function(){return d({submission:!1})},navButton:"close",startingContent:n.getStartingContent(),titleText:Object(T.plaintextTranslate)(m?"Edit your answer":""),onFirstChange:function(){return Object(N.a)("answer_editor_modal_first_type",{pageFramework:p,editorFramework:"react",sourceComponent:g})},primaryButtonDisabled:E||Object(S.e)()&&(null===K||K.isEmpty()),placeholder:Object(T.plaintextTranslate)("Write your answer"),contentContext:Q,useLightWeightContentStyleToolBar:!0,stickyButtonInfo:n.stickyButtonInfo,onEditorMeaningfulChange:Object(S.e)()?function(e){return n.setState({content:e})}:V.a,editorFooterSection:U?n.renderDisclaimerSection():undefined,editorToolbarOverflowMenu:U?n.renderDisclaimerOverflowMenu():undefined})}))})))))}}]),t}(z.a.Component);ne.queries={onLoad:void 0!==f?f:f=a},ne.displayName="AnswerEditorModal"},ZsYs:function(e,n,t){"use strict";t.r(n),t.d(n,"customActionFlowTransition",(function(){return h}));var a=t("lwsE"),l=t.n(a),i=t("W8MJ"),r=t.n(i),s=t("7W2i"),o=t.n(s),u=t("a1gu"),d=t.n(u),c=t("Nsbk"),m=t.n(c),p=t("jQ0q"),g=t("q1tI"),f=t.n(g),y=t("oigA"),b=t("szkJ");function v(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=m()(e);if(n){var l=m()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return d()(this,t)}}var h=function(e){var n=e.showNextModal,t=e.flowData,a=t.nextModal,l=t.initialValues.businessUid;n("BusinessServicesCustomActionLeadGenStep"!==a?{modalProps:{name:a}}:{modalProps:{name:a,queryVariables:{businessUid:l}}})},k=function(e){o()(t,e);var n=v(t);function t(){return l()(this,t),n.apply(this,arguments)}return r()(t,[{key:"render",value:function(){var e=this.props,n=e.children,t=e.showProfileCustomAction,a=e.profileImageUrl,l=e.updateCustomAction,i=e.objectiveType,r=e.cta,s=void 0===r?y.a.apply_now:r,o=e.landingPageUrl,u=e.leadGenFormId,d=e.businessUid,c=e.businessName,m=e.customActionPlacement,g=e.businessProfileAdFeaturesAvailable;return f.a.createElement(p.a,{modalFlowProps:{transitionName:"customActionFlowTransition",containerProps:{easyDismissEnabled:!0},initialFlowData:{nextModal:"BusinessServicesCustomActionInitialStep",initialValues:{profileImageUrl:a,objectiveType:null!==i&&void 0!==i?i:t?b.a.profile:b.a.traffic,cta:s,landingPageUrl:o,leadGenFormId:u,businessUid:d,businessName:c},showProfileCustomAction:Boolean(t),customActionPlacement:m,businessProfileAdFeaturesAvailable:g},postDismissCallback:function(e){if(e){var n=e.objectiveType,t=e.cta,a=e.landingPageUrl,i=e.leadGenFormId;l({objectiveType:n,cta:t,landingPageUrl:a,leadGenFormId:i})}},initialModalProps:{name:"BusinessServicesCustomActionInitialStep"}},shouldPrefetch:!0},(function(e){var t=e.openModalFlow;return n({openModalFlow:t})}))}}]),t}(f.a.Component);k.displayName="CustomActionFlow",n["default"]=k},bdgK:function(e,n,t){"use strict";(function(e){var t=function(){if("undefined"!==typeof Map)return Map;function e(e,n){var t=-1;return e.some((function(e,a){return e[0]===n&&(t=a,!0)})),t}return function(){function n(){this.__entries__=[]}return Object.defineProperty(n.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),n.prototype.get=function(n){var t=e(this.__entries__,n),a=this.__entries__[t];return a&&a[1]},n.prototype.set=function(n,t){var a=e(this.__entries__,n);~a?this.__entries__[a][1]=t:this.__entries__.push([n,t])},n.prototype["delete"]=function(n){var t=this.__entries__,a=e(t,n);~a&&t.splice(a,1)},n.prototype.has=function(n){return!!~e(this.__entries__,n)},n.prototype.clear=function(){this.__entries__.splice(0)},n.prototype.forEach=function(e,n){void 0===n&&(n=null);for(var t=0,a=this.__entries__;t<a.length;t++){var l=a[t];e.call(n,l[1],l[0])}},n}()}(),a="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,l="undefined"!==typeof e&&e.Math===Math?e:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),i="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(l):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var r=["top","right","bottom","left","width","height","size","weight"],s="undefined"!==typeof MutationObserver,o=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,n){var t=!1,a=!1,l=0;function r(){t&&(t=!1,e()),a&&o()}function s(){i(r)}function o(){var e=Date.now();if(t){if(e-l<2)return;a=!0}else t=!0,a=!1,setTimeout(s,n);l=e}return o}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var n=this.observers_,t=n.indexOf(e);~t&&n.splice(t,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){a&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){a&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var n=e.propertyName,t=void 0===n?"":n;r.some((function(e){return!!~t.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),u=function(e,n){for(var t=0,a=Object.keys(n);t<a.length;t++){var l=a[t];Object.defineProperty(e,l,{value:n[l],enumerable:!1,writable:!1,configurable:!0})}return e},d=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||l},c=b(0,0,0,0);function m(e){return parseFloat(e)||0}function p(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return n.reduce((function(n,t){return n+m(e["border-"+t+"-width"])}),0)}function g(e){var n=e.clientWidth,t=e.clientHeight;if(!n&&!t)return c;var a=d(e).getComputedStyle(e),l=function(e){for(var n={},t=0,a=["top","right","bottom","left"];t<a.length;t++){var l=a[t],i=e["padding-"+l];n[l]=m(i)}return n}(a),i=l.left+l.right,r=l.top+l.bottom,s=m(a.width),o=m(a.height);if("border-box"===a.boxSizing&&(Math.round(s+i)!==n&&(s-=p(a,"left","right")+i),Math.round(o+r)!==t&&(o-=p(a,"top","bottom")+r)),!function(e){return e===d(e).document.documentElement}(e)){var u=Math.round(s+i)-n,g=Math.round(o+r)-t;1!==Math.abs(u)&&(s-=u),1!==Math.abs(g)&&(o-=g)}return b(l.left,l.top,s,o)}var f="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof d(e).SVGGraphicsElement}:function(e){return e instanceof d(e).SVGElement&&"function"===typeof e.getBBox};function y(e){return a?f(e)?function(e){var n=e.getBBox();return b(0,0,n.width,n.height)}(e):g(e):c}function b(e,n,t,a){return{x:e,y:n,width:t,height:a}}var v=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=y(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),h=function(e,n){var t=function(e){var n=e.x,t=e.y,a=e.width,l=e.height,i="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,r=Object.create(i.prototype);return u(r,{x:n,y:t,width:a,height:l,top:t,right:n+a,bottom:l+t,left:n}),r}(n);u(this,{target:e,contentRect:t})},k=function(){function e(e,n,a){if(this.activeObservations_=[],this.observations_=new t,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=a}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new v(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n["delete"](e),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(n){n.isActive()&&e.activeObservations_.push(n)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map((function(e){return new h(e.target,e.broadcastRect())}));this.callback_.call(e,n,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),S="undefined"!==typeof WeakMap?new WeakMap:new t,F=function T(e){if(!(this instanceof T))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=o.getInstance(),t=new k(e,n,this);S.set(this,t)};["observe","unobserve","disconnect"].forEach((function(e){F.prototype[e]=function(){var n;return(n=S.get(this))[e].apply(n,arguments)}}));var _="undefined"!==typeof l.ResizeObserver?l.ResizeObserver:F;n.a=_}).call(this,t("yLpj"))},bqYg:function(e,n,t){"use strict";var a={};t.r(a),t.d(a,"default",(function(){return y}));var l,i=t("lwsE"),r=t.n(i),s=t("W8MJ"),o=t.n(s),u=t("7W2i"),d=t.n(u),c=t("a1gu"),m=t.n(c),p=t("Nsbk"),g=t.n(p),f={kind:"Fragment",name:"TribeContextProvider_tribe",type:"Tribe",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanCreateContentQueueItem",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanCreateAnswerSubmissions",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanContribute",args:null,storageKey:null}],hash:"67356cf807f21579bd951cb6fae79b63"},y=f,b=t("VyO/"),v=t("q1tI"),h=t.n(v),k=t("yO5s");function S(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=g()(e);if(n){var l=g()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return m()(this,t)}}var F=function(e){d()(t,e);var n=S(t);function t(){return r()(this,t),n.apply(this,arguments)}return o()(t,[{key:"render",value:function(){var e=this.props,n=e.children,t=e.tribe,a=t.tribeId,l=t.viewerCanCreateContentQueueItem,i=t.viewerCanCreateAnswerSubmissions,r=t.viewerCanContribute;return h.a.createElement(k.a.Provider,{value:{tribeId:a,viewerCanCreateContentQueueItem:l,viewerCanCreateAnswerSubmissions:i,viewerCanContribute:r}},n)}}]),t}(h.a.Component);F.fragments={tribe:void 0!==l?l:l=a},F.displayName="TribeContextProvider";n.a=Object(b.b)(F)},bslc:function(e,n,t){"use strict";var a={};t.r(a),t.d(a,"default",(function(){return v}));var l,i=t("lwsE"),r=t.n(i),s=t("W8MJ"),o=t.n(s),u=t("7W2i"),d=t.n(u),c=t("a1gu"),m=t.n(c),p=t("Nsbk"),g=t.n(p),f=t("QILm"),y=t.n(f),b={kind:"Fragment",name:"QuestionAnswerCount_question",type:"Question",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"answerCount",args:null,storageKey:null}],hash:"10f534cb260ae9c021a6e2d00c0e113f"},v=b,h=t("jufJ"),k=t("RA+f"),S=t("VyO/"),F=t("q1tI"),_=t.n(F);function T(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=g()(e);if(n){var l=g()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return m()(this,t)}}var w=function(e){var n=e.size,t=void 0===n?"regular":n,a=e.count,l=y()(e,["size","count"]);return a>0?_.a.createElement(k.s,Object.assign({fontSize:t,color:"gray_light"},l),_.a.createElement(h.Translate,null,_.a.createElement(h.FormattedNumber,{value:a}),_.a.createElement(h.PluralTranslate,{value:a},{ONE:" Answer",OTHER:" Answers"}))):_.a.createElement(k.s,{fontSize:t,color:"gray_light"},_.a.createElement(h.Translate,null,"No answers yet"))};w.displayName="AnswerCount";var E=function(e){d()(t,e);var n=T(t);function t(){return r()(this,t),n.apply(this,arguments)}return o()(t,[{key:"render",value:function(){var e=this.props,n=e.question,t=y()(e,["question"]),a=n.answerCount;return _.a.createElement(w,Object.assign({size:"small",count:a},t))}}]),t}(_.a.Component);E.fragments={question:void 0!==l?l:l=a},E.displayName="QuestionAnswerCount";n.a=Object(S.b)(E)},"bxg/":function(e,n,t){"use strict";t.d(n,"b",(function(){return l})),t.d(n,"a",(function(){return i})),t.d(n,"c",(function(){return r}));var a=t("nwxp"),l=35,i=10;function r(){return l+i+(Object(a.a)()?50:30)}},dRzG:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return D}));var a={};t.r(a),t.d(a,"default",(function(){return y}));var l=t("lwsE"),i=t.n(l),r=t("W8MJ"),s=t.n(r),o=t("7W2i"),u=t.n(o),d=t("a1gu"),c=t.n(d),m=t("Nsbk"),p=t.n(m),g=function(){var e=[{kind:"LocalArgument",name:"showReplyHeader",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"replyCommentId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"commentType",type:"EnumOrString!",defaultValue:null}],n=[{kind:"Variable",name:"commentId",variableName:"replyCommentId"},{kind:"Variable",name:"commentType",variableName:"commentType"}],t={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l=[a,t,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}];return{kind:"Request",fragment:{kind:"Fragment",name:"CommentAddModalQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"Condition",isCustom:!1,customValue:null,passingValue:!0,condition:"showReplyHeader",selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[{kind:"FragmentSpread",name:"UserName_user",args:null},{kind:"FragmentSpread",name:"UserPhoto_user",args:null}]},{kind:"FragmentSpread",name:"CommentQTextExpandable_comment",args:null}]}]}]},operation:{kind:"Operation",name:"CommentAddModalQuery",argumentDefinitions:e,selections:[{kind:"Condition",passingValue:!0,isCustom:!1,customValue:null,condition:"showReplyHeader",selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[t,{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},a,{kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:l},{kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:l},{kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]}]},t,a,{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null},t]}]}]}]},params:{operationKind:"query",name:"CommentAddModalQuery",id:"9c8a2e1b2f9b0e2b35672eb8248054d63945c437e32269ede1c66396ea34cc94",text:null,metadata:{}}}}();g.hash="e1dc93a2c5308c445105ebb5d3546ca9";var f,y=g,b=t("zm58"),v=t("jufJ"),h=t("OMLc"),k=t("AFGi"),S=t("RA+f"),F=t("R+um"),_=t("r+vq"),T=t("SKAY"),w=t("yju1"),E=t("nwxp"),C=t("Y+p1"),K=t.n(C),O=t("q1tI"),A=t.n(O),x=t("sI7B"),M=t("bxg/"),R=t("ptJ+"),q=t("pEsO");function I(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=p()(e);if(n){var l=p()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return c()(this,t)}}var L=function(e){return A.a.createElement(S.s,Object.assign({fontSize:"small",color:"gray_light"},e),A.a.createElement(v.Translate,null,"Replying to:"))};L.displayName="ReplyingToText";var P=function(e){var n=e.comment;return n?A.a.createElement(S.e,{px:"medium",py:"small",maxHeight:"155px",minHeight:"84px",overflowY:"scroll",bg:"gray_ultralight"},A.a.createElement(L,{pb:"tiny"}),A.a.createElement(S.j,{alignItems:"center"},A.a.createElement(_.a,{user:n.user}),A.a.createElement(S.e,{as:"span",pl:"tiny"},A.a.createElement(F.b,{user:n.user}))),A.a.createElement(S.s,{pt:"tiny",fontSize:"small"},A.a.createElement(R.a,{comment:n,charLimit:100}))):null};P.displayName="Header";var D=function(e){u()(t,e);var n=I(t);function t(e){var a;return i()(this,t),(a=n.call(this,e)).editorRef=void 0,a.inlineEditorFullscreenExpansionMessageHandler=function(){a.setState({inlineEditorReachedFullscreenHeight:!0})},a.inlineEditorContent=void 0,a.setInlineEditorToFullscreenHeight=function(){Object(w.a)("setPageProperties",{height:9999999}),a.setState({inlineEditorReachedFullscreenHeight:!0}),a.inlineEditorContent=undefined},a.state={inlineEditorReachedFullscreenHeight:!1,isInlineEditorEmpty:!0},a.editorRef=A.a.createRef(),a}return s()(t,[{key:"componentDidMount",value:function(){Object(E.g)()&&(Object(T.registerMessageHandler)("showingFullscreenActionView",this.inlineEditorFullscreenExpansionMessageHandler),Object(T.registerMessageHandler)("imageSelected",this.setInlineEditorToFullscreenHeight))}},{key:"componentWillUnmount",value:function(){Object(E.g)()&&(Object(T.removeMessageHandler)("showingFullscreenActionView",this.inlineEditorFullscreenExpansionMessageHandler),Object(T.removeMessageHandler)("imageSelected",this.setInlineEditorToFullscreenHeight))}},{key:"getStartingContent",value:function(){var e=this.props.extraProps.commentDraftContent;return e?JSON.parse(e):Object(k.h)()}},{key:"changeEditorHeight",value:function(e){if(!this.state.inlineEditorReachedFullscreenHeight&&!this.state.isInlineEditorEmpty){var n=e+M.b+M.a;Object(w.a)("setPageProperties",{height:n})}}},{key:"getStickyButtonInfo",value:function(){var e=this;if(this.state.inlineEditorReachedFullscreenHeight)return undefined;var n=this.props.dismissModalFlow;return{platform:"native",name:"post",text:Object(v.plaintextTranslate)("Post",{context:v.partOfSpeech.verb}),hex:"#2E69FF",disabled:this.state.isInlineEditorEmpty,onClick:function(){n({content:e.inlineEditorContent})}}}},{key:"renderExpandIcon",value:function(){var e=this;return A.a.createElement(S.f,{onClick:function(){var n;null===(n=e.editorRef.current)||void 0===n||n.focusEditor(),e.setInlineEditorToFullscreenHeight()}},A.a.createElement(h.b,{name:"Expand"}))}},{key:"getInlineEditorBodyProps",value:function(){return this.state.inlineEditorReachedFullscreenHeight?null:{mb:Object(E.c)()?"".concat(M.a,"px"):0,overflowY:"hidden"}}},{key:"renderInlineEditorHeader",value:function(e){return this.state.inlineEditorReachedFullscreenHeight?A.a.createElement(P,{comment:e}):A.a.createElement(S.r,{maxHeight:"".concat(M.b,"px"),top:0,px:"medium",py:"small",zIndex:1e3,bg:"white"},e?A.a.createElement(S.e,{display:"flex",justifyContent:"space-between"},A.a.createElement(S.j,{alignItems:"center"},A.a.createElement(L,{pr:"tiny"}),A.a.createElement(_.a,{user:e.user,linked:!1}),A.a.createElement(S.e,{as:"span",pl:"tiny"},A.a.createElement(F.b,{user:e.user}))),this.renderExpandIcon()):A.a.createElement(S.e,{display:"flex",justifyContent:"flex-end"},this.renderExpandIcon()))}},{key:"renderInlineEditor",value:function(e,n){var t=this,a=this.props,l=a.extraProps,i=a.queryResult,r=a.dismissModalFlow,s=l.commentType,o=l.containerId,u=this.state.inlineEditorReachedFullscreenHeight;return A.a.createElement(b.a,{editorKey:"inline-add-comment-".concat(s,"-").concat(o),ref:this.editorRef,placeholder:Object(v.plaintextTranslate)("Add a comment..."),startingContent:e,extraBodyProps:this.getInlineEditorBodyProps(),showPrimaryButton:u,primaryButtonDisabled:this.state.isInlineEditorEmpty,onPrimaryButtonClick:function(e){return r({content:e})},showTitleText:!1,onEditorContentHeightChange:u?undefined:function(e){return t.changeEditorHeight(e)},header:this.renderInlineEditorHeader(i.comment),navButton:u?"close":"none",onNavButtonClick:function(n){return r({shouldRefetch:Object(E.g)()&&n&&!K()(n,e)})},clearOnSubmit:!0,useLightWeightContentStyleToolBar:!0,saveDraft:function(e){return n(e)},onEditorMeaningfulChange:function(e){var n=e.isEmpty();u||(t.inlineEditorContent=e.toJSON()),t.state.isInlineEditorEmpty!==n&&t.setState({isInlineEditorEmpty:n})},stickyButtonInfo:this.getStickyButtonInfo()})}},{key:"renderStandardEditor",value:function(e,n){var t=this.props,a=t.extraProps,l=t.dismissModalFlow,i=t.queryResult,r=a.commentType,s=a.containerId;return A.a.createElement(b.a,{onPrimaryButtonClick:function(e){return l({content:e})},onNavButtonClick:function(n){return l({shouldRefetch:Object(E.g)()&&n&&!K()(n,e)})},editorKey:"add-comment-".concat(r,"-").concat(s),header:A.a.createElement(P,{comment:i.comment}),titleText:Object(v.plaintextTranslate)("Add Comments"),startingContent:e,placeholder:Object(v.plaintextTranslate)("Add a comment..."),saveDraft:function(e){return n(e)},clearOnSubmit:!0,useLightWeightContentStyleToolBar:!0})}},{key:"render",value:function(){var e=this,n=this.getStartingContent(),t=Object(q.e)(),a=this.props.extraProps,l=a.commentType,i=a.containerId,r=a.replyCommentId;return A.a.createElement(x.a,{containerId:i,commentType:l,replyToId:r},(function(a){return t?e.renderInlineEditor(n,a):e.renderStandardEditor(n,a)}))}}]),t}(A.a.Component);D.queries={onLoad:void 0!==f?f:f=a},D.displayName="CommentAddModal"},e0uH:function(e,n,t){"use strict";var a;!function(e){e.personal="personal",e.system="system",e.ama="ama",e.routed="routed",e.profile="profile",e.mass="mass"}(a||(a={})),n.a=a},eL6j:function(e,n,t){"use strict";t.d(n,"a",(function(){return _}));var a={};t.r(a),t.d(a,"default",(function(){return y}));var l=t("lwsE"),i=t.n(l),r=t("W8MJ"),s=t.n(r),o=t("7W2i"),u=t.n(o),d=t("a1gu"),c=t.n(d),m=t("Nsbk"),p=t.n(m),g=function(){var e={kind:"ScalarField",alias:null,name:"linkUrl",args:[{kind:"Literal",name:"name",value:"spaces_faq"}],storageKey:'linkUrl(name:"spaces_faq")'},n={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"TribeFAQLinkQuery",type:"QueryRoot",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"network",storageKey:null,args:null,concreteType:"Network",plural:!1,selections:[e]}]}]},operation:{kind:"Operation",name:"TribeFAQLinkQuery",argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"network",storageKey:null,args:null,concreteType:"Network",plural:!1,selections:[e,n]},n]}]},params:{operationKind:"query",name:"TribeFAQLinkQuery",id:"54df9f87a0bd65dc39fafadc2616a860cd82373600f34a508f87f0b820fbc0b0",text:null,metadata:{}}}}();g.hash="4f402d63abb7af3ae97befa39e3d42c1";var f,y=g,b=t("D5Zh"),v=t("jufJ"),h=t("zLpq"),k=t("q1tI"),S=t.n(k);function F(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=p()(e);if(n){var l=p()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return c()(this,t)}}var _=function(e){u()(t,e);var n=F(t);function t(){return i()(this,t),n.apply(this,arguments)}return s()(t,[{key:"render",value:function(){return S.a.createElement(S.a.Fragment,null,S.a.createElement(b.a,{query:t.queries.getLinkUrl},(function(e){var n,t=e.data;if(e.loading)return null;var a=null===(n=t.viewer.network)||void 0===n?void 0:n.linkUrl;return S.a.createElement(h.a,{href:a,navStyle:"system_browser",text:Object(v.plaintextTranslate)("Learn more"),chevronSuffix:"right"})})))}}]),t}(S.a.Component);_.queries={getLinkUrl:void 0!==f?f:f=a},_.displayName="TribeFAQLink"},gDf8:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var a=t("x43M"),l=(new Map([[a.a.generic,1],[a.a.insufficient_permissions,3],[a.a.title_and_content_empty,4],[a.a.title_empty,5],[a.a.content_empty,6],[a.a.title_too_long,7],[a.a.content_too_long,8],[a.a.rate_limit_exceeded,9],[a.a.user_banned,10],[a.a.user_edit_blocked,11],[a.a.requires_external_links,12],[a.a.requires_quora_links,13],[a.a.requires_text,14],[a.a.tribe_does_not_accept_posts,15]]),new Map([[1,a.a.generic],[3,a.a.insufficient_permissions],[4,a.a.title_and_content_empty],[5,a.a.title_empty],[6,a.a.content_empty],[7,a.a.title_too_long],[8,a.a.content_too_long],[9,a.a.rate_limit_exceeded],[10,a.a.user_banned],[11,a.a.user_edit_blocked],[12,a.a.requires_external_links],[13,a.a.requires_quora_links],[14,a.a.requires_text],[15,a.a.tribe_does_not_accept_posts]]));function i(e){if(null===e)return null;if("number"===typeof e){var n=l.get(e);if(!n)throw new Error("".concat(e," is not a valid TribePostErrorCodes"));return n}return"string"===typeof e?a.a[e]:e}},gQkS:function(e,n,t){"use strict";t.r(n);var a={};t.r(a),t.d(a,"default",(function(){return r}));var l={};t.r(l),t.d(l,"default",(function(){return u}));var i=function(){var e=[{kind:"LocalArgument",name:"disclaimer",type:"JSONString!",defaultValue:null}],n=[{kind:"Variable",name:"disclaimer",variableName:"disclaimer"}],t={kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"disclaimer",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"AnswerDisclaimerEditorModal_userSetDisclaimer_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"userSetDisclaimer",storageKey:null,args:n,concreteType:"UserSetDisclaimer",plural:!1,selections:[t,{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[a]}]}]}]},operation:{kind:"Operation",name:"AnswerDisclaimerEditorModal_userSetDisclaimer_Mutation",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"userSetDisclaimer",storageKey:null,args:n,concreteType:"UserSetDisclaimer",plural:!1,selections:[t,{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[a,l]},l]}]}]},params:{operationKind:"mutation",name:"AnswerDisclaimerEditorModal_userSetDisclaimer_Mutation",id:"6f8961f8d12cc1d61557a133f5b3ce89eb1563872ceb8bc3cdd034cbb8f0dfbb",text:null,metadata:{}}}}();i.hash="1484f9a4e3dd72877f755daa263d94a0";var r=i,s=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},t=[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[e,n,{kind:"LinkedField",alias:null,name:"network",storageKey:null,args:null,concreteType:"Network",plural:!1,selections:[e,n,{kind:"ScalarField",alias:null,name:"linkUrl",args:[{kind:"Literal",name:"name",value:"disclaimer"}],storageKey:'linkUrl(name:"disclaimer")'}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"AnswerDisclaimerEditorModalQuery",type:"QueryRoot",metadata:null,argumentDefinitions:[],selections:t},operation:{kind:"Operation",name:"AnswerDisclaimerEditorModalQuery",argumentDefinitions:[],selections:t},params:{operationKind:"query",name:"AnswerDisclaimerEditorModalQuery",id:"b6c8de1fdf16e25af7a96cfc262f6ef08c351f96e85ee226465becf5d1acf840",text:null,metadata:{}}}}();s.hash="178ebd9d528caacd00892e757c7a1d39";var o,u=s,d=t("zm58"),c=t("jufJ"),m=t("AFGi"),p=t("LNH1"),g=t("RA+f"),f=t("VyO/"),y=t("q1tI"),b=t.n(y);!function(e){e.success="success",e.invalid_disclaimer="invalid_disclaimer"}(o||(o={}));var v,h,k=o,S=function(e){var n=null===e||void 0===e?void 0:e.disclaimer;return n?JSON.parse(n):Object(m.h)()},F=function(e){var n=e.queryResult.viewer.network.linkUrl;return b.a.createElement(c.Translate,null,"You may create a personal disclaimer to be displayed below your answers. For more information, see"," ",b.a.createElement(g.p,{href:n,navStyle:"system_browser"},"What are disclaimers on Quora?"))};F.displayName="ModalHeader";var _=function T(e){var n,t,a,l=e.dismissModalFlow,i=e.extraProps,r=e.queryResult,s=Object(p.h)().setToast,o=null!==(n=null===i||void 0===i?void 0:i.titleText)&&void 0!==n?n:Object(c.plaintextTranslate)("Create Your Disclaimer"),u=null!==(t=null===i||void 0===i?void 0:i.primaryButtonText)&&void 0!==t?t:Object(c.plaintextTranslate)("Create Disclaimer"),g=null!==(a=null===i||void 0===i?void 0:i.subtitleText)&&void 0!==a?a:b.a.createElement(F,{queryResult:r});return b.a.createElement(d.a,{editorKey:"answerDisclaimer",primaryButtonText:u,onPrimaryButtonClick:function(e){if(Object(m.q)(e))l();else{var n=JSON.stringify(e);Object(f.c)({mutation:T.mutations.setDisclaimer,variables:{disclaimer:n},onCompleted:function(e){if(e){var t=e.userSetDisclaimer.status;t===k.success?l({disclaimer:n}):t===k.invalid_disclaimer?s.error(Object(c.plaintextTranslate)("This disclaimer is not allowed. Please do not include any embedded or unsafe links.")):s.genericError()}}})}},onNavButtonClick:function(){l()},titleText:o,startingContent:S(i),hasPadding:!0,subtitleText:g})};_.displayName="AnswerDisclaimerEditorModal",_.queries={onLoad:void 0!==v?v:v=l},_.mutations={setDisclaimer:void 0!==h?h:h=a};n["default"]=_},"gUk/":function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return b}));var a=t("lwsE"),l=t.n(a),i=t("W8MJ"),r=t.n(i),s=t("7W2i"),o=t.n(s),u=t("a1gu"),d=t.n(u),c=t("Nsbk"),m=t.n(c),p=t("q1tI"),g=t.n(p),f=t("zm58");function y(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=m()(e);if(n){var l=m()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return d()(this,t)}}var b=function(e){o()(t,e);var n=y(t);function t(){return l()(this,t),n.apply(this,arguments)}return r()(t,[{key:"render",value:function(){var e=this.props,n=e.extraProps,t=e.dismissModalFlow;return g.a.createElement(f.a,Object.assign({onPrimaryButtonClick:function(e){return t({content:e})},onNavButtonClick:function(){return t({})}},n))}}]),t}(p.Component)},jJjK:function(e,n,t){"use strict";t.d(n,"a",(function(){return d}));var a=t("QILm"),l=t.n(a),i=t("6sb5"),r=t("cBSy"),s=t("RA+f"),o=t("q1tI"),u=t.n(o);function d(e){var n=e.disclaimers,t=e.itemMb,a=void 0===t?"small":t,o=l()(e,["disclaimers","itemMb"]);return u.a.createElement(r.a,null,n.map((function(e){return e.text?u.a.createElement(s.j,{key:e.id,mb:a},u.a.createElement(i.a,null),u.a.createElement(s.e,{ml:"small"},u.a.createElement(s.s,o,e.text))):null})))}},kWkq:function(e,n,t){"use strict";var a=t("jufJ"),l=t("LNH1"),i=t("q1tI"),r=t.n(i),s=function(e){var n=e.errorType,t=e.status,i=n;return t&&(i=t),i?r.a.createElement(a.Translate,null,r.a.createElement(a.EnumTranslate,{value:i},{add_answer_exception:l.a,no_permission_on_question:"You do not have permission to answer this question.",no_permission_on_answer:"You do not have permission to edit this answer.",question_deleted:"This question has been deleted.",add_answer_throttled:"You have reached your answer limit for today.",edit_answer_throttled:"You have reached your answer limit for today.",no_empty_answers:"Your answer cannot be blank.",answer_too_long:"Your answer is too long.",add_answer_block:"Your Draft has been saved. Please confirm your email before submitting an answer.",one_answer_per_question:"You may only write one answer for each question, but you can edit your existing answer.",one_answer_per_question_tribe:"This cannot be approved because this person has already written an answer for the question.",existing_pending_answer:"You already have a pending answer to this question.",answer_contains_unready_videos:"Submit your answer from the device the video was originally created, or delete the video to continue submission.",question_hidden_from_tribe:"This question has been removed from the Space.",business_account_unapproved:"Your business account is pending approval. You do not have permission to answer this question until your account is approved."})):null};s.displayName="AnswerMutationErrorMessage",n.a=s},lkOG:function(e,n,t){"use strict";t.d(n,"a",(function(){return a})),t.d(n,"b",(function(){return p})),t.d(n,"c",(function(){return g}));var a,l=t("lSNA"),i=t.n(l),r=t("jufJ"),s=t("R+um"),o=t("q1tI"),u=t.n(o),d=t("rwXj");!function(e){e[e.none=0]="none",e[e.tooShortQuestion=1]="tooShortQuestion",e[e.improperQuestion=2]="improperQuestion",e[e.directQuestion=3]="directQuestion",e[e.anyoneQuestion=4]="anyoneQuestion",e[e.canAnyoneQuestion=5]="canAnyoneQuestion",e[e.badPunctuation=6]="badPunctuation",e[e.surveyQuestion=7]="surveyQuestion",e[e.whoCanQuestion=8]="whoCanQuestion",e[e.badSurveyPhrase=9]="badSurveyPhrase",e[e.wrongLanguage=10]="wrongLanguage",e[e.tooLongQuestion=11]="tooLongQuestion",e[e.missingQuestionMark=12]="missingQuestionMark",e[e.missingInvertedQuestionMark=13]="missingInvertedQuestionMark",e[e.wrongScript=71]="wrongScript",e[e.userBlocked=101]="userBlocked",e[e.questionExists=102]="questionExists",e[e.a2aFailure=103]="a2aFailure",e[e.invalidSource=105]="invalidSource",e[e.unconfirmedEmailUserRateLimit=106]="unconfirmedEmailUserRateLimit",e[e.needsEmailConfirmation=107]="needsEmailConfirmation",e[e.seededQuestionDNE=109]="seededQuestionDNE",e[e.seededQuestionTooSimilar=110]="seededQuestionTooSimilar",e[e.translatedToTranslation=111]="translatedToTranslation",e[e.shouldBeTribeSubmission=112]="shouldBeTribeSubmission",e[e.shouldBeTribeContentQueueItem=113]="shouldBeTribeContentQueueItem"}(a||(a={}));var c="This question should be more general. Try starting your question with 'What is...', 'How do I...' or 'Why does...'",m="This question should be a complete sentence. Try starting your question with 'What is...', 'How do I...' or 'Why does...'",p=function(e,n,t,l,o){var d;return e||!n?t?Object(r.plaintextTranslate)(u.a.createElement(u.a.Fragment,null,"You asked ",u.a.createElement(s.b,{user:t})," this question. You will be notified when they answer it.")):Object(r.plaintextTranslate)("Successfully asked question."):Object(r.plaintextTranslate)(u.a.createElement(r.EnumTranslate,{value:n},(d={},i()(d,a.tooShortQuestion,"This question needs more detail. Add more information to ask a clear question, written as a complete sentence."),i()(d,a.tooLongQuestion,o?u.a.createElement(u.a.Fragment,null,"This question should be shorter. Please rephrase the question to be a concise, easily understood question with fewer than ",u.a.createElement(r.FormattedNumber,{value:o}),u.a.createElement(r.PluralTranslate,{value:o},{ONE:" character.",OTHER:" characters."})):"This question should be shorter. Please rephrase the question to be more concise."),i()(d,a.improperQuestion,m),i()(d,a.directQuestion,m),i()(d,a.anyoneQuestion,c),i()(d,a.canAnyoneQuestion,c),i()(d,a.badPunctuation,"This question has extra question marks. Rewrite this question to end with single question mark."),i()(d,a.surveyQuestion,c),i()(d,a.whoCanQuestion,c),i()(d,a.badSurveyPhrase,m),i()(d,a.missingQuestionMark,"This question should end with a question mark."),i()(d,a.missingInvertedQuestionMark,"This question should include an inverted question mark."),i()(d,a.userBlocked,"You have been blocked from adding questions."),i()(d,a.invalidSource,"The source should be a valid link."),i()(d,a.unconfirmedEmailUserRateLimit,"You have reached your question adding limit."),i()(d,a.needsEmailConfirmation,"Please confirm your email before adding this question."),i()(d,a.seededQuestionDNE,"Failed to add question."),i()(d,a.seededQuestionTooSimilar,"Failed to add question."),i()(d,a.translatedToTranslation,"This question already exists as a translation of another question."),i()(d,a.shouldBeTribeSubmission,"Successfully submitted to Space."),i()(d,a.shouldBeTribeContentQueueItem,"Successfully added this question to the queue."),i()(d,a.questionExists,"This question has already been asked."),i()(d,a.a2aFailure,"Could not ask this user to answer this question."),i()(d,a.wrongScript,l?u.a.createElement(u.a.Fragment,null,"This question should be in ",u.a.createElement(r.LanguageName,{languageCode:l,nativeName:!0})):"This question is in the wrong language."),d)))},g=function(e,n){var t;return e||!n?Object(r.plaintextTranslate)("Successfully shared the link."):Object(r.plaintextTranslate)(u.a.createElement(r.EnumTranslate,{value:n},(t={},i()(t,d.a.unconfirmed_email,"Please confirm your email before adding a link."),i()(t,d.a.no_permission,"You do not have permission to add a link."),i()(t,d.a.link_invalid,"This link is invalid. Enter a valid URL."),t)))}},nPxv:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return k}));var a=t("lwsE"),l=t.n(a),i=t("W8MJ"),r=t.n(i),s=t("7W2i"),o=t.n(s),u=t("a1gu"),d=t.n(u),c=t("Nsbk"),m=t.n(c),p=t("jufJ"),g=t("7r18"),f=t("RA+f"),y=t("nwxp"),b=t("q1tI"),v=t.n(b);function h(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=m()(e);if(n){var l=m()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return d()(this,t)}}var k=function(e){o()(t,e);var n=h(t);function t(){return l()(this,t),n.apply(this,arguments)}return r()(t,[{key:"render",value:function(){var e,n,t=this.props.dismissModalFlow,a=null!==(e=null===(n=this.props.extraProps)||void 0===n?void 0:n.disabledTooltipText)&&void 0!==e?e:Object(p.plaintextTranslate)("To enable, change the Content types setting above.");return v.a.createElement(g.f,{navButton:Object(y.b)()?"back":"close",navButtonProps:{onClick:function(){return t()}},extraBodyProps:{display:"flex"}},v.a.createElement(f.s,{fontSize:"small"},a))}}]),t}(v.a.Component);k.displayName="TribeDisabledContentTypeInfoModal"},pl0F:function(e,n,t){"use strict";var a={};t.r(a),t.d(a,"default",(function(){return o}));var l,i=t("lSNA"),r=t.n(i),s={kind:"Fragment",name:"ContentMonetizationDisclaimer_tribe",type:"Tribe",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"producerBundleStatus",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"defaultAccessOption",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"producerDirectStatus",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"adRevenueShareStatus",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanContribute",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanModerate",args:null,storageKey:null}],hash:"43d1670873db8f19d9b9a49c6c99a35c"},o=s,u=t("IHqW"),d=t("jJjK"),c=t("jufJ"),m=t("RA+f"),p=t("VyO/"),g=t("q1tI"),f=t.n(g),y=t("BppE"),b=t("QOfV"),v=function(e){var n,t=e.accessOptionType;return f.a.createElement(c.ForceEnglishForCopyDrafting,null,f.a.createElement(c.EnumTranslate,{value:t},(n={},r()(n,y.a.free,"Content added to this Space can be accessed by everyone by default, but may be reserved for subscribers only by an Admin."),r()(n,y.a.paid_only,"Content added to this Space is reserved for subscribers by default, but may be made accessible to everyone by an Admin."),r()(n,y.a.smart_distribution,"Content added to this Space is reserved for subscribers by default, but may be made accessible to everyone by an Admin."),n)))};v.displayName="ContentMonetizationDisclaimerText";var h=function(e){var n,t=e.contentType,a=e.tribe,l=e.variant,i=void 0===l?"modal":l,r=a.producerBundleStatus===b.a.enabled||a.producerDirectStatus===b.a.enabled,s=a.viewerCanContribute||a.viewerCanModerate,o=a.adRevenueShareStatus===b.a.enabled,p=[{id:1,text:f.a.createElement(c.ForceEnglishForCopyDrafting,null,"This ",f.a.createElement(u.a,{contentType:t})," might generate",o&&r?" revenue ":r?" subscription revenue ":" ad revenue ","for the Space, which will be paid to and be managed by the owner of the Space.")}];r&&p.push({id:2,text:f.a.createElement(c.ForceEnglishForCopyDrafting,null,"The Space might reserve this"," ",f.a.createElement(u.a,{contentType:t})," for subscribers only.")});var g=f.a.createElement(m.s,{mb:"small",bold:"modal"===i,medium:"banner"===i},s?f.a.createElement(c.ForceEnglishForCopyDrafting,null,"Monetization and access"):f.a.createElement(c.ForceEnglishForCopyDrafting,null,"If your ",f.a.createElement(u.a,{contentType:t})," is approved:")),h=f.a.createElement(m.e,{mt:"banner"===i?"medium":undefined},s?f.a.createElement(f.a.Fragment,null,(o||r)&&f.a.createElement(m.s,{fontSize:"banner"===i?"small":undefined},f.a.createElement(c.ForceEnglishForCopyDrafting,null,"This Space may earn money from this"," ",f.a.createElement(u.a,{contentType:t}),". Earnings are paid to and are managed by the owner of the Space.")),r&&f.a.createElement(m.s,{mt:o?"medium":"small",fontSize:"banner"===i?"small":undefined},f.a.createElement(v,{accessOptionType:null!==(n=a.defaultAccessOption)&&void 0!==n?n:y.a.free}))):f.a.createElement(d.a,{itemMb:"tiny",disclaimers:p,fontSize:"banner"===i?"small":undefined})),k=f.a.createElement(f.a.Fragment,null,f.a.createElement(m.e,{mt:"medium"},f.a.createElement(m.s,{fontSize:"banner"===i?"small":undefined},f.a.createElement(m.p,{href:"https://help.quora.com/hc/en-us/articles/360061760731"},f.a.createElement(c.ForceEnglishForCopyDrafting,null,"Learn more about followers and content access")))),s&&f.a.createElement(m.e,{mt:"medium"},f.a.createElement(m.s,{fontSize:"banner"===i?"small":undefined},f.a.createElement(m.p,{href:"https://help.quora.com/hc/en-us/articles/360060059331"},f.a.createElement(c.ForceEnglishForCopyDrafting,null,"Learn more about Space permissions")))));return f.a.createElement(f.a.Fragment,null,"modal"===i&&g,h,k)};h.displayName="ContentMonetizationDisclaimer",h.fragments={tribe:void 0!==l?l:l=a};n.a=Object(p.b)(h)},"ptJ+":function(e,n,t){"use strict";var a={};t.r(a),t.d(a,"default",(function(){return y}));var l,i=t("lwsE"),r=t.n(i),s=t("W8MJ"),o=t.n(s),u=t("7W2i"),d=t.n(u),c=t("a1gu"),m=t.n(c),p=t("Nsbk"),g=t.n(p),f={kind:"Fragment",name:"CommentQTextExpandable_comment",type:"Comment",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null}]}],hash:"9eaf15730308054629245c73bf682a8d"},y=f,b=t("AFGi"),v=t("Kh5g"),h=t("3wQG"),k=t("RA+f"),S=t("QLaP"),F=t.n(S),_=t("VyO/"),T=t("q1tI"),w=t.n(T);function E(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=g()(e);if(n){var l=g()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return m()(this,t)}}var C=function(e){d()(t,e);var n=E(t);function t(e){var a;return r()(this,t),(a=n.call(this,e)).state={isExpanded:!1},a}return o()(t,[{key:"render",value:function(){var e=this,n=this.props,t=n.comment,a=t.content,l=t.tribe,i=n.charLimit,r=void 0===i?305:i,s=n.disableFullWidthImages,o=null===l||void 0===l?void 0:l.isSensitive;F()(null!==a,"missing content for comment");var u=JSON.parse(a);return Object(b.g)(u)<r||this.state.isExpanded?w.a.createElement(v.a,{qt:u,isSensitive:o,disableFullWidthImages:s}):w.a.createElement(k.j,null,w.a.createElement(k.f,{onClick:function(){e.setState({isExpanded:!0})},underlineHover:!1},w.a.createElement(h.f,{qt:u,lineLimit:3,isSensitive:o,disableFullWidthImages:s})))}}]),t}(w.a.Component);C.fragments={comment:void 0!==l?l:l=a},C.displayName="CommentQTextExpandable";n.a=Object(_.b)(C)},qU4x:function(e,n,t){"use strict";var a={};t.r(a),t.d(a,"default",(function(){return r}));var l,i={kind:"Fragment",name:"ContentMonetizationDisclaimerButtonWrapper_tribe",type:"Tribe",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null}],hash:"6dc1eaf3da93d3a38cb7d70ee4db47c4"},r=i,s=t("OMLc"),o=t("Iu3b"),u=t("VyO/"),d=t("nwxp"),c=t("q1tI"),m=t.n(c);function p(e){return Object(d.g)()?{platform:"native",name:"monetization",onClick:e}:{platform:"web",name:"monetization",icon:m.a.createElement(s.b,{name:"Money"}),onClick:e}}var g=function(e){var n=e.children,t=e.tribe;return m.a.createElement(o.a,{standaloneModalProps:{containerProps:{mobileHeight:400},modalProps:{name:"ContentMonetizationDisclaimerModal",queryVariables:{tribeId:t.tribeId},extraProps:{contentType:"Post"}}}},(function(e){var t=e.openStandaloneModal;return n({stickyButtonInfo:p(t)})}))};g.displayName="ContentMonetizationDisclaimerButtonWrapper",g.fragments={tribe:void 0!==l?l:l=a};n.a=Object(u.b)(g)},rwXj:function(e,n,t){"use strict";var a;!function(e){e.unconfirmed_email="unconfirmed_email",e.no_permission="no_permission",e.link_invalid="link_invalid",e.none="none"}(a||(a={})),n.a=a},sI7B:function(e,n,t){"use strict";var a={};t.r(a),t.d(a,"default",(function(){return y}));var l=t("lwsE"),i=t.n(l),r=t("W8MJ"),s=t.n(r),o=t("7W2i"),u=t.n(o),d=t("a1gu"),c=t.n(d),m=t("Nsbk"),p=t.n(m),g=function(){var e=[{kind:"LocalArgument",name:"containerId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"commentType",type:"ContentTypes!",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null},{kind:"LocalArgument",name:"replyToId",type:"BigInt",defaultValue:null}],n=[{kind:"Variable",name:"commentType",variableName:"commentType"},{kind:"Variable",name:"containerId",variableName:"containerId"},{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"replyToId",variableName:"replyToId"}],t={kind:"ScalarField",alias:null,name:"commentDraftContent",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"CommentAddDraftMutation_commentDraftAdd_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"commentDraftAdd",storageKey:null,args:n,concreteType:"CommentDraftAdd",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"commentable",storageKey:null,args:null,concreteType:null,plural:!1,selections:[t]}]}]},operation:{kind:"Operation",name:"CommentAddDraftMutation_commentDraftAdd_Mutation",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"commentDraftAdd",storageKey:null,args:n,concreteType:"CommentDraftAdd",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"commentable",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},t,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]}]},params:{operationKind:"mutation",name:"CommentAddDraftMutation_commentDraftAdd_Mutation",id:"fa07d1702422852d93ad04022278c374d63952ee19410d61946ddba070f05863",text:null,metadata:{}}}}();g.hash="8bd5342aadcb5799c7e5fd666cce5849";var f,y=g,b=t("VyO/"),v=t("q1tI"),h=t.n(v);function k(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=p()(e);if(n){var l=p()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return c()(this,t)}}var S=function(e){u()(t,e);var n=k(t);function t(){return i()(this,t),n.apply(this,arguments)}return s()(t,[{key:"render",value:function(){var e=this.props,n=e.containerId,a=e.commentType,l=e.replyToId,i=e.children;return h.a.createElement(b.a,{mutation:t.mutations.saveDraft},(function(e){return i((function(t){return e({variables:{containerId:n,commentType:a,replyToId:l||null,content:JSON.stringify(t)}})}))}))}}]),t}(h.a.Component);S.mutations={saveDraft:void 0!==f?f:f=a},S.displayName="CommentAddDraftMutation";n.a=S},sffC:function(e,n,t){"use strict";t.r(n);var a={};t.r(a),t.d(a,"default",(function(){return v}));var l={};t.r(l),t.d(l,"default",(function(){return F}));var i=t("lwsE"),r=t.n(i),s=t("W8MJ"),o=t.n(s),u=t("PJYZ"),d=t.n(u),c=t("7W2i"),m=t.n(c),p=t("a1gu"),g=t.n(p),f=t("Nsbk"),y=t.n(f),b=function(){var e=[{kind:"LocalArgument",name:"recipientUid",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null}],n=[{kind:"LinkedField",alias:null,name:"threadCreate",storageKey:null,args:[{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"recipientUid",variableName:"recipientUid"}],concreteType:"ThreadCreate",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"UserMessageModal_threadCreate_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:n},operation:{kind:"Operation",name:"UserMessageModal_threadCreate_Mutation",argumentDefinitions:e,selections:n},params:{operationKind:"mutation",name:"UserMessageModal_threadCreate_Mutation",id:"6e52e64ad47417185d6e9ed1111ea6e5c12352e76b99947bf0aa9f6993f6e5c6",text:null,metadata:{}}}}();b.hash="ddf9e3345e97e8f76c4348cce4bf515d";var v=b,h=function(){var e=[{kind:"LocalArgument",name:"recipientUid",type:"BigInt!",defaultValue:null}],n=[{kind:"Variable",name:"uid",variableName:"recipientUid"}],t={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},i=[l,a,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}];return{kind:"Request",fragment:{kind:"Fragment",name:"UserMessageModalQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:n,concreteType:"User",plural:!1,selections:[t,{kind:"FragmentSpread",name:"UserName_user",args:null},{kind:"FragmentSpread",name:"UserPhoto_user",args:null}]}]},operation:{kind:"Operation",name:"UserMessageModalQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:n,concreteType:"User",plural:!1,selections:[t,a,l,{kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:i},{kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:i},{kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]}]}]},params:{operationKind:"query",name:"UserMessageModalQuery",id:"4254dcb0bef6825585ad646c3b31994cd93c9d5f70977658821d883064a15f80",text:null,metadata:{}}}}();h.hash="c4835464356c2af38372775325346838";var k,S,F=h,_=t("jufJ"),T=t("WBlH"),w=t("OMLc"),E=t("7r18"),C=t("AFGi"),K=t("EreF"),O=t("LJFN"),A=t("zWiD"),x=t("LNH1"),M=t("RA+f"),R=t("R+um"),q=t("r+vq"),I=t("VyO/"),L=t("yju1"),P=t("nwxp"),D=t("q1tI"),j=t.n(D),N=t("teWg");function B(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=y()(e);if(n){var l=y()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return g()(this,t)}}var Q=function(e){m()(t,e);var n=B(t);function t(e){var a;return r()(this,t),(a=n.call(this,e)).editorRef=void 0,a.editorRef=j.a.createRef(),a.state={editorHasContent:!1},a.handleComposerMeaningfulChange=a.handleComposerMeaningfulChange.bind(d()(a)),a}return o()(t,[{key:"componentDidMount",value:function(){this.setupEditor()}},{key:"setupEditor",value:function(){Object(P.g)()&&Object(L.a)("setupEditor",{hasDraft:!1})}},{key:"threadCreateMutation",value:function(e,n){var a=this.props,l=a.extraProps,i=a.dismissModalFlow,r=l.recipientUid,s={mutation:t.mutations.threadCreate,variables:{recipientUid:r,content:JSON.stringify(e)},setToast:n};return Object(I.c)(s).then((function(e){var t,a=(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.threadCreate).status;if(a===N.a.success)i({setSuccessToast:!0});else if(Object.values(N.a).includes(a)){var l=j.a.createElement(T.a,{status:a});n.error(l)}else n.genericError()}))}},{key:"handleSubmit",value:function(e){var n,t=null===(n=this.editorRef.current)||void 0===n?void 0:n.save();t?Object(C.q)(t)?e.error(Object(_.plaintextTranslate)("Please finish your message before sending.")):this.threadCreateMutation(t,e):e.genericError()}},{key:"handleComposerMeaningfulChange",value:function(e){e&&e.isEmpty&&this.setState({editorHasContent:!e.isEmpty()})}},{key:"renderRecipientField",value:function(){var e=this.props.queryResult.user;return e?j.a.createElement(M.j,{mx:"large",alignItems:"center"},j.a.createElement(M.e,{px:6,py:1,bg:"gray_light",borderRadius:"pill"},j.a.createElement(A.a,{bold:!0,color:"gray"},j.a.createElement(_.Translate,null,"To: "))),j.a.createElement(M.n,{ml:"small"},j.a.createElement(q.a,{user:e,size:24,shouldShowBadge:!0})),j.a.createElement(M.e,{ml:"tiny"},j.a.createElement(R.b,{user:e}))):null}},{key:"render",value:function(){var e=this,n=this.props,t=n.dismissModalFlow,a=n.queryResult.user,l=this.props.extraProps.initialContent;if(!a)throw Error("User info is required for UserMessageModal.");var i=j.a.createElement(M.n,{alignItems:"center"},Object(_.plaintextTranslate)("Send"),j.a.createElement(w.b,{name:"Send",size:20,ml:"tiny",color:"white"}));return j.a.createElement(x.b,null,(function(n){return j.a.createElement(E.f,{header:j.a.createElement(E.m,null,j.a.createElement(_.Translate,null,"New Message")),hasPadding:!1,navButtonProps:{onClick:function(){return t()}},primaryButtonProps:{text:i,onClick:function(){return e.handleSubmit(n)},disabled:!e.state.editorHasContent},secondaryButtonProps:{text:Object(_.plaintextTranslate)("Cancel"),onClick:function(){return t()}}},e.renderRecipientField(),j.a.createElement(M.e,{my:"medium",mx:Object(P.g)()?"small":"large",maxHeight:Object(P.b)()?"400px":undefined,overflowY:Object(P.b)()?"auto":undefined,borderAll:Object(P.b)(),borderRadius:"small"},j.a.createElement(K.a,{ref:e.editorRef,placeholder:Object(_.plaintextTranslate)("Type a message..."),content:null!==l&&void 0!==l?l:Object(C.h)(),focusOnLoad:!0,toolbarOnWeb:!0,toolbarOnMobile:!0,commandsToDisable:["horizontal-rule","video"],onMeaningfulChange:e.handleComposerMeaningfulChange,settingOverrides:{lightWeightContentToolbar:Object(O.d)()}})))}))}}]),t}(j.a.Component);Q.queries={onLoad:void 0!==k?k:k=l},Q.mutations={threadCreate:void 0!==S?S:S=a},Q.displayName="UserMessageModal";n["default"]=Q},teWg:function(e,n,t){"use strict";var a;!function(e){e.permission_denied="permission_denied",e.permission_rate_limited="permission_rate_limited",e.success="success",e.suspected_spam="suspected_spam",e.unconfirmed_email="unconfirmed_email",e.unsupported_characters="unsupported_characters",e.disabled_inbox="disabled_inbox",e.daily_rate_limit_exceeded="daily_rate_limit_exceeded",e.no_access="no_access"}(a||(a={})),n.a=a},ttvG:function(e,n,t){"use strict";t.r(n),t.d(n,"editCredentialsFlowTransition",(function(){return b}));var a=t("lwsE"),l=t.n(a),i=t("W8MJ"),r=t.n(i),s=t("7W2i"),o=t.n(s),u=t("a1gu"),d=t.n(u),c=t("Nsbk"),m=t.n(c),p=t("jQ0q"),g=t("q1tI"),f=t.n(g);function y(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=m()(e);if(n){var l=m()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return d()(this,t)}}var b=function(e){var n=e.flowData;(0,e.showNextModal)({modalProps:{name:n.nextModal}})},v=function(e){o()(t,e);var n=y(t);function t(){return l()(this,t),n.apply(this,arguments)}return r()(t,[{key:"render",value:function(){var e=this.props,n=e.children,t=e.businessProfileUid,a=e.handleEditCredentials;return f.a.createElement(p.a,{modalFlowProps:{transitionName:"editCredentialsFlowTransition",containerProps:{easyDismissEnabled:!0},initialFlowData:{nextModal:"EditCredentialsProfilePickerStep",writeOnBehalfUid:t},initialModalProps:{name:"EditCredentialsProfilePickerStep"},postDismissCallback:function(e){if(e){var n=e,t=n.useBusinessCredentialFlow,l=n.businessUid,i=n.businessCredential,r=n.businessName,s=n.businessLogoUrl;t&&l===undefined||a({useBusinessCredentialFlow:t,businessUid:l,businessCredential:i,businessName:r,businessLogoUrl:s})}}}},(function(e){var t=e.openModalFlow;return n({openModalFlow:t})}))}}]),t}(f.a.Component);v.displayName="EditCredentialsFlow",n["default"]=v},"ui+i":function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var a=t("RIqP"),l=t.n(a),i=t("AFGi");function r(e,n){var t,a,r,s,o;return(null===e||void 0===e||null===(t=e.sections)||void 0===t||null===(a=t[0])||void 0===a||null===(r=a.spans)||void 0===r||null===(s=r[0])||void 0===s||null===(o=s.text)||void 0===o?void 0:o.length)>0&&(e.sections[0].type="heading"),{sections:[].concat(l()(Object(i.q)(e)?[]:e.sections),l()(n.sections))}}},vf4k:function(e,n,t){"use strict";t.r(n);var a={};t.r(a),t.d(a,"default",(function(){return h}));var l={};t.r(l),t.d(l,"default",(function(){return F}));var i={};t.r(i),t.d(i,"default",(function(){return R}));var r=t("lwsE"),s=t.n(r),o=t("W8MJ"),u=t.n(o),d=t("PJYZ"),c=t.n(d),m=t("7W2i"),p=t.n(m),g=t("a1gu"),f=t.n(g),y=t("Nsbk"),b=t.n(y),v=function(){var e=[{kind:"LocalArgument",name:"tribeId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"recipientTypes",type:"[TribeLevels!]!",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null}],n=[{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"recipientTypes",variableName:"recipientTypes"},{kind:"Variable",name:"tribeId",variableName:"tribeId"}],t={kind:"ScalarField",alias:null,name:"success",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"errorMsg",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"recipientCount",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},o=[s,r,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}];return{kind:"Request",fragment:{kind:"Fragment",name:"TribeGroupMessageModal_tribeGroupMessageSend_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"tribeGroupMessageSend",storageKey:null,args:n,concreteType:"TribeGroupMessageSend",plural:!1,selections:[t,a,l,{kind:"LinkedField",alias:null,name:"failedRecipients",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[i,{kind:"FragmentSpread",name:"UserName_user",args:null}]}]}]},operation:{kind:"Operation",name:"TribeGroupMessageModal_tribeGroupMessageSend_Mutation",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"tribeGroupMessageSend",storageKey:null,args:n,concreteType:"TribeGroupMessageSend",plural:!1,selections:[t,a,l,{kind:"LinkedField",alias:null,name:"failedRecipients",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[i,r,s,{kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:o},{kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:o},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]}]}]}]},params:{operationKind:"mutation",name:"TribeGroupMessageModal_tribeGroupMessageSend_Mutation",id:"58e5bf6956cd7e9b954abf68a000c60315d9cd937ca6093a9cb420ee0d24a217",text:null,metadata:{}}}}();v.hash="119a0a2fdc4101c48393ec3849139900";var h=v,k=function(){var e=[{kind:"LocalArgument",name:"tribeId",type:"BigInt!",defaultValue:null}],n=[{kind:"Variable",name:"tribeId",variableName:"tribeId"}],t={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"nameString",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"TribeGroupMessageModalQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:n,concreteType:"Tribe",plural:!1,selections:[t,a,l,{kind:"FragmentSpread",name:"TribeGroupMessageRecipientLabel_tribe",args:null}]}]},operation:{kind:"Operation",name:"TribeGroupMessageModalQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:n,concreteType:"Tribe",plural:!1,selections:[t,a,l,{kind:"ScalarField",alias:null,name:"numContributors",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"numAdmins",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"numModerators",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerPermission",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]},params:{operationKind:"query",name:"TribeGroupMessageModalQuery",id:"1ba88f4f1482d15bb5900c49e320555bca39b412693bbfdc3470664404be3d30",text:null,metadata:{}}}}();k.hash="91855ceaf1082f0490850f61bb5d3ecc";var S,F=k,_=t("6sb5"),T=t("jufJ"),w=t("7r18"),E=t("AFGi"),C=t("EreF"),K=t("qygo"),O=t("LNH1"),A=t("RA+f"),x=t("WxC/"),M={kind:"Fragment",name:"TribeGroupMessageRecipientLabel_tribe",type:"Tribe",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"numContributors",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"numAdmins",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"numModerators",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerPermission",args:null,storageKey:null},{kind:"FragmentSpread",name:"TribeName_tribe",args:null}],hash:"346650e4f8799c816a23257bbe8c4473"},R=M,q=t("PuWf"),I=t("VyO/"),L=t("q1tI"),P=t.n(L),D=t("amAD"),j=t("Sgbr");function N(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=b()(e);if(n){var l=b()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return f()(this,t)}}var B=function(e){p()(t,e);var n=N(t);function t(){return s()(this,t),n.apply(this,arguments)}return u()(t,[{key:"render",value:function(){var e=this.props,n=e.tribe,t=e.recipientType,a=n.numContributors,l=n.numAdmins,i=n.numModerators,r=n.viewerPermission,s=Object(j.a)(r),o=0;return t===D.a.admin?o=l-(s===D.a.admin?1:0):t===D.a.moderator?o=i-(s===D.a.moderator?1:0):t===D.a.contributor&&(o=a-(s===D.a.contributor?1:0)),P.a.createElement(K.b,{key:t,text:P.a.createElement(T.Translate,null,P.a.createElement(x.a,{level:t})," of"," ",P.a.createElement(q.a,{tribe:n})," (",P.a.createElement(T.FormattedNumber,{value:o}),")")})}}]),t}(P.a.Component);B.fragments={tribe:void 0!==S?S:S=i},B.displayName="TribeGroupMessageRecipientLabel";var Q,V,U=Object(I.b)(B),z=t("R+um"),W=t("nwxp");function H(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=b()(e);if(n){var l=b()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return f()(this,t)}}var J=function(e){p()(t,e);var n=H(t);function t(e){var a;return s()(this,t),(a=n.call(this,e)).editorRef=void 0,a.editorRef=P.a.createRef(),a.state={editorHasContent:!1},a.handleComposerMeaningfulChange=a.handleComposerMeaningfulChange.bind(c()(a)),a}return u()(t,[{key:"tribeGroupMessageSendMutation",value:function(e,n){var a=this.props,l=a.queryResult,i=a.extraProps,r=a.dismissModalFlow,s=l.tribe,o=i.recipientTypes;if(!s)return null;var u={mutation:t.mutations.tribeGroupMessageSend,variables:{recipientTypes:o,tribeId:s.tribeId,content:JSON.stringify(e)}};return Object(I.c)(u).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.tribeGroupMessageSend,l=a.success,i=a.errorMsg,s=a.recipientCount,o=a.failedRecipients;if(i)n(Object(T.plaintextServerTranslated)(i),O.d.error);else if(l)n(P.a.createElement(T.Translate,null,"You've successfully sent this message to ",P.a.createElement(T.FormattedNumber,{value:s}),P.a.createElement(T.PluralTranslate,{value:s},{ONE:" person",OTHER:" people"}),"."),O.d.success),r();else if(o){var u=o.length,d=s-u;n.error(P.a.createElement(P.a.Fragment,null,P.a.createElement(T.Translate,null,"This message was sent to ",P.a.createElement(T.FormattedNumber,{value:d}),P.a.createElement(T.PluralTranslate,{value:d},{ONE:" person",OTHER:" people"}),"."),P.a.createElement(_.a,null),P.a.createElement(T.Translate,null,"Failed to send to"," ",P.a.createElement(T.FormattedNumber,{value:u}),P.a.createElement(T.PluralTranslate,{value:u},{ONE:" person",OTHER:" people"})," (",P.a.createElement(T.UserGeneratedJSX,null,P.a.createElement(T.Translate,null,P.a.createElement(T.InlineCommaAndList,null,o.map((function(e){return P.a.createElement(z.b,{key:e.uid,user:e})}))))),").")))}else n.genericError()}))}},{key:"handleSubmit",value:function(e){var n,t=null===(n=this.editorRef.current)||void 0===n?void 0:n.save();t?Object(E.q)(t)?e.error(Object(T.plaintextTranslate)("Please finish your message before sending.")):this.tribeGroupMessageSendMutation(t,e):e.genericError()}},{key:"handleComposerMeaningfulChange",value:function(e){e&&e.isEmpty&&this.setState({editorHasContent:!e.isEmpty()})}},{key:"renderRecipientFieldDescriptionText",value:function(){var e=this.props.extraProps.recipientTypes,n=e.indexOf(D.a.admin)>-1;return P.a.createElement(A.e,{mt:"medium",mx:"large"},P.a.createElement(A.s,{color:"gray_light",size:"small"},P.a.createElement(T.Translate,null,P.a.createElement(T.InlineCommaAndList,null,e.map((function(e){return P.a.createElement(T.UserGeneratedJSX,{translateParamName:"capitalized_plural_tribe_role",key:e},P.a.createElement(x.a,{key:e,level:e}))})))," will receive individual messages.",!n&&" Admins will also receive this message.")))}},{key:"renderRecipientField",value:function(){var e=this.props,n=e.queryResult,t=e.extraProps,a=n.tribe,l=t.recipientTypes;return a?P.a.createElement(A.j,{mx:"large"},P.a.createElement(T.Translate,null,"To: "),P.a.createElement(K.a,{alignItems:"center"},l.map((function(e){return P.a.createElement(P.a.Fragment,{key:e},P.a.createElement(U,{tribe:a,recipientType:e}))})))):null}},{key:"render",value:function(){var e=this,n=this.props,t=n.dismissModalFlow;if(!n.queryResult.tribe)throw Error("Tribe info is required for TribeGroupMessageModal.");return P.a.createElement(O.b,null,(function(n){return P.a.createElement(w.f,{header:P.a.createElement(w.m,null,P.a.createElement(T.Translate,null,"New Message")),hasPadding:!1,navButtonProps:{onClick:function(){return t()}},primaryButtonProps:{text:Object(T.plaintextTranslate)("Send"),onClick:function(){return e.handleSubmit(n)},disabled:!e.state.editorHasContent},secondaryButtonProps:{text:Object(T.plaintextTranslate)("Cancel"),onClick:function(){return t()}}},e.renderRecipientField(),e.renderRecipientFieldDescriptionText(),P.a.createElement(A.e,{my:"medium",mx:"large",maxHeight:Object(W.b)()?"400px":undefined,overflowY:Object(W.b)()?"scroll":undefined,borderAll:Object(W.b)()},P.a.createElement(C.a,{ref:e.editorRef,placeholder:Object(T.plaintextTranslate)("Type a message..."),content:Object(E.h)(),focusOnLoad:!0,toolbarOnWeb:!1,toolbarOnMobile:!1,commandsToDisable:["horizontal-rule","video"],onMeaningfulChange:e.handleComposerMeaningfulChange})))}))}}]),t}(P.a.Component);J.queries={onLoad:void 0!==Q?Q:Q=l},J.mutations={tribeGroupMessageSend:void 0!==V?V:V=a},J.displayName="TribeGroupMessageModal";n["default"]=J},x43M:function(e,n,t){"use strict";var a;!function(e){e.generic="generic",e.insufficient_permissions="insufficient_permissions",e.title_and_content_empty="title_and_content_empty",e.title_empty="title_empty",e.content_empty="content_empty",e.title_too_long="title_too_long",e.content_too_long="content_too_long",e.rate_limit_exceeded="rate_limit_exceeded",e.user_banned="user_banned",e.user_edit_blocked="user_edit_blocked",e.requires_external_links="requires_external_links",e.requires_quora_links="requires_quora_links",e.requires_text="requires_text",e.tribe_does_not_accept_posts="tribe_does_not_accept_posts"}(a||(a={})),n.a=a},zm58:function(e,n,t){"use strict";t.d(n,"a",(function(){return A}));var a=t("lwsE"),l=t.n(a),i=t("W8MJ"),r=t.n(i),s=t("7W2i"),o=t.n(s),u=t("a1gu"),d=t.n(u),c=t("Nsbk"),m=t.n(c),p=t("jufJ"),g=t("7r18"),f=t("AFGi"),y=t("EreF"),b=t("LJFN"),v=t("RA+f"),h=t("SKAY"),k=t("KP5v"),S=t("yju1"),F=t("nwxp"),_=t("sEfC"),T=t.n(_),w=t("q1tI"),E=t.n(w),C=t("bdgK"),K=t("4Xda");function O(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=m()(e);if(n){var l=m()(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return d()(this,t)}}var A=function(e){o()(t,e);var n=O(t);function t(e){var a,i;return l()(this,t),(i=n.call(this,e)).editorRef=void 0,i.containerRef=void 0,i.resizeObserver=void 0,i.debouncedSaveDraft=void 0,i.lastSavedDraft=void 0,i.handleSaveDraft=function(){var e=i.props.onNavButtonClick;i.saveDraft(!1),e&&e(i.editorRef.current.save())},i.handleClearDraft=function(){var e=i.props.onNavButtonClick;i.clearDraft(!1),e&&e(i.editorRef.current.save())},i.editorRef=null!==(a=e.ref)&&void 0!==a?a:E.a.createRef(),i.containerRef=E.a.createRef(),i.lastSavedDraft=undefined,i.debouncedSaveDraft=T()((function(){i.props.saveDraft&&i.saveDraft(!0)}),750,{maxWait:1e4,trailing:!0}),i}return r()(t,[{key:"componentDidMount",value:function(){if(Object(F.g)()){var e=this.props.saveDraft;Object(h.registerMessageHandler)("qtextNativeSaveDraft",this.handleSaveDraft),Object(h.registerMessageHandler)("qtextNativeClearDraft",this.handleClearDraft),Object(S.a)("setupEditor",{hasDraft:!!e})}this.setupResizeObserver()}},{key:"componentWillUnmount",value:function(){this.resizeObserver&&this.resizeObserver.disconnect()}},{key:"componentDidUpdate",value:function(e){var n;!this.props.onEditorContentHeightChange&&e.onEditorContentHeightChange&&(null===(n=this.resizeObserver)||void 0===n||n.disconnect())}},{key:"setupResizeObserver",value:function(){var e=this.props.onEditorContentHeightChange;if(e&&this.containerRef.current){var n=new C.a((function(n){n.forEach((function(n){var t=n.contentRect.height;e(Math.round(t))}))}));n.observe(this.containerRef.current),this.resizeObserver=n}}},{key:"saveDraft",value:function(e){var n=this.props.saveDraft;if(n&&this.editorRef.current){var t=this.editorRef.current.save();e&&JSON.stringify(t)===this.lastSavedDraft||(n(t,e),this.lastSavedDraft=JSON.stringify(t),Object(F.g)()&&!e&&Object(S.a)("draftSaveComplete",{success:!0}))}}},{key:"clearDraft",value:function(e){var n=this.props,t=n.saveDraft,a=n.editorKey;t&&(t(Object(f.h)(),e,!0),Object(F.g)()&&Object(S.a)("draftClearComplete",{key:a,success:!0}))}},{key:"showDiscardActionSheet",value:function(){var e=this,n=this.props.onNavButtonClick;Object(S.a)("showActionSheet",{title:"",buttonTitles:[Object(p.plaintextTranslate)("Discard"),Object(p.plaintextTranslate)("Keep Editing")],destructiveButtonIndex:0},(function(t){0===t.buttonIndex&&n&&n(e.editorRef.current.save())}))}},{key:"showDraftActionSheet",value:function(){var e=this,n=this.props.onNavButtonClick;Object(S.a)("showActionSheet",{title:"",buttonTitles:[Object(p.plaintextTranslate)("Clear Draft"),Object(p.plaintextTranslate)("Save Draft"),Object(p.plaintextTranslate)("Keep Editing")],destructiveButtonIndex:0},(function(t){var a=t.buttonIndex;if(0===a)e.clearDraft(!1);else{if(1!==a)return;e.saveDraft(!1)}n&&n(0===a?Object(f.h)():e.editorRef.current.save())}))}},{key:"isDirty",value:function(){var e,n;return null!==(e=null===(n=this.editorRef.current)||void 0===n?void 0:n.isDirty())&&void 0!==e&&e}},{key:"focusEditor",value:function(){var e;null===(e=this.editorRef.current)||void 0===e||e.focusEditor()}},{key:"save",value:function(){var e;return null===(e=this.editorRef.current)||void 0===e?void 0:e.save()}},{key:"onNavButtonClick",value:function(){var e=this.props,n=e.onNavButtonClick,t=e.saveDraft;Object(F.g)()&&this.isDirty()?t?this.showDraftActionSheet():this.showDiscardActionSheet():n&&n(this.editorRef.current.save())}},{key:"render",value:function(){var e=this,n=this.props,t=n.header,a=n.footer,l=n.placeholder,i=n.onPrimaryButtonClick,r=n.primaryButtonDisabled,s=n.showPrimaryButton,o=void 0===s||s,u=n.editorKey,d=n.onFirstChange,c=n.startingContent,m=void 0===c?Object(f.h)():c,h=n.showToolbar,S=void 0===h||h,_=n.titleText,T=void 0===_?Object(p.plaintextTranslate)("Editor"):_,w=n.showTitleText,C=void 0===w||w,O=n.primaryButtonText,A=void 0===O?Object(p.plaintextTranslate)("Post",{context:p.partOfSpeech.verb}):O,x=n.secondaryButtonProps,M=n.extraBodyProps,R=n.hasPadding,q=n.subtitleText,I=n.navButton,L=void 0===I?"back":I,P=n.clearOnSubmit,D=void 0!==P&&P,j=n.modalLayoutHeaderExtra,N=n.modalLayoutHeader,B=n.onEditorMeaningfulChange,Q=n.stickyButtonInfo,V=n.useLightWeightContentStyleToolBar,U=void 0!==V&&V,z=n.contentContext,W=n.displayFooterExtraInline,H=void 0!==W&&W,J=n.editorFooterSection,G=n.editorToolbarOverflowMenu,Y=!1;return Object(F.b)()&&(Y=Boolean(Object(k.a)("answer_inline_composer_to_modal"))),E.a.createElement(g.f,{hasPadding:R,navButton:L,footerExtra:a,displayFooterExtraInline:H,primaryButtonProps:o&&{text:A,onClick:function(){i&&(i(e.editorRef.current.save()),D&&e.editorRef.current.clear())},disabled:r},extraBodyProps:M,secondaryButtonProps:x,navButtonProps:{onClick:function(){return e.onNavButtonClick()}},titleText:C&&T,subtitleText:q,headerExtra:j,header:N},t,E.a.createElement(v.e,{height:Object(F.b)()&&!Y?"50vh":undefined},U?E.a.createElement(K.a.Consumer,null,(function(n){return E.a.createElement(v.e,{px:"medium",pt:"small",innerRef:e.containerRef},E.a.createElement(y.a,{placeholder:l,content:m,editorKey:u,ref:e.editorRef,onMeaningfulChange:function(n){d&&!e.isDirty()&&d(),null===B||void 0===B||B(n),e.debouncedSaveDraft()},settingOverrides:{imageRemoveButtonEnabled:!0,qtext_hyperlink_embed:!0,lightWeightContentToolbar:Object(b.d)(),eagerImageUploading:Object(b.d)(),isDarkModeOn:n.isDarkModeOn,minHeight:Object(F.e)()?"50vh":"260px"},isToolbarBottom:!Object(F.f)(),editorPaddingReset:!0,toolbarOnWeb:S,toolbarOnMobile:S,stickyButtonInfo:Q,contentContext:z,footerSection:J,toolbarOverflowMenu:G}))})):E.a.createElement(y.a,{placeholder:l,content:m,editorKey:u,ref:this.editorRef,onMeaningfulChange:function(n){d&&!e.isDirty()&&d(),null===B||void 0===B||B(n),e.debouncedSaveDraft()},toolbarOnWeb:S,toolbarOnMobile:S,settingOverrides:{imageRemoveButtonEnabled:!0,qtext_hyperlink_embed:!0}})))}}]),t}(E.a.Component);A.defaultProps={hasPadding:!1,useLightWeightContentStyleToolBar:Object(F.e)()},A.displayName="EditorModalLayout"}}]);