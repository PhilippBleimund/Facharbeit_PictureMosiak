(window.ansFrontendRelayWebpackJsonpFunction=window.ansFrontendRelayWebpackJsonpFunction||[]).push([["component-NUXRenderer"],{SpgY:function(e,t,n){"use strict";n.r(t),n.d(t,"nuxTransition",(function(){return U}));var a={};n.r(a),n.d(a,"default",(function(){return y}));var r=n("RIqP"),l=n.n(r),i=n("lwsE"),o=n.n(i),u=n("W8MJ"),s=n.n(u),c=n("7W2i"),d=n.n(c),p=n("a1gu"),m=n.n(p),f=n("Nsbk"),g=n.n(f),h=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null};return{kind:"Fragment",name:"NUXRenderer_nux",type:"NUX",metadata:null,argumentDefinitions:[],selections:[e,t,{kind:"LinkedField",alias:null,name:"steps",storageKey:null,args:null,concreteType:null,plural:!0,selections:[e,t,{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null}]}]}}();h.hash="8c29d0d10ed3a46bd9362f6188158a5b";var y=h,k=n("eP4p"),b=n("EFAP"),v=n("jQ0q"),x=n("SKAY"),w=n("VyO/"),S=n("AaDK"),R=n("nwxp"),F=n("nw/c"),_=n("UyMh"),E=n("q1tI"),I=n.n(E),M=n("RqIh"),O=n("jufJ"),j=n("noLW"),C=n("6lcX"),K=n("RA+f"),N=n("d1zJ");function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=g()(e);if(t){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var q,D=function(e){d()(n,e);var t=T(n);function n(e){var a;return o()(this,n),(a=t.call(this,e)).state={currentStepIdx:0},a}return s()(n,[{key:"incrementStepIdx",value:function(){this.setState((function(e){return Object.assign({},e,{currentStepIdx:e.currentStepIdx+1})}))}},{key:"render",value:function(){var e=this.props.totalSteps,t=this.state.currentStepIdx,n="".concat((this.state.currentStepIdx+1)/e*100,"%");return t<e&&I.a.createElement(K.i,{top:0,fullX:!0,zIndex:"modal_desktop",bg:"white",borderBottom:!0,boxShadow:"medium"},I.a.createElement(K.j,{width:C.d,mx:"auto",alignItems:"center",justifyContent:"space-between"},I.a.createElement(j.a,{color:"red",height:N.a}),I.a.createElement(K.n,{alignItems:"center"},I.a.createElement(K.e,null,I.a.createElement(K.s,{medium:!0},I.a.createElement(O.Translate,null,"Start"))),I.a.createElement(K.e,{px:"medium"},I.a.createElement(K.e,{bg:"gray",borderRadius:"pill",height:10,width:600},I.a.createElement(K.e,{bg:"blue",borderRadius:"pill",height:"100%",width:n,transition:"width",transitionDuration:"400ms"}))),I.a.createElement(K.e,null,I.a.createElement(K.s,{medium:!0},I.a.createElement(O.Translate,null,"Finish")))),I.a.createElement(K.e,{opacity:0},I.a.createElement(j.a,{color:"red",height:N.a}))))}}]),n}(E.Component),L=n("V1RE");function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=g()(e);if(t){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var U=function(e){var t,n=e.flowData,a=e.showNextModal,r=e.dismissModalFlow;Object(S.a)("nux_step_completion",{step_name:n.stepNames[n.stepIdx]}),n.stepIdx+=1,null!==(t=n.headerRef)&&void 0!==t&&t.current&&n.headerRef.current.incrementStepIdx(),n.stepIdx>=n.stepNames.length?r():(n.isLastStep=n.stepIdx>=n.numInteractiveSteps-1,a({modalProps:{name:L.f[n.stepNames[n.stepIdx]],queryVariables:{stepType:n.stepNames[n.stepIdx]},desktopWidth:L.b,desktopHeight:L.a,desktopOverlayStyle:{backgroundColor:"white"}},replaceActiveModal:!0}))},A=function(e){d()(n,e);var t=P(n);function n(e){var a;return o()(this,n),(a=t.call(this,e)).headerRef=void 0,a.shouldIncludeSpinnerStep=function(e){return x.isStorybook||x.isNpmRunStart||[M.a.answer,M.a.home_feed_main].includes(e)},a.headerRef=I.a.createRef(),a}return s()(n,[{key:"render",value:function(){var e=this;if(!Object(L.e)(this.props.nux))return null;var t=this.props.nux;if(!t)return null;var a=t.steps.length,r=t.id,i=t.__typename;return I.a.createElement(b.e.Consumer,null,(function(o){return I.a.createElement(b.d.Consumer,null,(function(u){var s=!!o&&e.shouldIncludeSpinnerStep(o);return I.a.createElement(w.a,{mutation:n.mutations.nuxMarkComplete,variables:{},onCompleted:function(){if(Object(R.g)())Object(k.h)();else if(o===M.a.answer&&Object(_.b)("/?signup_answer_page=".concat(u),"replace"),o===M.a.question_main){var e=Object(F.c)("/");e.query.from_signup=1,Object(_.b)(e)}},optimisticResponse:{nuxMarkComplete:{nux:{id:r,__typename:i,steps:[]},viewer:{showGoToFeedGrowl:!0}}}},(function(n){return I.a.createElement(I.a.Fragment,null,Object(R.b)()&&I.a.createElement(D,{totalSteps:a+1,ref:e.headerRef}),I.a.createElement(v.a,{shouldPrefetch:Object(R.g)(),modalFlowProps:{initialModalProps:(r=t.steps[0].name,{name:L.f[r],queryVariables:{stepType:r},desktopWidth:L.b,desktopHeight:L.a,desktopOverlayStyle:{backgroundColor:"white"}}),initialFlowData:{stepIdx:0,numInteractiveSteps:a,stepNames:[].concat(l()(t.steps.map((function(e){return e.name}))),l()(s?["spinner"]:[])),isLastStep:a<2,headerRef:e.headerRef,pageType:o},containerProps:{legacy:!0,easyDismissEnabled:!1},dismissableBack:!1,transitionName:"NUXTransition",postDismissCallback:n}},(function(e){var t=e.openModalFlow;return I.a.createElement(L.c,{openModalFlow:t})})));var r}))}))}))}}]),n}(I.a.Component);A.fragments={nux:void 0!==q?q:q=a},A.mutations={nuxMarkComplete:L.d},A.displayName="NUXRenderer";t["default"]=Object(w.b)(A)},V1RE:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return g})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return y}));var a={};n.r(a),n.d(a,"default",(function(){return i}));var r=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},n={kind:"LinkedField",alias:null,name:"nux",storageKey:null,args:null,concreteType:"NUX",plural:!1,selections:[e,t,{kind:"LinkedField",alias:null,name:"steps",storageKey:null,args:null,concreteType:null,plural:!0,selections:[e,t]}]},a={kind:"ScalarField",alias:null,name:"showGoToFeedGrowl",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"nuxUtils_nuxMarkComplete_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"nuxMarkComplete",storageKey:null,args:null,concreteType:"NuxMarkComplete",plural:!1,selections:[n,{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[a]}]}]},operation:{kind:"Operation",name:"nuxUtils_nuxMarkComplete_Mutation",argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"nuxMarkComplete",storageKey:null,args:null,concreteType:"NuxMarkComplete",plural:!1,selections:[n,{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[a,e]}]}]},params:{operationKind:"mutation",name:"nuxUtils_nuxMarkComplete_Mutation",id:"a6d7246182f57758f28d7429944b38acadc5d748dd77a0e1ff1864508308a3fb",text:null,metadata:{}}}}();r.hash="224397605c2cc50bffba1864a365598f";var l,i=r,o=n("SKAY"),u=n("AaDK"),s=n("q1tI"),c="760px",d="550px",p={follow_interests:"FollowInterestsStep",language:"LanguageStep",download_app:"DownloadAppStep",spinner:"SpinnerStep"},m=[["index","index"],["question","q"],["question","answer"],["topic","t"]],f=function(){return!!function(){for(var e=!1,t=0;t<m.length;t++)m[t][0]===Object(o.getSetting)("controller")&&m[t][1]===Object(o.getSetting)("action")&&(e=!0);return e}()&&!Object(o.getSetting)("getParams").digest_story},g=function(e){return e&&e.steps.length>0&&f()},h=function(e){var t=e.openModalFlow;return Object(s.useEffect)((function(){Object(u.a)("nux_start",{}),t()}),[t]),null},y=void 0!==l?l:l=a}}]);