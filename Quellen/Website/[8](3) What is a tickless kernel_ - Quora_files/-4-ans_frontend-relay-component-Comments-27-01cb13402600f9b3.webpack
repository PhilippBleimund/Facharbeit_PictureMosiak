(window.ansFrontendRelayWebpackJsonpFunction=window.ansFrontendRelayWebpackJsonpFunction||[]).push([["component-Comments"],{"+c4W":function(e,n,l){var a=l("711d"),t=l("4/ic"),r=l("9ggG"),i=l("9Nap");e.exports=function(e){return r(e)?a(i(e)):t(e)}},"1TO/":function(e,n,l){"use strict";var a;!function(e){e.permission_denied="permission_denied",e.permission_rate_limited="permission_rate_limited",e.success="success",e.unconfirmed_email="unconfirmed_email",e.no_permission="no_permission",e.comment_disabled="comment_disabled",e.comment_item_deleted="comment_item_deleted",e.comment_too_long="comment_too_long",e.comment_operation_error="comment_operation_error",e.empty_content="empty_content"}(a||(a={})),n.a=a},"2ajD":function(e,n){e.exports=function(e){return e!==e}},"4/ic":function(e,n,l){var a=l("ZWtO");e.exports=function(e){return function(n){return a(n,e)}}},"4sDh":function(e,n,l){var a=l("4uTw"),t=l("03A+"),r=l("Z0cm"),i=l("wJg7"),s=l("shjB"),o=l("9Nap");e.exports=function(e,n,l){for(var u=-1,d=(n=a(n,e)).length,m=!1;++u<d;){var c=o(n[u]);if(!(m=null!=e&&l(e,c)))break;e=e[c]}return m||++u!=d?m:!!(d=null==e?0:e.length)&&s(d)&&i(c,d)&&(r(e)||t(e))}},"4uTw":function(e,n,l){var a=l("Z0cm"),t=l("9ggG"),r=l("GNiM"),i=l("dt0z");e.exports=function(e,n){return a(e)?e:t(e,n)?[e]:r(i(e))}},"5SpG":function(e,n,l){"use strict";l.r(n);var a={};l.r(a),l.d(a,"default",(function(){return f}));var t,r=l("lwsE"),i=l.n(r),s=l("W8MJ"),o=l.n(s),u=l("7W2i"),d=l.n(u),m=l("a1gu"),c=l.n(m),g=l("Nsbk"),p=l.n(g),y={kind:"Fragment",name:"AnswerComment_answer",type:"Answer",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"first",type:"Int",defaultValue:5},{kind:"LocalArgument",name:"skipCommentList",type:"Boolean",defaultValue:!1}],selections:[{kind:"ScalarField",alias:null,name:"aid",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"tribeItem",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]},{kind:"FragmentSpread",name:"CommentArea_container",args:[{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"skipCommentList",variableName:"skipCommentList"}]}],hash:"27987a79441ec0bc6cfd940da625d686"},f=y,k=l("vg+J"),v=l("8lmh"),F=l("VyO/"),C=l("nwxp"),K=l("FuLD"),S=l("q1tI"),h=l.n(S);function b(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=p()(e);if(n){var t=p()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return c()(this,l)}}var T=function(e){d()(l,e);var n=b(l);function l(){return i()(this,l),n.apply(this,arguments)}return o()(l,[{key:"render",value:function(){var e=this.props,n=e.answer,l=e.isBorderAll,a=e.onClick,t=e.commentClickTime,r=Object(C.g)()&&!!n.tribeItem;return Object(K.b)()?(Object(v.logJsError)("AnswerComment","Trying to render Answer Comments Area (aid: ".concat(n.aid,") while logged out")),null):h.a.createElement(k.a,{container:n,isBorderAll:l,autoPaged:r,onClick:a,commentClickTime:t})}}]),l}(h.a.Component);T.fragments={answer:void 0!==t?t:t=a},T.displayName="AnswerComment";n["default"]=Object(F.b)(T)},"711d":function(e,n){e.exports=function(e){return function(n){return null==n?undefined:n[e]}}},"8ojC":function(e,n,l){"use strict";l.d(n,"a",(function(){return T}));var a=l("lwsE"),t=l.n(a),r=l("W8MJ"),i=l.n(r),s=l("7W2i"),o=l.n(s),u=l("a1gu"),d=l.n(u),m=l("Nsbk"),c=l.n(m),g=l("Iu3b"),p=l("AFGi"),y=l("Gnru"),f=l("nwxp"),k=l("q1tI"),v=l.n(k),F=l("UDrg"),C=l("sI7B"),K=l("bxg/"),S=l("uRky"),h=l("pEsO");function b(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=c()(e);if(n){var t=c()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return d()(this,l)}}var T=function(e){o()(l,e);var n=b(l);function l(e){var a;return t()(this,l),(a=n.call(this,e)).state={isSubmitting:!1},a}return i()(l,[{key:"getContainerProps",value:function(){return Object(h.e)()?{mobileHeight:Object(K.c)(),appearWithAnimation:!1,tapBackgroundToDismiss:!0,dragToDismiss:!1}:{easyDismissEnabled:!1,legacy:!1}}},{key:"renderEditorWrapper",value:function(e){var n=this,l=this.props,a=l.commentType,t=l.containerId,r=l.commentDraftContent,i=void 0===r?"":r,s=l.replyCommentId,o=l.postDismissCallback,u=l.children,d=e.addComment,m=e.logEvent;return v.a.createElement(C.a,{containerId:t,commentType:a,replyToId:s},(function(e){return v.a.createElement(g.a,{standaloneModalProps:{postDismissCallback:function(l){var r=null!==l&&void 0!==l?l:{},i=r.content,s=r.shouldRefetch;o&&o({content:i,shouldRefetch:s}),i&&(n.state.isSubmitting||(n.setState({isSubmitting:!0}),d(i).then((function(){Object(f.e)()&&e(Object(p.h)()),n.setState((function(){return{isSubmitting:!1}}))}))["catch"]((function(){n.setState((function(){return{isSubmitting:!1}}))})),function(e,n,l){var a,t;switch(n){case F.a.answer_comment:t="AddAnswerComment",a={aid:l};break;case F.a.post_comment:t="TribePostCommentAdd",a={pid:l};break;default:return null}e(t,a)}(m,a,t)))},modalProps:{name:"CommentAddModal",extraProps:{commentType:a,containerId:t,commentDraftContent:i,replyCommentId:s||0},queryVariables:{showReplyHeader:!!s,replyCommentId:s||0,commentType:a}},containerProps:Object.assign({},n.getContainerProps())}},(function(e){var n=e.openStandaloneModal;return u(n)}))}))}},{key:"render",value:function(){var e=this,n=this.props,l=n.commentAddedUpdater,a=n.commentType,t=n.containerId,r=n.replyCommentId,i=n.onCommentAdded;return v.a.createElement(y.ClientLogConsumer,null,(function(n){return v.a.createElement(S.a,{objectId:t,commentType:a,replyToId:r,onSuccess:function(e){var n=e.commentId,l=e.url;i&&i({commentId:n,url:l})},updater:l},(function(l){return e.renderEditorWrapper({addComment:l,logEvent:n})}))}))}}]),l}(v.a.Component);T.displayName="CommentAddModalOpener"},"9Nap":function(e,n,l){var a=l("/9aa");e.exports=function(e){if("string"==typeof e||a(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},"9Tc6":function(e,n,l){"use strict";var a={};l.r(a),l.d(a,"default",(function(){return v}));var t={};l.r(t),l.d(t,"default",(function(){return C}));var r=l("lwsE"),i=l.n(r),s=l("W8MJ"),o=l.n(s),u=l("7W2i"),d=l.n(u),m=l("a1gu"),c=l.n(m),g=l("Nsbk"),p=l.n(g),y=function(){var e=[{kind:"LocalArgument",name:"commentId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"commentType",type:"ContentTypes!",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null}],n=[{kind:"LinkedField",alias:null,name:"commentEdit",storageKey:null,args:[{kind:"Variable",name:"commentId",variableName:"commentId"},{kind:"Variable",name:"commentType",variableName:"commentType"},{kind:"Variable",name:"content",variableName:"content"}],concreteType:"CommentEdit",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:null,concreteType:"Comment",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"CommentEditMutation_commentEdit_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:n},operation:{kind:"Operation",name:"CommentEditMutation_commentEdit_Mutation",argumentDefinitions:e,selections:n},params:{operationKind:"mutation",name:"CommentEditMutation_commentEdit_Mutation",id:"bae5e2138cb2b96b4e40fc65708468eb5c62a302865420e8eafb157474749593",text:null,metadata:{}}}}();y.hash="8cb52436a5e3d25afcf3b282e31024b0";var f,k,v=y,F={kind:"Fragment",name:"CommentEditMutation_comment",type:"Comment",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null}],hash:"c5068d16eeaafd7ebce6bfe525befcb6"},C=F,K=l("VyO/"),S=l("q1tI"),h=l.n(S),b=l("1TO/");function T(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=p()(e);if(n){var t=p()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return c()(this,l)}}var L=function(e){d()(l,e);var n=T(l);function l(){return i()(this,l),n.apply(this,arguments)}return o()(l,[{key:"render",value:function(){var e=this.props,n=e.comment,a=e.children,t=n.content,r=n.commentId,i=n.__typename,s=n.id,o=n.contentType;return h.a.createElement(K.a,{mutation:l.mutations.commentEdit},(function(e){return a((function(n){n!==t&&e({optimisticResponse:{commentEdit:{comment:{__typename:i,id:s,content:n},status:b.a.success}},variables:{commentId:r,commentType:o,content:n}})}))}))}}]),l}(h.a.Component);L.fragments={comment:void 0!==f?f:f=t},L.mutations={commentEdit:void 0!==k?k:k=a},L.displayName="CommentEditMutation";n.a=Object(K.b)(L)},"9ggG":function(e,n,l){var a=l("Z0cm"),t=l("/9aa"),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,n){if(a(e))return!1;var l=typeof e;return!("number"!=l&&"symbol"!=l&&"boolean"!=l&&null!=e&&!t(e))||(i.test(e)||!r.test(e)||null!=n&&e in Object(n))}},"9p1X":function(e,n,l){"use strict";l.r(n);var a={};l.r(a),l.d(a,"default",(function(){return v}));var t={};l.r(t),l.d(t,"default",(function(){return C}));var r={};l.r(r),l.d(r,"default",(function(){return D}));var i=l("lwsE"),s=l.n(i),o=l("W8MJ"),u=l.n(o),d=l("7W2i"),m=l.n(d),c=l("a1gu"),g=l.n(c),p=l("Nsbk"),y=l.n(p),f=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l=[{kind:"Variable",name:"first",variableName:"first"}],a=[{kind:"FragmentSpread",name:"AnswerFeedStoryCommentPreview_answer",args:l}];return{kind:"Fragment",name:"AnswerCommentWithPreview_answer",type:"Answer",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"first",type:"Int",defaultValue:5}],selections:[e,n,{kind:"ScalarField",alias:null,name:"aid",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"tribeItem",storageKey:null,args:null,concreteType:null,plural:!1,selections:[e,n]},{kind:"FragmentSpread",name:"AnswerFeaturedCommentPreview_answer",args:l},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{experiment:"feed_story_comment_preview_v2",value:"expandable_stories"},condition:"onVariant",selections:a},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{experiment:"feed_story_comment_preview_v2",value:"short_content"},condition:"onVariant",selections:a}]}}();f.hash="30959cdf031a1553ca21a9965897eb25";var k,v=f,F={kind:"Fragment",name:"AnswerFeedStoryCommentPreview_answer",type:"Answer",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"first",type:"Int",defaultValue:5}],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"numDisplayComments",args:null,storageKey:null},{kind:"ScalarField",alias:"hasUncollapsedToplevelComments",name:"hasAtLeastNumTopLevelComments",args:[{kind:"Literal",name:"num",value:1},{kind:"Literal",name:"requestType",value:"all_uncollapsed"}],storageKey:'hasAtLeastNumTopLevelComments(num:1,requestType:"all_uncollapsed")'},{kind:"ScalarField",alias:null,name:"isCommentsDisabled",args:null,storageKey:null},{kind:"FragmentSpread",name:"AnswerComment_answer",args:[{kind:"Variable",name:"first",variableName:"first"},{kind:"Literal",name:"skipCommentList",value:!0}]},{kind:"FragmentSpread",name:"FeedStoryCommentPreview_container",args:[{kind:"Literal",name:"first",value:1}]}],hash:"a970eed52a74340fa81c27bef05da085"},C=F,K=l("5SpG"),S=l("VyO/"),h=l("q1tI"),b=l.n(h),T=l("K1HT");function L(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=y()(e);if(n){var t=y()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return g()(this,l)}}var R=function(e){m()(l,e);var n=L(l);function l(){return s()(this,l),n.apply(this,arguments)}return u()(l,[{key:"render",value:function(){var e=this.props,n=e.answer,l=e.onClick,a=n.numDisplayComments,t=n.hasUncollapsedToplevelComments;return n.isCommentsDisabled&&!a?null:a?b.a.createElement(T.a,{container:n,onClick:l,hasUncollapsedToplevelComments:t}):b.a.createElement(K["default"],{answer:n})}}]),l}(b.a.Component);R.fragments={answer:void 0!==k?k:k=t},R.displayName="AnswerFeedStoryCommentPreview";var I,w=Object(S.b)(R),_=l("Gnru"),A=l("FuLD"),E={kind:"Fragment",name:"AnswerFeaturedCommentPreview_answer",type:"Answer",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"first",type:"Int",defaultValue:5}],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"numDisplayComments",args:null,storageKey:null},{kind:"ScalarField",alias:"hasUncollapsedTopLevelComments",name:"hasAtLeastNumTopLevelComments",args:[{kind:"Literal",name:"num",value:1},{kind:"Literal",name:"requestType",value:"all_uncollapsed"}],storageKey:'hasAtLeastNumTopLevelComments(num:1,requestType:"all_uncollapsed")'},{kind:"FragmentSpread",name:"AnswerComment_answer",args:[{kind:"Variable",name:"first",variableName:"first"},{kind:"Literal",name:"skipCommentList",value:!0}]},{kind:"FragmentSpread",name:"CommentFeaturedPreview_container",args:[{kind:"Literal",name:"first",value:1}]}],hash:"73243bf260bd5c9a1164f7c8963346f1"},D=E,V=l("Xy8g"),N=l("ZFNG");function O(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=y()(e);if(n){var t=y()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return g()(this,l)}}var B=function(e){m()(l,e);var n=O(l);function l(){return s()(this,l),n.apply(this,arguments)}return u()(l,[{key:"render",value:function(){var e=this.props,n=e.isBorderAll,l=e.answer,a=e.onClick,t=l.numDisplayComments,r=l.hasUncollapsedTopLevelComments;return t&&r?b.a.createElement(N.b,{isBorderAll:n},b.a.createElement(V.a,{container:l,onClick:a,numDisplayComments:t})):b.a.createElement(K["default"],{answer:l,isBorderAll:n,onClick:a})}}]),l}(b.a.Component);B.fragments={answer:void 0!==I?I:I=r},B.displayName="AnswerFeaturedCommentPreview";var P,x=Object(S.b)(B);function q(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=y()(e);if(n){var t=y()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return g()(this,l)}}var U=function(e){m()(l,e);var n=q(l);function l(){return s()(this,l),n.apply(this,arguments)}return u()(l,[{key:"render",value:function(){var e=this.props,n=e.isBorderAll,l=e.useNewCommentPreview,a=e.onExpand,t=e.answer;return Object(A.a)()?b.a.createElement(_.ClientLogConsumer,null,(function(e){var r=function(){e("AnswerCommentBarExpand",{aid:t.aid}),null===a||void 0===a||a()};return b.a.createElement(b.a.Fragment,null,l?b.a.createElement(w,{answer:t,onClick:r}):b.a.createElement(x,{answer:t,onClick:r,isBorderAll:n}))})):null}}]),l}(b.a.Component);U.fragments={answer:void 0!==P?P:P=a},U.displayName="AnswerCommentWithPreview";n["default"]=Object(S.b)(U)},CMye:function(e,n,l){var a=l("GoyQ");e.exports=function(e){return e===e&&!a(e)}},CZoQ:function(e,n){e.exports=function(e,n,l){for(var a=l-1,t=e.length;++a<t;)if(e[a]===n)return a;return-1}},GDhZ:function(e,n,l){var a=l("wF/u"),t=l("mwIZ"),r=l("hgQt"),i=l("9ggG"),s=l("CMye"),o=l("IOzZ"),u=l("9Nap");e.exports=function(e,n){return i(e)&&s(n)?o(u(e),n):function(l){var i=t(l,e);return i===undefined&&i===n?r(l,e):a(n,i,3)}}},GNiM:function(e,n,l){var a=l("I01J"),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,i=a((function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(t,(function(e,l,a,t){n.push(a?t.replace(r,"$1"):l||e)})),n}));e.exports=i},I01J:function(e,n,l){var a=l("44Ds");e.exports=function(e){var n=a(e,(function(e){return 500===l.size&&l.clear(),e})),l=n.cache;return n}},IOzZ:function(e,n){e.exports=function(e,n){return function(l){return null!=l&&(l[e]===n&&(n!==undefined||e in Object(l)))}}},Juji:function(e,n){e.exports=function(e,n){return null!=e&&n in Object(e)}},K1HT:function(e,n,l){"use strict";var a={};l.r(a),l.d(a,"default",(function(){return f}));var t,r=l("lwsE"),i=l.n(r),s=l("W8MJ"),o=l.n(s),u=l("7W2i"),d=l.n(u),m=l("a1gu"),c=l.n(m),g=l("Nsbk"),p=l.n(g),y={kind:"Fragment",name:"FeedStoryCommentPreview_container",type:"Commentable",metadata:{connection:[{count:"first",cursor:null,direction:"forward",path:["allComments"]}]},argumentDefinitions:[{kind:"LocalArgument",name:"first",type:"Int",defaultValue:1}],selections:[{kind:"LinkedField",alias:"allComments",name:"__FeedStoryCommentPreview_allComments_connection",storageKey:"__FeedStoryCommentPreview_allComments_connection(requestType:4)",args:[{kind:"Literal",name:"requestType",value:4}],concreteType:"GenericCommentsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"NodeEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"InlineFragment",type:"Comment",selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[{kind:"FragmentSpread",name:"UserName_user",args:null},{kind:"FragmentSpread",name:"UserPhoto_user",args:null}]},{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isDeleted",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"creationTime",args:null,storageKey:null}]}]},{kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null}]}]}],hash:"cba0e7c46e9640e7f69aeff0a06f9e6c"},f=y,k=l("LW3J"),v=l("jufJ"),F=l("EFAP"),C=l("OMLc"),K=l("wB5M"),S=l("3wQG"),h=l("RA+f"),b=l("OyJI"),T=l("R+um"),L=l("r+vq"),R=l("VyO/"),I=l("NldC"),w=l("q1tI"),_=l.n(w),A=l("RqIh");function E(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=p()(e);if(n){var t=p()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return c()(this,l)}}var D=function(e){d()(l,e);var n=E(l);function l(){return i()(this,l),n.apply(this,arguments)}return o()(l,[{key:"render",value:function(){var e,n=this.props,l=n.onClick,a=n.container;if(!n.hasUncollapsedToplevelComments||!a.allComments)return null;var t=a.allComments.edges.map((function(e){return e.node})).filter(I.c),r=t[0]&&!t[0].isDeleted?t[0]:null;if(!r||!r.content)return null;var i=JSON.parse(r.content),s="image"===(null===(e=i.sections[0])||void 0===e?void 0:e.type);return _.a.createElement(F.e.Consumer,null,(function(e){var n=e===A.a.question_main||e===A.a.tribe_item;return _.a.createElement(h.f,{onClick:l,display:"block",p:"tiny",pb:n?0:"small",px:n?0:"medium",underlineHover:!1},_.a.createElement(h.e,{bg:"darken",borderRadius:"small"},_.a.createElement(h.e,{hover:{bg:"darken"},py:"tiny",px:"small",borderRadius:"small"},_.a.createElement(b.a,null,_.a.createElement(h.e,{mt:"tiny"},_.a.createElement(L.a,{display:"block",user:r.user,size:20,linked:!1})),_.a.createElement(h.e,{ml:"tiny"},_.a.createElement(k.a,null,_.a.createElement(h.d,{fontSize:"small"},_.a.createElement(T.b,{user:r.user})),_.a.createElement(h.s,{display:"inline",fontSize:"small",color:"gray_light"},_.a.createElement(v.FormattedDateTime,{formatType:"Compact",monthFormatLength:"short",utime:r.creationTime}))),s?_.a.createElement(K.a,{qt:i,truncationType:"regular",hasImageBoundary:!1,maxImageHeight:100}):_.a.createElement(S.f,{qt:i,fontSize:"small",lineLimit:1,readMoreLinkText:"",noThumbnail:!0,truncationType:"inline"}))),_.a.createElement(b.a,{alignItems:"center",justifyContent:"center",mt:"tiny"},_.a.createElement(h.s,{textAlign:"center",fontSize:"small",color:"blue",mr:"tiny"},_.a.createElement(v.Translate,null,"View more")),_.a.createElement(C.b,{size:12,color:"blue",name:"ChevronDown"})))))}))}}]),l}(w.Component);D.fragments={container:void 0!==t?t:t=a};n.a=Object(R.b)(D)},KwMD:function(e,n){e.exports=function(e,n,l,a){for(var t=e.length,r=l+(a?1:-1);a?r--:++r<t;)if(n(e[r],r,e))return r;return-1}},LGYb:function(e,n,l){var a=l("1hJj"),t=l("jbM+"),r=l("Xt/L"),i=l("xYSL"),s=l("dQpi"),o=l("rEGp");e.exports=function(e,n,l){var u=-1,d=t,m=e.length,c=!0,g=[],p=g;if(l)c=!1,d=r;else if(m>=200){var y=n?null:s(e);if(y)return o(y);c=!1,d=i,p=new a}else p=n?[]:g;e:for(;++u<m;){var f=e[u],k=n?n(f):f;if(f=l||0!==f?f:0,c&&k===k){for(var v=p.length;v--;)if(p[v]===k)continue e;n&&p.push(k),g.push(f)}else d(p,k,l)||(p!==g&&p.push(k),g.push(f))}return g}},O7RO:function(e,n,l){var a=l("CMye"),t=l("7GkX");e.exports=function(e){for(var n=t(e),l=n.length;l--;){var r=n[l],i=e[r];n[l]=[r,i,a(i)]}return n}},PRXj:function(e,n,l){"use strict";var a=l("J4zp"),t=l.n(a),r=l("QILm"),i=l.n(r),s=l("vOnD"),o=l("RA+f"),u=l("q1tI"),d=l.n(u),m=Object(s["default"])(o.s).withConfig({displayName:"TextInputWrapper___StyledText",componentId:"abzlxg-0"})([""," .doc{min-height:0;margin:0;padding:0;line-height:1.5;}"],(function(e){return e._css})),c=function(e){var n=e.children,l=e.theme,a=e.shouldRemeasure,r=e.hasBorder,s=i()(e,["children","theme","shouldRemeasure","hasBorder"]),o=d.a.useRef(),u=d.a.useState(0),c=t()(u,2),g=c[0],p=c[1];return d.a.useEffect((function(){o.current&&p(o.current.clientHeight)}),[a]),d.a.createElement(m,Object.assign({color:"gray_dark",fontSize:"regular",innerRef:o,py:"small",px:"medium",bg:"white",flex:1,borderRadius:0!==g?g/2:undefined,minWidth:"0"},s,{boxShadow:r?"inset 0 0 0 1px ".concat(l.colors.border.gray):undefined,_css:r?"@media only screen and (-webkit-min-device-pixel-ratio: 1.5) {\n          box-shadow: inset 0 0 0 0.5px ".concat(l.colors.border.gray," !important;\n        }"):undefined}),n)};c.displayName="TextInputWrapper",n.a=Object(s.withTheme)(c)},"R/W3":function(e,n,l){var a=l("KwMD"),t=l("2ajD"),r=l("CZoQ");e.exports=function(e,n,l){return n===n?r(e,n,l):a(e,t,l)}},"Xt/L":function(e,n){e.exports=function(e,n,l){for(var a=-1,t=null==e?0:e.length;++a<t;)if(l(n,e[a]))return!0;return!1}},Xy8g:function(e,n,l){"use strict";var a={};l.r(a),l.d(a,"default",(function(){return v}));var t=l("lwsE"),r=l.n(t),i=l("W8MJ"),s=l.n(i),o=l("7W2i"),u=l.n(o),d=l("a1gu"),m=l.n(d),c=l("Nsbk"),g=l.n(c),p=l("RIqP"),y=l.n(p),f=function(){var e={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null};return{kind:"Fragment",name:"CommentFeaturedPreview_container",type:"Commentable",metadata:{connection:[{count:"first",cursor:null,direction:"forward",path:["allComments"]}]},argumentDefinitions:[{kind:"LocalArgument",name:"first",type:"Int",defaultValue:5}],selections:[{kind:"LinkedField",alias:"allComments",name:"__CommentFeaturedPreview_allComments_connection",storageKey:"__CommentFeaturedPreview_allComments_connection(requestType:4)",args:[{kind:"Literal",name:"requestType",value:4}],concreteType:"GenericCommentsConnection",plural:!1,selections:[e,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"NodeEdge",plural:!0,selections:[e,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[e,{kind:"InlineFragment",type:"Comment",selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},{kind:"FragmentSpread",name:"UserName_user",args:null}]}]}]},{kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null}]}]}]}}();f.hash="c8b5c57c342434c257f04b33452d5161";var k,v=f,F=l("jufJ"),C=l("RA+f"),K=l("R+um"),S=l("QLaP"),h=l.n(S),b=l("8lmh"),T=l("VyO/"),L=l("NldC"),R=l("qPyV"),I=l.n(R),w=l("q1tI"),_=l.n(w);function A(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=g()(e);if(n){var t=g()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return m()(this,l)}}var E=function(e){var n=e.container,l=e.numDisplayComments;Object(b.tempFailureInvariant)(n.allComments,"allComments is ".concat(n.allComments));var a=n.allComments.edges.map((function(e){return e.node})).filter(L.c),t=l||a.length;h()(null!=t&&t>0,"Invalid commentsLength: '".concat(t,"' ")+"(num: '".concat(l,"', comments: '").concat(a,"')"));var r=l&&a&&a.length>0,i=I()(y()(a.map((function(e){return e.user}))),"uid").filter(L.c);return r&&i.length?_.a.createElement(C.s,{fontSize:"small",color:"gray",truncateLines:1},_.a.createElement(F.Translate,null,_.a.createElement(F.FormattedNumber,{value:t})," ",_.a.createElement(F.PluralTranslate,{value:t},{ONE:"comment",OTHER:"comments"})," from ",_.a.createElement(F.InlineTruncatedList,{translateParamName:"users",limit:1,showNumLeftOver:!1,forceTotal:t},i.map((function(e){return _.a.createElement(K.b,{key:e.uid,user:e})}))))):null};E.displayName="FeaturedCommentFooter";var D=function(e){u()(l,e);var n=A(l);function l(){return r()(this,l),n.apply(this,arguments)}return s()(l,[{key:"render",value:function(){return _.a.createElement(C.f,{onClick:this.props.onClick,underlineHover:!1,width:"100%",hover:{bg:"darken"}},_.a.createElement(C.e,{p:"medium"},_.a.createElement(E,{container:this.props.container,numDisplayComments:this.props.numDisplayComments})))}}]),l}(_.a.Component);D.fragments={container:void 0!==k?k:k=a},D.displayName="CommentFeaturedPreview";n.a=Object(T.b)(D)},ZCpW:function(e,n,l){var a=l("lm/5"),t=l("O7RO"),r=l("IOzZ");e.exports=function(e){var n=t(e);return 1==n.length&&n[0][2]?r(n[0][0],n[0][1]):function(l){return l===e||a(l,e,n)}}},ZWtO:function(e,n,l){var a=l("4uTw"),t=l("9Nap");e.exports=function(e,n){for(var l=0,r=(n=a(n,e)).length;null!=e&&l<r;)e=e[t(n[l++])];return l&&l==r?e:undefined}},"a6/j":function(e,n,l){"use strict";l.r(n);var a={};l.r(a),l.d(a,"default",(function(){return f}));var t,r=l("lwsE"),i=l.n(r),s=l("W8MJ"),o=l.n(s),u=l("7W2i"),d=l.n(u),m=l("a1gu"),c=l.n(m),g=l("Nsbk"),p=l.n(g),y={kind:"Fragment",name:"QuestionComment_question",type:"Question",metadata:null,argumentDefinitions:[],selections:[{kind:"FragmentSpread",name:"CommentArea_container",args:null}],hash:"93da50b8ef357ce8a5d0f4d97c593f93"},f=y,k=l("vg+J"),v=l("VyO/"),F=l("q1tI"),C=l.n(F);function K(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=p()(e);if(n){var t=p()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return c()(this,l)}}var S=function(e){d()(l,e);var n=K(l);function l(){return i()(this,l),n.apply(this,arguments)}return o()(l,[{key:"render",value:function(){var e=this.props,n=e.question,l=e.isBorderAll;return C.a.createElement(k.a,{container:n,isBorderAll:l})}}]),l}(C.a.Component);S.fragments={question:void 0!==t?t:t=a},S.displayName="QuestionComment";n["default"]=Object(v.b)(S)},"bxg/":function(e,n,l){"use strict";l.d(n,"b",(function(){return t})),l.d(n,"a",(function(){return r})),l.d(n,"c",(function(){return i}));var a=l("nwxp"),t=35,r=10;function i(){return t+r+(Object(a.a)()?50:30)}},dPKq:function(e,n,l){"use strict";l.d(n,"a",(function(){return u})),l.d(n,"b",(function(){return d}));var a=l("jufJ"),t=l("cbxS"),r=l("OMLc"),i=l("RA+f"),s=l("q1tI"),o=l.n(s),u=function(e){return o.a.createElement(i.e,{p:"small"},o.a.createElement(t.a,{buttonOnClick:e,buttonTitle:Object(a.plaintextTranslate)("Try again"),buttonVariant:"error",variant:"warning_inverted",icon:o.a.createElement(r.b,{name:"NoConnection"}),title:Object(a.plaintextTranslate)("Something went wrong. Check your internet connection."),iconPosition:"centered"}))},d=function(e){return o.a.createElement(i.e,{p:"small"},o.a.createElement(t.a,{buttonOnClick:e,buttonTitle:Object(a.plaintextTranslate)("Try again"),buttonVariant:"error",variant:"warning_inverted",icon:o.a.createElement(r.b,{name:"Error"}),title:Object(a.plaintextTranslate)("Something went wrong. Wait a moment and try again."),iconPosition:"centered"}))}},dQpi:function(e,n,l){var a=l("yGk4"),t=l("vN+2"),r=l("rEGp"),i=a&&1/r(new a([,-0]))[1]==1/0?function(e){return new a(e)}:t;e.exports=i},hgQt:function(e,n,l){var a=l("Juji"),t=l("4sDh");e.exports=function(e,n){return null!=e&&t(e,n,a)}},"jbM+":function(e,n,l){var a=l("R/W3");e.exports=function(e,n){return!!(null==e?0:e.length)&&a(e,n,0)>-1}},"lm/5":function(e,n,l){var a=l("fmRc"),t=l("wF/u");e.exports=function(e,n,l,r){var i=l.length,s=i,o=!r;if(null==e)return!s;for(e=Object(e);i--;){var u=l[i];if(o&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<s;){var d=(u=l[i])[0],m=e[d],c=u[1];if(o&&u[2]){if(m===undefined&&!(d in e))return!1}else{var g=new a;if(r)var p=r(m,c,d,e,n,g);if(!(p===undefined?t(c,m,3,r,g):p))return!1}}return!0}},mwIZ:function(e,n,l){var a=l("ZWtO");e.exports=function(e,n,l){var t=null==e?undefined:a(e,n);return t===undefined?l:t}},"ptJ+":function(e,n,l){"use strict";var a={};l.r(a),l.d(a,"default",(function(){return f}));var t,r=l("lwsE"),i=l.n(r),s=l("W8MJ"),o=l.n(s),u=l("7W2i"),d=l.n(u),m=l("a1gu"),c=l.n(m),g=l("Nsbk"),p=l.n(g),y={kind:"Fragment",name:"CommentQTextExpandable_comment",type:"Comment",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null}]}],hash:"9eaf15730308054629245c73bf682a8d"},f=y,k=l("AFGi"),v=l("Kh5g"),F=l("3wQG"),C=l("RA+f"),K=l("QLaP"),S=l.n(K),h=l("VyO/"),b=l("q1tI"),T=l.n(b);function L(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=p()(e);if(n){var t=p()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return c()(this,l)}}var R=function(e){d()(l,e);var n=L(l);function l(e){var a;return i()(this,l),(a=n.call(this,e)).state={isExpanded:!1},a}return o()(l,[{key:"render",value:function(){var e=this,n=this.props,l=n.comment,a=l.content,t=l.tribe,r=n.charLimit,i=void 0===r?305:r,s=n.disableFullWidthImages,o=null===t||void 0===t?void 0:t.isSensitive;S()(null!==a,"missing content for comment");var u=JSON.parse(a);return Object(k.g)(u)<i||this.state.isExpanded?T.a.createElement(v.a,{qt:u,isSensitive:o,disableFullWidthImages:s}):T.a.createElement(C.j,null,T.a.createElement(C.f,{onClick:function(){e.setState({isExpanded:!0})},underlineHover:!1},T.a.createElement(F.f,{qt:u,lineLimit:3,isSensitive:o,disableFullWidthImages:s})))}}]),l}(T.a.Component);R.fragments={comment:void 0!==t?t:t=a},R.displayName="CommentQTextExpandable";n.a=Object(h.b)(R)},qPyV:function(e,n,l){var a=l("ut/Y"),t=l("LGYb");e.exports=function(e,n){return e&&e.length?t(e,a(n,2)):[]}},sI7B:function(e,n,l){"use strict";var a={};l.r(a),l.d(a,"default",(function(){return f}));var t=l("lwsE"),r=l.n(t),i=l("W8MJ"),s=l.n(i),o=l("7W2i"),u=l.n(o),d=l("a1gu"),m=l.n(d),c=l("Nsbk"),g=l.n(c),p=function(){var e=[{kind:"LocalArgument",name:"containerId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"commentType",type:"ContentTypes!",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null},{kind:"LocalArgument",name:"replyToId",type:"BigInt",defaultValue:null}],n=[{kind:"Variable",name:"commentType",variableName:"commentType"},{kind:"Variable",name:"containerId",variableName:"containerId"},{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"replyToId",variableName:"replyToId"}],l={kind:"ScalarField",alias:null,name:"commentDraftContent",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"CommentAddDraftMutation_commentDraftAdd_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"commentDraftAdd",storageKey:null,args:n,concreteType:"CommentDraftAdd",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"commentable",storageKey:null,args:null,concreteType:null,plural:!1,selections:[l]}]}]},operation:{kind:"Operation",name:"CommentAddDraftMutation_commentDraftAdd_Mutation",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"commentDraftAdd",storageKey:null,args:n,concreteType:"CommentDraftAdd",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"commentable",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]}]},params:{operationKind:"mutation",name:"CommentAddDraftMutation_commentDraftAdd_Mutation",id:"fa07d1702422852d93ad04022278c374d63952ee19410d61946ddba070f05863",text:null,metadata:{}}}}();p.hash="8bd5342aadcb5799c7e5fd666cce5849";var y,f=p,k=l("VyO/"),v=l("q1tI"),F=l.n(v);function C(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=g()(e);if(n){var t=g()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return m()(this,l)}}var K=function(e){u()(l,e);var n=C(l);function l(){return r()(this,l),n.apply(this,arguments)}return s()(l,[{key:"render",value:function(){var e=this.props,n=e.containerId,a=e.commentType,t=e.replyToId,r=e.children;return F.a.createElement(k.a,{mutation:l.mutations.saveDraft},(function(e){return r((function(l){return e({variables:{containerId:n,commentType:a,replyToId:t||null,content:JSON.stringify(l)}})}))}))}}]),l}(F.a.Component);K.mutations={saveDraft:void 0!==y?y:y=a},K.displayName="CommentAddDraftMutation";n.a=K},t72q:function(e,n,l){"use strict";l.r(n);var a={};l.r(a),l.d(a,"default",(function(){return F}));var t={};l.r(t),l.d(t,"default",(function(){return S}));var r={};l.r(r),l.d(r,"default",(function(){return T}));var i={};l.r(i),l.d(i,"default",(function(){return x}));var s={};l.r(s),l.d(s,"default",(function(){return G}));var o=l("lwsE"),u=l.n(o),d=l("W8MJ"),m=l.n(d),c=l("7W2i"),g=l.n(c),p=l("a1gu"),y=l.n(p),f=l("Nsbk"),k=l.n(f),v=function(){var e=[{kind:"LocalArgument",name:"pid",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null}],n=[{kind:"Variable",name:"pid",variableName:"pid"}],l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},t={kind:"Variable",name:"first",variableName:"first"},r={kind:"Literal",name:"num",value:1},i={kind:"Literal",name:"requestType",value:"all_uncollapsed"},s={kind:"ScalarField",alias:null,name:"containerId",args:null,storageKey:null},o={kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},u={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},m={kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},p={kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},y={kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},f=[a,l,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}],k={kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:f},v={kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:f},F={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},C={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]},K={kind:"Literal",name:"requestType",value:4},S=[t,K],h={kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null},b={kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null},T={kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},L={kind:"ScalarField",alias:null,name:"isDeleted",args:null,storageKey:null},R={kind:"ScalarField",alias:null,name:"deletedTime",args:null,storageKey:null},I={kind:"ScalarField",alias:null,name:"isReply",args:null,storageKey:null},w={kind:"ScalarField",alias:null,name:"viewerIsAuthor",args:null,storageKey:null},_={kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,u,d,m,c,g,a,p,y,k,v,{kind:"ScalarField",alias:null,name:"isBlocking",args:null,storageKey:null},F,C]},A={kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"canSeeDeletedContent",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isAdmin",args:null,storageKey:null},l,a,{kind:"ScalarField",alias:null,name:"isAdminMode",args:null,storageKey:null}]},E={kind:"ScalarField",alias:null,name:"commenterIsTribeModerator",args:null,storageKey:null},D={kind:"ScalarField",alias:null,name:"commenterIsTribeAdmin",args:null,storageKey:null},V={kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,a,u]},N={kind:"ScalarField",alias:null,name:"creationTime",args:null,storageKey:null},O={kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},B={kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},P={kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null},l,a,{kind:"ScalarField",alias:null,name:"viewerCanModerate",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null}]},x={kind:"ScalarField",alias:null,name:"authorIsBlockedByTribe",args:null,storageKey:null},q={kind:"ScalarField",alias:null,name:"replyDraftContent",args:null,storageKey:null},U={kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null},j={kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null},M={kind:"ScalarField",alias:null,name:"viewerCanDelete",args:null,storageKey:null},Q={kind:"ScalarField",alias:null,name:"viewerCanAdminDelete",args:null,storageKey:null},H={kind:"ScalarField",alias:null,name:"viewerCanBlockCommentAuthor",args:null,storageKey:null},z={kind:"ScalarField",alias:null,name:"viewerCanInviteToContribute",args:null,storageKey:null},W={kind:"ScalarField",alias:null,name:"reportableId",args:null,storageKey:null},G={kind:"ScalarField",alias:null,name:"viewerHasReported",args:null,storageKey:null},J={kind:"ScalarField",alias:null,name:"viewerInvitedAuthorToTribe",args:null,storageKey:null},Z={kind:"LinkedField",alias:null,name:"socialVoters",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[u,l,d,m,c,g,a,p,y,k,v,F,C]},X=[{kind:"Literal",name:"first",value:2}],Y={kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[b,h]},$=[{kind:"Literal",name:"first",value:1}],ee={kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null},ne=["requestType"],le={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerDirectSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"LinkedField",alias:null,name:"authorTribeUser",storageKey:null,args:null,concreteType:"TribeUser",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isDirectSubscriber",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"permission",args:null,storageKey:null},l]}]};return{kind:"Request",fragment:{kind:"Fragment",name:"PostCommentWithPreviewLoadCommentQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"post",storageKey:null,args:n,concreteType:"Post",plural:!1,selections:[l,a,{kind:"FragmentSpread",name:"PostComment_post",args:[t]}]}]},operation:{kind:"Operation",name:"PostCommentWithPreviewLoadCommentQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"post",storageKey:null,args:n,concreteType:"Post",plural:!1,selections:[l,a,{kind:"ScalarField",alias:null,name:"numDisplayComments",args:null,storageKey:null},{kind:"ScalarField",alias:"hasUncollapsedTopLevelComments",name:"hasAtLeastNumTopLevelComments",args:[r,i],storageKey:'hasAtLeastNumTopLevelComments(num:1,requestType:"all_uncollapsed")'},{kind:"ScalarField",alias:"hasAtLeastPageSizeUncollapsedComments",name:"hasAtLeastNumTopLevelComments",args:[{kind:"Literal",name:"num",value:5},i],storageKey:'hasAtLeastNumTopLevelComments(num:5,requestType:"all_uncollapsed")'},{kind:"ScalarField",alias:"hasCollapsedTopLevelComments",name:"hasAtLeastNumTopLevelComments",args:[r,{kind:"Literal",name:"requestType",value:"collapsed"}],storageKey:'hasAtLeastNumTopLevelComments(num:1,requestType:"collapsed")'},{kind:"ScalarField",alias:null,name:"isCommentsDisabled",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"canViewerAddComment",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commentEntityType",args:null,storageKey:null},s,o,{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[u,l,d,{kind:"ScalarField",alias:"mediumProfileImageUrl",name:"profileImageUrl",args:[{kind:"Literal",name:"size",value:"medium"}],storageKey:'profileImageUrl(size:"medium")'},m,c,g,a,p,y,k,v,F,C]},l]},{kind:"ScalarField",alias:null,name:"commentType",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commentDraftContent",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"genericCommentsLiveBannerHash",args:[K],storageKey:"genericCommentsLiveBannerHash(requestType:4)"},{kind:"LinkedField",alias:"allCommentsConnection",name:"genericCommentsConnection",storageKey:null,args:S,concreteType:"GenericCommentsConnection",plural:!1,selections:[l,a,{kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[h,b]},{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"NodeEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[l,a,{kind:"InlineFragment",type:"Comment",selections:[T,s,L,R,o,I,w,_,A,E,D,V,N,O,B,P,x,q,U,j,U,j,M,Q,H,z,W,G,J,Z,{kind:"ScalarField",alias:null,name:"numReplies",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:"repliesConnection(first:2)",args:X,concreteType:"CommentRepliesConnection",plural:!1,selections:[l,a,Y,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[l,a,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[l,a,{kind:"InlineFragment",type:"Comment",selections:[T,o,L,R,I,w,_,A,E,D,V,N,O,B,P,x,s,q,U,j,U,j,M,Q,H,z,W,G,J,Z,{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:"repliesConnection(first:1)",args:$,concreteType:"CommentRepliesConnection",plural:!1,selections:[l,a,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[l,a,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[l,a,{kind:"InlineFragment",type:"Comment",selections:[L,B,{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,a,u,y,k,v,C]}]}]},ee]},Y]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:$,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:ne},le,C]}]},ee]}]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:X,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:ne},le,C]}]},ee,l]}]},{kind:"LinkedHandle",alias:"allCommentsConnection",name:"genericCommentsConnection",args:S,handle:"connection",key:"AllCommentsList_allCommentsConnection",filters:ne}]}]},params:{operationKind:"query",name:"PostCommentWithPreviewLoadCommentQuery",id:"5e3bef02a4179b64bd6fc84e3a32b741a81f61aa2738796ed4665730ca399895",text:null,metadata:{}}}}();v.hash="d1acc9c4a447eaab389f1e0bfd419cc6";var F=v,C=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l=[{kind:"Variable",name:"first",variableName:"first"}],a=[{kind:"FragmentSpread",name:"PostFeedStoryCommentPreview_post",args:l}];return{kind:"Fragment",name:"PostCommentWithPreview_post",type:"Post",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"first",type:"Int",defaultValue:5}],selections:[e,n,{kind:"ScalarField",alias:null,name:"isDeleted",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"pid",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"numDisplayComments",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"tribeItem",storageKey:null,args:null,concreteType:null,plural:!1,selections:[e,n,{kind:"ScalarField",alias:null,name:"isTribeItemDeleted",args:null,storageKey:null}]},{kind:"FragmentSpread",name:"PostFeaturedCommentPreview_post",args:null},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{experiment:"feed_story_comment_preview_v2",value:"expandable_stories"},condition:"onVariant",selections:a},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{experiment:"feed_story_comment_preview_v2",value:"short_content"},condition:"onVariant",selections:a},{kind:"FragmentSpread",name:"PostComment_post",args:l}]}}();C.hash="5fa29e1ddd9c86fba4ee0682962b25ed";var K,S=C,h=l("ZFNG"),b={kind:"Fragment",name:"PostComment_post",type:"Post",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"first",type:"Int",defaultValue:5},{kind:"LocalArgument",name:"skipCommentList",type:"Boolean",defaultValue:!1}],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"FragmentSpread",name:"CommentArea_container",args:[{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"skipCommentList",variableName:"skipCommentList"}]}],hash:"540574f67a6e42998fc54e20c45bc6f7"},T=b,L=l("vg+J"),R=l("EFAP"),I=l("VyO/"),w=l("nwxp"),_=l("q1tI"),A=l.n(_),E=l("h39y"),D=l("RqIh");function V(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=k()(e);if(n){var t=k()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return y()(this,l)}}var N=function(e){g()(l,e);var n=V(l);function l(){return u()(this,l),n.apply(this,arguments)}return m()(l,[{key:"render",value:function(){var e=this.props,n=e.post,l=e.hideCollapsedCommentsToggle,a=e.commentClickTime,t=function(e){var l,a=e.get(n.id);if(a){var t=E.ConnectionHandler.getConnection(a,"CommentFeaturedPreview_allComments",{requestType:4});if(t){var r=null===(l=e.getRootField("commentAdd"))||void 0===l?void 0:l.getLinkedRecord("comment");if(r){var i=e.get(r.getValue("id"));if(i){var s=E.ConnectionHandler.createEdge(e,t,i,"NodeEdge");E.ConnectionHandler.insertEdgeBefore(t,s)}}}}};return A.a.createElement(R.e.Consumer,null,(function(e){return A.a.createElement(L.a,{container:n,autoPaged:e===D.a.post_modal&&Object(w.g)(),hideCollapsedCommentsToggle:l,commentAddedUpdater:t,commentClickTime:a})}))}}]),l}(A.a.Component);N.fragments={post:void 0!==K?K:K=r},N.displayName="PostComment";var O,B=Object(I.b)(N),P={kind:"Fragment",name:"PostFeaturedCommentPreview_post",type:"Post",metadata:null,argumentDefinitions:[{kind:"RootArgument",name:"first",type:null}],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"numDisplayComments",args:null,storageKey:null},{kind:"ScalarField",alias:"hasUncollapsedTopLevelComments",name:"hasAtLeastNumTopLevelComments",args:[{kind:"Literal",name:"num",value:1},{kind:"Literal",name:"requestType",value:"all_uncollapsed"}],storageKey:'hasAtLeastNumTopLevelComments(num:1,requestType:"all_uncollapsed")'},{kind:"FragmentSpread",name:"PostComment_post",args:[{kind:"Variable",name:"first",variableName:"first"},{kind:"Literal",name:"skipCommentList",value:!0}]},{kind:"FragmentSpread",name:"CommentFeaturedPreview_container",args:[{kind:"Literal",name:"first",value:1}]}],hash:"6512c88f92ca3433358203eac27787ed"},x=P,q=l("Xy8g");function U(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=k()(e);if(n){var t=k()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return y()(this,l)}}var j=function(e){g()(l,e);var n=U(l);function l(){return u()(this,l),n.apply(this,arguments)}return m()(l,[{key:"render",value:function(){var e=this.props,n=e.post,l=e.onClick,a=n.numDisplayComments,t=n.hasUncollapsedTopLevelComments;return a&&t?A.a.createElement(q.a,{container:n,onClick:l,numDisplayComments:a}):A.a.createElement(B,{post:n})}}]),l}(A.a.Component);j.fragments={post:void 0!==O?O:O=i},j.displayName="PostFeaturedCommentPreview";var M,Q=Object(I.b)(j),H=l("Gnru"),z=l("hTns"),W={kind:"Fragment",name:"PostFeedStoryCommentPreview_post",type:"Post",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"first",type:"Int",defaultValue:5}],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"numDisplayComments",args:null,storageKey:null},{kind:"ScalarField",alias:"hasUncollapsedToplevelComments",name:"hasAtLeastNumTopLevelComments",args:[{kind:"Literal",name:"num",value:1},{kind:"Literal",name:"requestType",value:"all_uncollapsed"}],storageKey:'hasAtLeastNumTopLevelComments(num:1,requestType:"all_uncollapsed")'},{kind:"ScalarField",alias:null,name:"isCommentsDisabled",args:null,storageKey:null},{kind:"FragmentSpread",name:"PostComment_post",args:[{kind:"Variable",name:"first",variableName:"first"},{kind:"Literal",name:"skipCommentList",value:!0}]},{kind:"FragmentSpread",name:"FeedStoryCommentPreview_container",args:[{kind:"Literal",name:"first",value:1}]}],hash:"ab2c078462b7a81f03f19782de1a0fa9"},G=W,J=l("K1HT");function Z(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=k()(e);if(n){var t=k()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return y()(this,l)}}var X=function(e){g()(l,e);var n=Z(l);function l(){return u()(this,l),n.apply(this,arguments)}return m()(l,[{key:"render",value:function(){var e=this.props,n=e.post,l=e.onClick,a=e.hideCollapsedCommentsToggle,t=n.numDisplayComments,r=n.hasUncollapsedToplevelComments;return n.isCommentsDisabled&&!t?null:t?A.a.createElement(J.a,{container:n,onClick:l,hasUncollapsedToplevelComments:r}):A.a.createElement(B,{post:n,hideCollapsedCommentsToggle:a})}}]),l}(A.a.Component);X.fragments={post:void 0!==M?M:M=s},X.displayName="PostFeedStoryCommentPreview";var Y,$,ee=Object(I.b)(X);function ne(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=k()(e);if(n){var t=k()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return y()(this,l)}}var le=function(e){g()(l,e);var n=ne(l);function l(){return u()(this,l),n.apply(this,arguments)}return m()(l,[{key:"render",value:function(){var e=this,n=this.props,l=n.post,a=n.commentsExpanded,t=n.onExpand,r=n.useNewCommentPreview,i=n.commentClickTime,s=!a&&!!l.numDisplayComments;return A.a.createElement(H.ClientLogConsumer,null,(function(n){var a=function(){null===t||void 0===t||t(),n("PostCommentBarExpand",{pid:l.pid})};return A.a.createElement(A.a.Fragment,null,s&&(r?A.a.createElement(ee,{post:l,onClick:a,hideCollapsedCommentsToggle:r}):A.a.createElement(h.b,null,A.a.createElement(Q,{post:l,onClick:a}))),A.a.createElement(z.a,{shouldShow:!s},A.a.createElement(B,{post:e.props.post,commentClickTime:i})))}))}}]),l}(A.a.Component);le.fragments={post:void 0!==Y?Y:Y=t},le.queries={loadPostComment:void 0!==$?$:$=a},le.displayName="PostCommentWithPreview";n["default"]=Object(I.b)(le)},uRky:function(e,n,l){"use strict";l.d(n,"a",(function(){return E}));var a={};l.r(a),l.d(a,"default",(function(){return v}));var t=l("lSNA"),r=l.n(t),i=l("lwsE"),s=l.n(i),o=l("W8MJ"),u=l.n(o),d=l("7W2i"),m=l.n(d),c=l("a1gu"),g=l.n(c),p=l("Nsbk"),y=l.n(p),f=function(){var e=[{kind:"LocalArgument",name:"objectId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"containerContentType",type:"ContentTypes!",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null},{kind:"LocalArgument",name:"replyToId",type:"BigInt",defaultValue:null}],n=[{kind:"Variable",name:"containerContentType",variableName:"containerContentType"},{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"objectId",variableName:"objectId"},{kind:"Variable",name:"replyToId",variableName:"replyToId"}],l={kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},o=[s,a,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}];return{kind:"Request",fragment:{kind:"Fragment",name:"CommentAddMutation_commentAdd_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"commentAdd",storageKey:null,args:n,concreteType:"CommentAdd",plural:!1,selections:[l,{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:null,concreteType:"Comment",plural:!1,selections:[a,t,r,{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[i,{kind:"FragmentSpread",name:"UserName_user",args:null}]}]}]}]},operation:{kind:"Operation",name:"CommentAddMutation_commentAdd_Mutation",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"commentAdd",storageKey:null,args:n,concreteType:"CommentAdd",plural:!1,selections:[l,{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:null,concreteType:"Comment",plural:!1,selections:[a,t,r,{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[i,a,s,{kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:o},{kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:o},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]}]}]}]}]},params:{operationKind:"mutation",name:"CommentAddMutation_commentAdd_Mutation",id:"fddf61763668c59707a25f8de2c4216615c9c3623c5258fdd684dd575a0c134a",text:null,metadata:{}}}}();f.hash="91c535153ee0890d6d08ea978a328408";var k,v=f,F=l("jufJ"),C=l("LNH1"),K=l("p11P"),S=l("QLaP"),h=l.n(S),b=l("Pp7N"),T=l("VyO/"),L=l("q1tI"),R=l.n(L),I=l("h39y"),w=l("1TO/"),_=l("UDrg");function A(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=y()(e);if(n){var t=y()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return g()(this,l)}}var E=function(e){m()(l,e);var n=A(l);function l(){return s()(this,l),n.apply(this,arguments)}return u()(l,[{key:"render",value:function(){var e=this.props,n=e.objectId,a=e.commentType,t=e.replyToId,i=e.children,s=e.onSuccess,o=e.updater;return R.a.createElement(C.b,null,(function(e){return R.a.createElement(T.a,{mutation:l.mutations.addComment,onCompleted:function(l){var t=l.commentAdd,i=t.status,o=t.comment;if(i===w.a.success){h()(o,"Got success response without comment object");var u=o.commentId,d=o.url;b.b.dispatch({type:b.a.COMMENT_ADDED,payload:{commentId:u,url:d}}),Object(I.commitLocalUpdate)(K["default"],(function(e){var l;switch(a){case _.a.answer_comment:l=e.getRoot().getLinkedRecord("answer",{aid:n});break;case _.a.post_comment:l=e.getRoot().getLinkedRecord("post",{pid:n});break;case _.a.question_comment:l=e.getRoot().getLinkedRecord("question",{qid:n})}if(l){var t=JSON.parse(l.getValue("numDisplayComments"));l.setValue(t+1,"numDisplayComments")}})),s&&s({commentId:u,url:d})}else{var m;e.error(Object(F.plaintextTranslate)(R.a.createElement(F.EnumTranslate,{value:w.a[i]},(m={},r()(m,w.a.unconfirmed_email,"Please confirm your email before adding a comment."),r()(m,w.a.no_permission,"You do not have permission to add a comment to this item."),r()(m,w.a.comment_disabled,"Comments are disabled on this item."),r()(m,w.a.comment_item_deleted,"This item has been deleted."),r()(m,w.a.comment_too_long,"Your comment is too long. Please shorten it."),r()(m,w.a.comment_operation_error,"We were unable to add this comment. Please try again later."),r()(m,w.a.empty_content,"Your comment cannot be blank."),r()(m,"DEFAULT","We were unable to add this comment. Please try again later."),m))))}}},(function(e){return i((function(l){return e({updater:o,variables:{objectId:n,containerContentType:D(a),replyToId:t,content:JSON.stringify(l)}})}))}))}))}}]),l}(R.a.Component);E.mutations={addComment:void 0!==k?k:k=a},E.displayName="CommentAddMutation";var D=function(e){switch(e){case _.a.answer_comment:return _.a.answer;case _.a.question_comment:return _.a.question;case _.a.post_comment:return _.a.post}return h()(!1,"Unrecognized type ".concat(e)),_.a.answer}},"ut/Y":function(e,n,l){var a=l("ZCpW"),t=l("GDhZ"),r=l("zZ0H"),i=l("Z0cm"),s=l("+c4W");e.exports=function(e){return"function"==typeof e?e:null==e?r:"object"==typeof e?i(e)?t(e[0],e[1]):a(e):s(e)}},"vg+J":function(e,n,l){"use strict";var a={};l.r(a),l.d(a,"default",(function(){return X}));var t={};l.r(t),l.d(t,"default",(function(){return $}));var r={};l.r(r),l.d(r,"default",(function(){return ne}));var i={};l.r(i),l.d(i,"default",(function(){return ae}));var s={};l.r(s),l.d(s,"default",(function(){return re}));var o={};l.r(o),l.d(o,"default",(function(){return se}));var u={};l.r(u),l.d(u,"default",(function(){return ue}));var d={};l.r(d),l.d(d,"default",(function(){return me}));var m={};l.r(m),l.d(m,"default",(function(){return _e}));var c={};l.r(c),l.d(c,"default",(function(){return Ne}));var g={};l.r(g),l.d(g,"default",(function(){return ln}));var p={};l.r(p),l.d(p,"default",(function(){return gn}));var y={};l.r(y),l.d(y,"default",(function(){return yn}));var f={};l.r(f),l.d(f,"default",(function(){return Dn}));var k={};l.r(k),l.d(k,"default",(function(){return jn}));var v={};l.r(v),l.d(v,"default",(function(){return Qn}));var F={};l.r(F),l.d(F,"default",(function(){return $n}));var C={};l.r(C),l.d(C,"default",(function(){return nl}));var K={};l.r(K),l.d(K,"default",(function(){return gl}));var S={};l.r(S),l.d(S,"default",(function(){return Kl}));var h={};l.r(h),l.d(h,"default",(function(){return Ll}));var b={};l.r(b),l.d(b,"default",(function(){return ql}));var T={};l.r(T),l.d(T,"default",(function(){return jl}));var L={};l.r(L),l.d(L,"default",(function(){return Ql}));var R={};l.r(R),l.d(R,"default",(function(){return Jl}));var I={};l.r(I),l.d(I,"default",(function(){return Xl}));var w={};l.r(w),l.d(w,"default",(function(){return $l}));var _={};l.r(_),l.d(_,"default",(function(){return ia}));var A={};l.r(A),l.d(A,"default",(function(){return Na}));var E={};l.r(E),l.d(E,"default",(function(){return Ua}));var D={};l.r(D),l.d(D,"default",(function(){return Ma}));var V={};l.r(V),l.d(V,"default",(function(){return za}));var N={};l.r(N),l.d(N,"default",(function(){return Za}));var O={};l.r(O),l.d(O,"default",(function(){return vt}));var B={};l.r(B),l.d(B,"default",(function(){return Kt}));var P={};l.r(P),l.d(P,"default",(function(){return Et}));var x={};l.r(x),l.d(x,"default",(function(){return Vt}));var q=l("lwsE"),U=l.n(q),j=l("W8MJ"),M=l.n(j),Q=l("7W2i"),H=l.n(Q),z=l("a1gu"),W=l.n(z),G=l("Nsbk"),J=l.n(G),Z=function(){var e=[{kind:"LocalArgument",name:"id",type:"ID!",defaultValue:null}],n=[{kind:"Variable",name:"id",variableName:"id"}],l={kind:"ScalarField",alias:"hasCollapsedTopLevelComments",name:"hasAtLeastNumTopLevelComments",args:[{kind:"Literal",name:"num",value:1},{kind:"Literal",name:"requestType",value:"collapsed"}],storageKey:'hasAtLeastNumTopLevelComments(num:1,requestType:"collapsed")'},a={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"containerId",args:null,storageKey:null},i=[{kind:"Literal",name:"first",value:3},{kind:"Literal",name:"requestType",value:3}],s={kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null}]},o={kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},u={kind:"ScalarField",alias:null,name:"isDeleted",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"deletedTime",args:null,storageKey:null},m={kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"isReply",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"viewerIsAuthor",args:null,storageKey:null},p={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},y={kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},k={kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},v={kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},F={kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},C={kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},K=[t,a,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}],S={kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:K},h={kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:K},b={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},T={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]},L={kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[a,p,y,f,k,v,t,F,C,S,h,{kind:"ScalarField",alias:null,name:"isBlocking",args:null,storageKey:null},b,T]},R={kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"canSeeDeletedContent",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isAdmin",args:null,storageKey:null},a,t,{kind:"ScalarField",alias:null,name:"isAdminMode",args:null,storageKey:null}]},I={kind:"ScalarField",alias:null,name:"commenterIsTribeModerator",args:null,storageKey:null},w={kind:"ScalarField",alias:null,name:"commenterIsTribeAdmin",args:null,storageKey:null},_={kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[a,t,p]},A={kind:"ScalarField",alias:null,name:"creationTime",args:null,storageKey:null},E={kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},D={kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},V={kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null},a,t,{kind:"ScalarField",alias:null,name:"viewerCanModerate",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null}]},N={kind:"ScalarField",alias:null,name:"authorIsBlockedByTribe",args:null,storageKey:null},O={kind:"ScalarField",alias:null,name:"replyDraftContent",args:null,storageKey:null},B={kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null},P={kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null},x={kind:"ScalarField",alias:null,name:"viewerCanDelete",args:null,storageKey:null},q={kind:"ScalarField",alias:null,name:"viewerCanAdminDelete",args:null,storageKey:null},U={kind:"ScalarField",alias:null,name:"viewerCanBlockCommentAuthor",args:null,storageKey:null},j={kind:"ScalarField",alias:null,name:"viewerCanInviteToContribute",args:null,storageKey:null},M={kind:"ScalarField",alias:null,name:"reportableId",args:null,storageKey:null},Q={kind:"ScalarField",alias:null,name:"viewerHasReported",args:null,storageKey:null},H={kind:"ScalarField",alias:null,name:"viewerInvitedAuthorToTribe",args:null,storageKey:null},z={kind:"LinkedField",alias:null,name:"socialVoters",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[p,a,y,f,k,v,t,F,C,S,h,b,T]},W={kind:"Literal",name:"requestType",value:"all"},G=[{kind:"Literal",name:"first",value:2},W],J=[{kind:"Literal",name:"first",value:1},W],Z={kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null},X=["requestType"],Y={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerDirectSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"LinkedField",alias:null,name:"authorTribeUser",storageKey:null,args:null,concreteType:"TribeUser",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isDirectSubscriber",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"permission",args:null,storageKey:null},a]}]};return{kind:"Request",fragment:{kind:"Fragment",name:"CommentAreaLoadCollapsedQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:n,concreteType:null,plural:!1,selections:[l,{kind:"FragmentSpread",name:"CollapsedCommentList_container",args:null}]}]},operation:{kind:"Operation",name:"CommentAreaLoadCollapsedQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:n,concreteType:null,plural:!1,selections:[l,a,t,r,{kind:"ScalarField",alias:null,name:"collapsedCommentCount",args:null,storageKey:null},{kind:"LinkedField",alias:"hiddenComments",name:"genericCommentsConnection",storageKey:"genericCommentsConnection(first:3,requestType:3)",args:i,concreteType:"GenericCommentsConnection",plural:!1,selections:[a,t,s,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"NodeEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[a,t,{kind:"InlineFragment",type:"Comment",selections:[o,u,d,m,c,g,L,R,I,w,_,A,E,D,V,N,r,O,B,P,B,P,x,q,U,j,M,Q,H,z,{kind:"ScalarField",alias:null,name:"numReplies",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:'repliesConnection(first:2,requestType:"all")',args:G,concreteType:"CommentRepliesConnection",plural:!1,selections:[a,t,s,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[a,t,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[a,t,{kind:"InlineFragment",type:"Comment",selections:[o,m,u,d,c,g,L,R,I,w,_,A,E,D,V,N,r,O,B,P,B,P,x,q,U,j,M,Q,H,z,{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:'repliesConnection(first:1,requestType:"all")',args:J,concreteType:"CommentRepliesConnection",plural:!1,selections:[a,t,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[a,t,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[a,t,{kind:"InlineFragment",type:"Comment",selections:[u,D,{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[a,t,p,C,S,h,T]}]}]},Z]},s]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:J,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:X},Y,T]}]},Z]}]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:G,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:X},Y,T]}]},Z,a]}]},{kind:"LinkedHandle",alias:"hiddenComments",name:"genericCommentsConnection",args:i,handle:"connection",key:"AllComments_hiddenComments",filters:X}]}]},params:{operationKind:"query",name:"CommentAreaLoadCollapsedQuery",id:"374227098760ee9d9ab474504b40cd97861cda3a30222b9e0d066032c9efccbc",text:null,metadata:{}}}}();Z.hash="c2fa0834e147649a27c45b8eeb94ac7a";var X=Z,Y=function(){var e=[{kind:"LocalArgument",name:"commentId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"commentType",type:"EnumOrString!",defaultValue:null}],n=[{kind:"Variable",name:"commentId",variableName:"commentId"},{kind:"Variable",name:"commentType",variableName:"commentType"}],l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"isDeleted",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"deletedTime",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},o={kind:"ScalarField",alias:null,name:"isReply",args:null,storageKey:null},u={kind:"ScalarField",alias:null,name:"viewerIsAuthor",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},m={kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},p={kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},y={kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},k=[a,l,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}],v={kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:k},F={kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:k},C={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},K={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]},S={kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,d,m,c,g,p,a,y,f,v,F,{kind:"ScalarField",alias:null,name:"isBlocking",args:null,storageKey:null},C,K]},h={kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"canSeeDeletedContent",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isAdmin",args:null,storageKey:null},l,a,{kind:"ScalarField",alias:null,name:"isAdminMode",args:null,storageKey:null}]},b={kind:"ScalarField",alias:null,name:"commenterIsTribeModerator",args:null,storageKey:null},T={kind:"ScalarField",alias:null,name:"commenterIsTribeAdmin",args:null,storageKey:null},L={kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,a,d]},R={kind:"ScalarField",alias:null,name:"creationTime",args:null,storageKey:null},I={kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},w={kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},_={kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null},l,a,{kind:"ScalarField",alias:null,name:"viewerCanModerate",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null}]},A={kind:"ScalarField",alias:null,name:"authorIsBlockedByTribe",args:null,storageKey:null},E={kind:"ScalarField",alias:null,name:"containerId",args:null,storageKey:null},D={kind:"ScalarField",alias:null,name:"replyDraftContent",args:null,storageKey:null},V={kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null},N={kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null},O={kind:"ScalarField",alias:null,name:"viewerCanDelete",args:null,storageKey:null},B={kind:"ScalarField",alias:null,name:"viewerCanAdminDelete",args:null,storageKey:null},P={kind:"ScalarField",alias:null,name:"viewerCanBlockCommentAuthor",args:null,storageKey:null},x={kind:"ScalarField",alias:null,name:"viewerCanInviteToContribute",args:null,storageKey:null},q={kind:"ScalarField",alias:null,name:"reportableId",args:null,storageKey:null},U={kind:"ScalarField",alias:null,name:"viewerHasReported",args:null,storageKey:null},j={kind:"ScalarField",alias:null,name:"viewerInvitedAuthorToTribe",args:null,storageKey:null},M={kind:"LinkedField",alias:null,name:"socialVoters",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[d,l,m,c,g,p,a,y,f,v,F,C,K]},Q=[{kind:"Literal",name:"first",value:2}],H={kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null}]},z=[{kind:"Literal",name:"first",value:1}],W={kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null},G=["requestType"],J={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerDirectSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"LinkedField",alias:null,name:"authorTribeUser",storageKey:null,args:null,concreteType:"TribeUser",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isDirectSubscriber",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"permission",args:null,storageKey:null},l]}]};return{kind:"Request",fragment:{kind:"Fragment",name:"CommentAreaAddedQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[{kind:"FragmentSpread",name:"CommentThreadItem_comment",args:null}]}]},operation:{kind:"Operation",name:"CommentAreaAddedQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[l,a,t,r,i,s,o,u,S,h,b,T,L,R,I,w,_,A,E,D,V,N,V,N,O,B,P,x,q,U,j,M,{kind:"ScalarField",alias:null,name:"numReplies",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:"repliesConnection(first:2)",args:Q,concreteType:"CommentRepliesConnection",plural:!1,selections:[l,a,H,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[l,a,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[l,a,{kind:"InlineFragment",type:"Comment",selections:[i,s,t,r,o,u,S,h,b,T,L,R,I,w,_,A,E,D,V,N,V,N,O,B,P,x,q,U,j,M,{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:"repliesConnection(first:1)",args:z,concreteType:"CommentRepliesConnection",plural:!1,selections:[l,a,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[l,a,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[l,a,{kind:"InlineFragment",type:"Comment",selections:[t,w,{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,a,d,f,v,F,K]}]}]},W]},H]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:z,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:G},J,K]}]},W]}]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:Q,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:G},J,K]}]},params:{operationKind:"query",name:"CommentAreaAddedQuery",id:"a4669415230f3bd3018104941939d8ec0ee676f9512c2c90a0977637e4e5693d",text:null,metadata:{}}}}();Y.hash="6d9a2fc159dd720c03a66e75c7c769d1";var $=Y,ee=function(){var e={kind:"Literal",name:"num",value:1},n={kind:"Literal",name:"requestType",value:"all_uncollapsed"};return{kind:"Fragment",name:"CommentArea_container",type:"Commentable",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"first",type:"Int",defaultValue:5},{kind:"LocalArgument",name:"skipCommentList",type:"Boolean",defaultValue:!1}],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"numDisplayComments",args:null,storageKey:null},{kind:"ScalarField",alias:"hasUncollapsedTopLevelComments",name:"hasAtLeastNumTopLevelComments",args:[e,n],storageKey:'hasAtLeastNumTopLevelComments(num:1,requestType:"all_uncollapsed")'},{kind:"ScalarField",alias:"hasAtLeastPageSizeUncollapsedComments",name:"hasAtLeastNumTopLevelComments",args:[{kind:"Literal",name:"num",value:5},n],storageKey:'hasAtLeastNumTopLevelComments(num:5,requestType:"all_uncollapsed")'},{kind:"ScalarField",alias:"hasCollapsedTopLevelComments",name:"hasAtLeastNumTopLevelComments",args:[e,{kind:"Literal",name:"requestType",value:"collapsed"}],storageKey:'hasAtLeastNumTopLevelComments(num:1,requestType:"collapsed")'},{kind:"ScalarField",alias:null,name:"isCommentsDisabled",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"canViewerAddComment",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commentEntityType",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"containerId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},{kind:"FragmentSpread",name:"CommentAddRoot_container",args:null},{kind:"Condition",isCustom:!1,customValue:null,passingValue:!1,condition:"skipCommentList",selections:[{kind:"FragmentSpread",name:"AllCommentsList_container",args:[{kind:"Variable",name:"first",variableName:"first"}]}]}]}}();ee.hash="aaed51ef551d07b963267b6cbb107ab2";var ne=ee,le=function(){var e=[{kind:"LocalArgument",name:"id",type:"ID!",defaultValue:null}],n=[{kind:"Variable",name:"id",variableName:"id"}],l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},t=[{kind:"Literal",name:"requestType",value:4}];return{kind:"Request",fragment:{kind:"Fragment",name:"AllCommentsListLiveBannerQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:n,concreteType:null,plural:!1,selections:[l,a,{kind:"ScalarField",alias:null,name:"genericCommentsLiveBannerHash",args:t,storageKey:"genericCommentsLiveBannerHash(requestType:4)",isLive:!0}]}]},operation:{kind:"Operation",name:"AllCommentsListLiveBannerQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:n,concreteType:null,plural:!1,selections:[l,a,{kind:"ScalarField",alias:null,name:"genericCommentsLiveBannerHash",args:t,storageKey:"genericCommentsLiveBannerHash(requestType:4)"}]}]},params:{operationKind:"query",name:"AllCommentsListLiveBannerQuery",id:"e356d2f738d93d6d19ceb8ae17786d298a7ba7df27932a1d86f2f65e54253be1",text:null,metadata:{}}}}();le.hash="4c6510384afc94b0402669f12fe42348";var ae=le,te=function(){var e=[{kind:"LocalArgument",name:"id",type:"ID!",defaultValue:null},{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"after",type:"String",defaultValue:null},{kind:"LocalArgument",name:"refetch",type:"Boolean",defaultValue:null}],n=[{kind:"Variable",name:"id",variableName:"id"}],l={kind:"Variable",name:"after",variableName:"after"},a={kind:"Variable",name:"first",variableName:"first"},t={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"containerId",args:null,storageKey:null},s={kind:"Literal",name:"requestType",value:4},o=[l,a,s],u={kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null},m={kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"isDeleted",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"deletedTime",args:null,storageKey:null},p={kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},y={kind:"ScalarField",alias:null,name:"isReply",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"viewerIsAuthor",args:null,storageKey:null},k={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},v={kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},F={kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},C={kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},K={kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},S={kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},h={kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},b=[r,t,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}],T={kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:b},L={kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:b},R={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},I={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]},w={kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[t,k,v,F,C,K,r,S,h,T,L,{kind:"ScalarField",alias:null,name:"isBlocking",args:null,storageKey:null},R,I]},_={kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"canSeeDeletedContent",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isAdmin",args:null,storageKey:null},t,r,{kind:"ScalarField",alias:null,name:"isAdminMode",args:null,storageKey:null}]},A={kind:"ScalarField",alias:null,name:"commenterIsTribeModerator",args:null,storageKey:null},E={kind:"ScalarField",alias:null,name:"commenterIsTribeAdmin",args:null,storageKey:null},D={kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[t,r,k]},V={kind:"ScalarField",alias:null,name:"creationTime",args:null,storageKey:null},N={kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},O={kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},B={kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null},t,r,{kind:"ScalarField",alias:null,name:"viewerCanModerate",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null}]},P={kind:"ScalarField",alias:null,name:"authorIsBlockedByTribe",args:null,storageKey:null},x={kind:"ScalarField",alias:null,name:"replyDraftContent",args:null,storageKey:null},q={kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null},U={kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null},j={kind:"ScalarField",alias:null,name:"viewerCanDelete",args:null,storageKey:null},M={kind:"ScalarField",alias:null,name:"viewerCanAdminDelete",args:null,storageKey:null},Q={kind:"ScalarField",alias:null,name:"viewerCanBlockCommentAuthor",args:null,storageKey:null},H={kind:"ScalarField",alias:null,name:"viewerCanInviteToContribute",args:null,storageKey:null},z={kind:"ScalarField",alias:null,name:"reportableId",args:null,storageKey:null},W={kind:"ScalarField",alias:null,name:"viewerHasReported",args:null,storageKey:null},G={kind:"ScalarField",alias:null,name:"viewerInvitedAuthorToTribe",args:null,storageKey:null},J={kind:"LinkedField",alias:null,name:"socialVoters",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[k,t,v,F,C,K,r,S,h,T,L,R,I]},Z=[{kind:"Literal",name:"first",value:2}],X={kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[d,u]},Y=[{kind:"Literal",name:"first",value:1}],$={kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null},ee=["requestType"],ne={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerDirectSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"LinkedField",alias:null,name:"authorTribeUser",storageKey:null,args:null,concreteType:"TribeUser",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isDirectSubscriber",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"permission",args:null,storageKey:null},t]}]};return{kind:"Request",fragment:{kind:"Fragment",name:"AllCommentsListQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:n,concreteType:null,plural:!1,selections:[{kind:"FragmentSpread",name:"AllCommentsList_container",args:[l,a,{kind:"Variable",name:"refetch",variableName:"refetch"}]}]}]},operation:{kind:"Operation",name:"AllCommentsListQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:n,concreteType:null,plural:!1,selections:[t,r,i,{kind:"ScalarField",alias:null,name:"genericCommentsLiveBannerHash",args:[s],storageKey:"genericCommentsLiveBannerHash(requestType:4)"},{kind:"LinkedField",alias:"allCommentsConnection",name:"genericCommentsConnection",storageKey:null,args:o,concreteType:"GenericCommentsConnection",plural:!1,selections:[t,r,{kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[u,d]},{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"NodeEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[t,r,{kind:"InlineFragment",type:"Comment",selections:[m,i,c,g,p,y,f,w,_,A,E,D,V,N,O,B,P,x,q,U,q,U,j,M,Q,H,z,W,G,J,{kind:"ScalarField",alias:null,name:"numReplies",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:"repliesConnection(first:2)",args:Z,concreteType:"CommentRepliesConnection",plural:!1,selections:[t,r,X,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[t,r,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[t,r,{kind:"InlineFragment",type:"Comment",selections:[m,p,c,g,y,f,w,_,A,E,D,V,N,O,B,P,i,x,q,U,q,U,j,M,Q,H,z,W,G,J,{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:"repliesConnection(first:1)",args:Y,concreteType:"CommentRepliesConnection",plural:!1,selections:[t,r,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[t,r,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[t,r,{kind:"InlineFragment",type:"Comment",selections:[c,O,{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[t,r,k,h,T,L,I]}]}]},$]},X]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:Y,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:ee},ne,I]}]},$]}]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:Z,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:ee},ne,I]}]},$,t]}]},{kind:"LinkedHandle",alias:"allCommentsConnection",name:"genericCommentsConnection",args:o,handle:"connection",key:"AllCommentsList_allCommentsConnection",filters:ee},{kind:"Condition",passingValue:!0,isCustom:!1,customValue:null,condition:"refetch",selections:[{kind:"ScalarField",alias:null,name:"numDisplayComments",args:null,storageKey:null}]}]}]},params:{operationKind:"query",name:"AllCommentsListQuery",id:"80e4b528e482ac94d3d7e8a7f2566d7d271a6da0373110b7faca76058393c7b8",text:null,metadata:{}}}}();te.hash="aef301a28c6c7af80410d6e853363972";var re=te,ie=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"containerId",args:null,storageKey:null},a=[{kind:"Literal",name:"requestType",value:4}];return{kind:"Fragment",name:"AllCommentsList_container",type:"Commentable",metadata:{connection:[{count:"first",cursor:"after",direction:"forward",path:["allCommentsConnection"]}]},argumentDefinitions:[{kind:"LocalArgument",name:"first",type:"Int",defaultValue:5},{kind:"LocalArgument",name:"after",type:"String",defaultValue:null},{kind:"LocalArgument",name:"refetch",type:"Boolean",defaultValue:!1}],selections:[e,n,l,{kind:"ScalarField",alias:null,name:"genericCommentsLiveBannerHash",args:a,storageKey:"genericCommentsLiveBannerHash(requestType:4)",isLive:!0},{kind:"LinkedField",alias:"allCommentsConnection",name:"__AllCommentsList_allCommentsConnection_connection",storageKey:"__AllCommentsList_allCommentsConnection_connection(requestType:4)",args:a,concreteType:"GenericCommentsConnection",plural:!1,selections:[e,n,{kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"NodeEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[e,n,{kind:"InlineFragment",type:"Comment",selections:[{kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},l,{kind:"FragmentSpread",name:"CommentThreadItem_comment",args:null}]}]},{kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null}]}]},{kind:"Condition",isCustom:!1,customValue:null,passingValue:!0,condition:"refetch",selections:[{kind:"ScalarField",alias:null,name:"numDisplayComments",args:null,storageKey:null}]}]}}();ie.hash="ba8bfd1b8bb2f31418d1660bfc12b641";var se=ie,oe={kind:"Fragment",name:"CommentThreadItem_comment",type:"Comment",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"repliesRequestType",type:"CommentRequestTypes",defaultValue:null}],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"FragmentSpread",name:"CommentItem_comment",args:null},{kind:"FragmentSpread",name:"CommentRepliesList_comment",args:[{kind:"Variable",name:"repliesRequestType",variableName:"repliesRequestType"}]}],hash:"46beda364b8f0b52e0cfad2cf1f6b0e1"},ue=oe,de={kind:"Fragment",name:"CommentItem_comment",type:"Comment",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isDeleted",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"deletedTime",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isReply",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerIsAuthor",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[{kind:"FragmentSpread",name:"UserPhoto_user",args:null}]},{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"canSeeDeletedContent",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isAdmin",args:null,storageKey:null}]},{kind:"FragmentSpread",name:"CommentHeader_comment",args:null},{kind:"FragmentSpread",name:"CommentQTextExpandable_comment",args:null},{kind:"FragmentSpread",name:"CommentActionBar_comment",args:null},{kind:"FragmentSpread",name:"CommentEditor_comment",args:null},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"FragmentSpread",name:"CommentId_comment",args:null}]}],hash:"33f2c6b61e7b728a71ab87ed7ef436e6"},me=de,ce=l("ZFNG"),ge=l("1cij"),pe=l("v2zQ"),ye=l("LW3J"),fe=l("jufJ"),ke=l("Yc5t"),ve=l("cbxS"),Fe=l("OMLc"),Ce=l("q1tI"),Ke=l.n(Ce);function Se(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var he=function(e){H()(l,e);var n=Se(l);function l(){return U()(this,l),n.apply(this,arguments)}return M()(l,[{key:"render",value:function(){return Ke.a.createElement(ve.a,{mb:"small",variant:"warning_inverted",icon:Ke.a.createElement(Fe.b,{name:"Caution"}),title:Ke.a.createElement(fe.Translate,null,"This content has been deleted and is only visible to you.")})}}]),l}(Ke.a.Component);he.displayName="DeletedContentBanner";var be=l("VwdU"),Te=l("RA+f"),Le=l("r+vq"),Re=l("VyO/"),Ie=l("AaDK"),we=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null};return{kind:"Fragment",name:"CommentActionBar_comment",type:"Comment",metadata:null,argumentDefinitions:[],selections:[e,n,{kind:"ScalarField",alias:null,name:"viewerIsAuthor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[e,n,{kind:"ScalarField",alias:null,name:"isBlocking",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"authorIsBlockedByTribe",args:null,storageKey:null},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:null,condition:"onLoggedOut",selections:[{kind:"FragmentSpread",name:"TribeLoggedOutCommentActionBar_comment",args:null}]},{kind:"FragmentSpread",name:"CommentReplyButton_comment",args:null},{kind:"FragmentSpread",name:"CommentUpvoteButton_comment",args:null},{kind:"FragmentSpread",name:"CommentDownvoteButton_comment",args:null},{kind:"FragmentSpread",name:"CommentUpvoteDownvoteButton_comment",args:null},{kind:"FragmentSpread",name:"CommentOverflowMenu_comment",args:null},{kind:"FragmentSpread",name:"CommentUpvoteBadgePile_comment",args:null}]}}();we.hash="adc1993be7e86f9d330c606dfb9a0178";var _e=we,Ae=l("ovGs"),Ee=l("EFAP"),De=l("wt7Y"),Ve={kind:"Fragment",name:"TribeLoggedOutCommentActionBar_comment",type:"Comment",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null}],hash:"f8674650c7daa7950192a1755a117465"},Ne=Ve,Oe=l("eP4p"),Be=l("zLpq"),Pe=l("QILm"),xe=l.n(Pe),qe=function(e){var n=e.count,l=e.pressed,a=e.onClick,t=e.showText,r=void 0===t||t,i=e.size,s=void 0===i?"regular":i,o=e.hasIcon,u=void 0===o||o,d=xe()(e,["count","pressed","onClick","showText","size","hasIcon"]);return Ke.a.createElement(Be.a,Object.assign({icon:u&&Ke.a.createElement(Fe.b,{name:"Reply"}),text:r?Object(fe.plaintextTranslate)("Reply"):undefined,count:n,pressed:l,variant:"gray",onClick:a,size:s},d))};qe.displayName="ReplyButton";var Ue=qe,je=function(e){return e&&e>0?Object(fe.plaintextTranslate)(Ke.a.createElement(fe.Translate,null,Ke.a.createElement(fe.FormattedNumber,{value:e})," ",Ke.a.createElement(fe.PluralTranslate,{value:e},{ONE:"upvote",OTHER:"upvotes"}))):Object(fe.plaintextTranslate)("Upvote")};je.displayName="getAriaLabel";var Me=function(e){var n=e.count,l=e.pressed,a=e.onClick,t=e.prominent,r=void 0===t||t,i=e.showText,s=void 0===i||i,o=e.className,u=void 0===o?"":o,d=xe()(e,["count","pressed","onClick","prominent","showText","className"]),m=Ke.a.createElement(fe.Translate,{context:fe.partOfSpeech.verb},"Upvote");return Ke.a.createElement(Be.a,Object.assign({icon:Ke.a.createElement(Fe.b,{name:"Upvote","aria-label":s?null:Object(fe.plaintextTranslate)(m)}),text:s?m:undefined,count:n,pressed:l,variant:r?"blue":"gray",onClick:a,useHaptics:!0,className:u,tooltipText:s?undefined:m,"aria-label":je(n)},d))};Me.displayName="UpvoteButton";var Qe,He=Me,ze=l("oJBy");function We(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var Ge=function(e){H()(l,e);var n=We(l);function l(){return U()(this,l),n.apply(this,arguments)}return M()(l,[{key:"render",value:function(){var e=this.props.comment.numUpvotes,n=[];n.push(Ke.a.createElement(Be.a,{icon:Ke.a.createElement(Fe.b,{name:"Downvote"}),tooltipText:Object(fe.plaintextTranslate)("Downvote"),variant:"gray",pressed:!1,onClick:function(){return Object(Oe.o)(ze.a.comment_downvote)},size:"small"}));var l=[];return l.push(Ke.a.createElement(Ue,{onClick:function(){return Object(Oe.o)(ze.a.comment_reply)}}),Ke.a.createElement(He,{count:e,pressed:!1,onClick:function(){return Object(Oe.o)(ze.a.comment_upvote)},prominent:!1})),Ke.a.createElement(De.d,{primaryActions:l,secondaryActions:n})}}]),l}(Ke.a.Component);Ge.fragments={comment:void 0!==Qe?Qe:Qe=c},Ge.displayName="TribeLoggedOutCommentActionBar";var Je,Ze=Object(Re.b)(Ge),Xe=l("FuLD"),Ye=l("RqIh"),$e=l("pVnL"),en=l.n($e),nn={kind:"Fragment",name:"CommentDownvoteButton_comment",type:"Comment",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null}],hash:"e923b29752fc9a60f4e238883995dad7"},ln=nn,an=l("Tvid"),tn=l("Gnru"),rn=l("VBwb");function sn(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var on=function(e){H()(l,e);var n=sn(l);function l(){return U()(this,l),n.apply(this,arguments)}return M()(l,[{key:"render",value:function(){var e=this.props.comment,n=this.props.comment,l=n.viewerVoteType,a=n.commentId,t=n.contentType,r=en()({},this.props),i=l===rn.a.downvote,s=i?rn.a.novote:rn.a.downvote;return Ke.a.createElement(tn.ClientLogConsumer,null,(function(n){return Ke.a.createElement(Be.a,Object.assign({icon:Ke.a.createElement(Fe.b,{name:"Downvote"}),tooltipText:Object(fe.plaintextTranslate)("Downvote"),variant:"gray",pressed:i,onClick:function(){Object(an.c)(Object.assign({},e,{oid:a,entityType:t}),s),i||n("CommentDownvote")}},r))}))}}],[{key:"getOverflowItem",value:function(e){var n=e.comment,l=n.viewerVoteType,a=n.commentId,t=n.contentType,r=l===rn.a.downvote?rn.a.novote:rn.a.downvote;return{label:l===rn.a.downvote?Object(fe.plaintextTranslate)("Remove Downvote"):Object(fe.plaintextTranslate)("Downvote Comment"),onSelected:function(){return Object(an.c)(Object.assign({},n,{oid:a,entityType:t}),r)}}}}]),l}(Ke.a.Component);on.fragments={comment:void 0!==Je?Je:Je=g},on.displayName="CommentDownvoteButton";var un=Object(Re.b)(on),dn=function(){var e=[{kind:"LocalArgument",name:"replyCommentId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"commentType",type:"EnumOrString!",defaultValue:null}],n=[{kind:"Variable",name:"commentId",variableName:"replyCommentId"},{kind:"Variable",name:"commentType",variableName:"commentType"}];return{kind:"Request",fragment:{kind:"Fragment",name:"CommentReplyButtonQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[{kind:"FragmentSpread",name:"CommentReplyButton_comment",args:null}]}]},operation:{kind:"Operation",name:"CommentReplyButtonQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"containerId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"replyDraftContent",args:null,storageKey:null}]}]},params:{operationKind:"query",name:"CommentReplyButtonQuery",id:"e74904a319e95ca0ad91edca3aa4035a195ca922845209dd3e2c111ef99e0ede",text:null,metadata:{}}}}();dn.hash="fc79a0f76ad91f1a33b4a929d5ee23b6";var mn,cn,gn=dn,pn={kind:"Fragment",name:"CommentReplyButton_comment",type:"Comment",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"containerId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"replyDraftContent",args:null,storageKey:null}],hash:"1f8fe0603d4451028e47d5ec4b450c5f"},yn=pn,fn=l("/bbo"),kn=l("AFGi"),vn=l("EreF"),Fn=l("PRXj"),Cn=l("QLaP"),Kn=l.n(Cn),Sn=l("nwxp"),hn=l("UyMh"),bn=l("1TO/"),Tn=l("8ojC"),Ln=l("uRky"),Rn=l("pEsO");function In(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var wn=function(e){H()(l,e);var n=In(l);function l(e){var a;return U()(this,l),(a=n.call(this,e)).editorRef=void 0,a.editorRef=Ke.a.createRef(),a.state={canSubmit:!1,isSubmitting:!1},a}return M()(l,[{key:"renderMobile",value:function(){var e=this.props,n=e.onReplyAdded,l=e.comment,a=e.showText,t=e.relay,r=xe()(e,["onReplyAdded","comment","showText","relay"]),i=l.commentId,s=l.contentType,o=l.containerId,u=l.replyDraftContent;return Ke.a.createElement(Tn.a,{commentType:s,containerId:o,replyCommentId:i,commentDraftContent:u,postDismissCallback:function(){setTimeout((function(){t.refetch({replyCommentId:i,commentType:s})}),200)},onCommentAdded:function(e){var l=e.commentId,a=e.url;n?n({commentId:l}):a&&Object(hn.b)(a)}},(function(e){return Ke.a.createElement(Ue,Object.assign({size:"small",onClick:e,showText:a,hasIcon:!Object(Rn.c)()},r))}))}},{key:"renderDesktop",value:function(){var e=this;return Ke.a.createElement(Ue,{size:"small",showText:this.props.showText,hasIcon:!Object(Rn.c)(),onClick:function(){e.props.toggleEditor(!0)}})}},{key:"renderDesktopEditing",value:function(){var e=this,n=this.props,l=n.onReplyAdded,a=n.comment,t=a.commentId,r=a.contentType,i=a.containerId;return Ke.a.createElement(Te.j,{mt:"small",mb:"medium",alignItems:"flex-end"},Ke.a.createElement(Fn.a,{onBlur:function(){setTimeout((function(){e.state.canSubmit||e.props.toggleEditor(!1)}),10)}},Ke.a.createElement(vn.a,{ref:this.editorRef,placeholder:Object(fe.plaintextTranslate)("Add a reply..."),toolbarOnWeb:!1,content:Object(kn.h)(),commandsToDisable:["horizontal-rule","video"],onMeaningfulChange:function(n){e.setState({canSubmit:!n.isEmpty()||n.linkSelector.isActive()})},editorPaddingReset:!0})),Ke.a.createElement(Te.e,null,Ke.a.createElement(Te.j,{alignItems:"center",justifyContent:"flex-end",mb:"tiny"},Ke.a.createElement(Ln.a,{objectId:i,commentType:r,replyToId:t},(function(n){return Ke.a.createElement(Te.e,{ml:"tiny"},Ke.a.createElement(fn.a,{size:"small",text:Object(fe.plaintextTranslate)(Ke.a.createElement(fe.Translate,{context:fe.partOfSpeech.verb},"Reply")),disabled:!e.state.canSubmit||e.state.isSubmitting,onClick:function(){e.state.canSubmit&&e.editorRef.current&&!e.state.isSubmitting&&e.setState({isSubmitting:!0},(function(){var a=e.editorRef.current.save();n(a).then((function(n){var a=n.data.commentAdd,t=a.status,r=a.comment;e.setState({isSubmitting:!1},(function(){if(t===bn.a.success){Kn()(r,"Got success response without comment object");var n=r.commentId,a=r.url;e.editorRef.current.clear(),e.props.toggleEditor(!1),l?l({commentId:n}):Object(hn.b)(a)}}))}))}))}}))})))))}},{key:"render",value:function(){return Object(Sn.e)()?this.renderMobile():this.props.editing?this.renderDesktopEditing():this.renderDesktop()}}]),l}(Ke.a.Component);wn.fragments={comment:void 0!==mn?mn:mn=y},wn.queries={refetchQuery:void 0!==cn?cn:cn=p},wn.defaultProps={showText:!0},wn.displayName="CommentReplyButton";var _n,An=Object(Re.f)(wn),En={kind:"Fragment",name:"CommentUpvoteBadgePile_comment",type:"Comment",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"socialVoters",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},{kind:"FragmentSpread",name:"UserPhoto_user",args:null}]}],hash:"78a9e196e95c94b261796b33c7bc24f7"},Dn=En,Vn=l("JWOy"),Nn=l("qClD");function On(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var Bn=function(e){H()(l,e);var n=On(l);function l(){return U()(this,l),n.apply(this,arguments)}return M()(l,[{key:"render",value:function(){var e=this.props.comment,n=e.id,l=e.socialVoters;return l===undefined||0===l.length?null:Ke.a.createElement(Nn.a,{nodeId:n},(function(e){return Ke.a.createElement(Te.f,{onClick:function(){return e()},display:"flex",minWidth:30,minHeight:30,alignItems:"center",justifyContent:"center"},Ke.a.createElement(Vn.a,{maxCount:3,tooltipText:Object(fe.plaintextTranslate)("Upvotes")},l.map((function(e){return Ke.a.createElement(Le.a,{key:e.uid,user:e,linked:!1})}))))}))}}]),l}(Ke.a.Component);Bn.fragments={comment:void 0!==_n?_n:_n=f},Bn.displayName="CommentUpvoteBadgePile";var Pn=Object(Re.b)(Bn),xn=function(){var e=[{kind:"LocalArgument",name:"commentId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"commentType",type:"EnumOrString!",defaultValue:null}],n=[{kind:"Variable",name:"commentId",variableName:"commentId"},{kind:"Variable",name:"commentType",variableName:"commentType"}],l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"CommentUpvoteButtonReloadableQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[l,a,{kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null,isLive:!0},{kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null,isLive:!0}]}]},operation:{kind:"Operation",name:"CommentUpvoteButtonReloadableQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[l,a,{kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null}]}]},params:{operationKind:"query",name:"CommentUpvoteButtonReloadableQuery",id:"245100e41ce5a7735dfa3a44c342439cd35fcab3a971789c96895e3a62f31d4d",text:null,metadata:{}}}}();xn.hash="a2a0421119fb96996c2c7d674a1da2c2";var qn,Un,jn=xn,Mn={kind:"Fragment",name:"CommentUpvoteButton_comment",type:"Comment",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerIsAuthor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null,isLive:!0},{kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null,isLive:!0}],hash:"3a669b1e293395b5d13809383137738f"},Qn=Mn,Hn=l("hXLn"),zn=l("Pp7N");function Wn(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var Gn=function(e){H()(l,e);var n=Wn(l);function l(){return U()(this,l),n.apply(this,arguments)}return M()(l,[{key:"render",value:function(){var e=this.props,n=e.comment,a=xe()(e,["comment"]),t=n.commentId,r=n.contentType,i=n.numUpvotes,s=n.viewerVoteType,o=n.viewerIsAuthor,u=s===rn.a.upvote,d=u?rn.a.novote:rn.a.upvote;return Ke.a.createElement(Hn.a,{fragmentOrQuery:l.queries.comment,initialData:{comment:n},variables:{commentId:t,commentType:r}},Ke.a.createElement(tn.ClientLogConsumer,null,(function(e){return Ke.a.createElement(He,Object.assign({count:i,pressed:u&&!o,onClick:function(){Object(an.c)(Object.assign({},n,{oid:t,entityType:r}),d),!u&&(e("CommentUpvote"),Object(Sn.g)()&&zn.b.dispatch({type:zn.a.COMMENT_UPVOTED,payload:{commentId:t}}))},prominent:!1,size:"small",disabled:o},a))})))}}]),l}(Ke.a.Component);Gn.fragments={comment:void 0!==qn?qn:qn=v},Gn.defaultProps={showText:!0},Gn.queries={comment:void 0!==Un?Un:Un=k},Gn.displayName="CommentUpvoteButton";var Jn=Object(Re.b)(Gn),Zn=function(){var e=[{kind:"LocalArgument",name:"commentId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"commentType",type:"EnumOrString!",defaultValue:null}],n=[{kind:"Variable",name:"commentId",variableName:"commentId"},{kind:"Variable",name:"commentType",variableName:"commentType"}],l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"CommentUpvoteDownvoteButtonReloadableQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[l,a,{kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null,isLive:!0},{kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null,isLive:!0}]}]},operation:{kind:"Operation",name:"CommentUpvoteDownvoteButtonReloadableQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[l,a,{kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null}]}]},params:{operationKind:"query",name:"CommentUpvoteDownvoteButtonReloadableQuery",id:"48dcb89a02baaeb3fc3ed54f1983b88670dcac57bb2bb0597b962c9ae6087f36",text:null,metadata:{}}}}();Zn.hash="874e9393a06722b9010ab07ea4a63c03";var Xn,Yn,$n=Zn,el={kind:"Fragment",name:"CommentUpvoteDownvoteButton_comment",type:"Comment",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerIsAuthor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null,isLive:!0},{kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null,isLive:!0}],hash:"d487a88e7af973be886b966634f885fb"},nl=el,ll=l("1tiB");function al(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var tl=function(e){H()(l,e);var n=al(l);function l(){return U()(this,l),n.apply(this,arguments)}return M()(l,[{key:"render",value:function(){var e=this.props,n=e.comment,a=xe()(e,["comment"]),t=n.commentId,r=n.contentType,i=n.numUpvotes,s=n.viewerVoteType,o=n.viewerIsAuthor,u=s===rn.a.upvote,d=u?rn.a.novote:rn.a.upvote,m=s===rn.a.downvote,c=m?rn.a.novote:rn.a.downvote;return Ke.a.createElement(Hn.a,{fragmentOrQuery:l.queries.comment,initialData:{comment:n},variables:{commentId:t,commentType:r}},Ke.a.createElement(tn.ClientLogConsumer,null,(function(e){return Ke.a.createElement(ll.a,Object.assign({upvoteCount:i,upvotePressed:u&&!o,upvoteOnClick:function(){Object(an.c)(Object.assign({},n,{oid:t,entityType:r}),d),!u&&(e("CommentUpvote"),Object(Sn.g)()&&zn.b.dispatch({type:zn.a.COMMENT_UPVOTED,payload:{commentId:t}}))},downvotePressed:m,downvoteOnClick:function(){Object(an.c)(Object.assign({},n,{oid:t,entityType:r}),c),m||e("CommentDownvote")},size:"small",disabled:o},a))})))}}]),l}(Ke.a.Component);tl.fragments={comment:void 0!==Xn?Xn:Xn=C},tl.queries={comment:void 0!==Yn?Yn:Yn=F},tl.displayName="CommentUpvoteDownvoteButton";var rl,il=Object(Re.b)(tl);function sl(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var ol=function(e){H()(l,e);var n=sl(l);function l(e){var a;return U()(this,l),(a=n.call(this,e)).state={showReplyEditor:!1},a}return M()(l,[{key:"getPrimaryActions",value:function(){var e=this,n=this.props,l=n.comment,a=n.onReplyAdded,t=n.isCommentsDisabled,r=l.user,i=l.authorIsBlockedByTribe,s=r.isBlocking,o=!(i||s),u=[];return u.push(Ke.a.createElement(De.b,{size:"small",priority:1,render:function(e){return"consistent"===Object(Rn.c)()?Ke.a.createElement(il,{comment:l}):Ke.a.createElement(Jn,{comment:l,showText:"lightweight"!==Object(Rn.c)()&&!e.wantsTruncation})}})),"lightweight"===Object(Rn.c)()&&u.push(Ke.a.createElement(De.b,{size:"small",priority:1,render:function(){return Ke.a.createElement(un,{comment:l})}})),o&&!t&&u.push(Ke.a.createElement(De.b,{size:"small",priority:1,render:function(n){return Ke.a.createElement(An,{showText:!n.wantsTruncation,comment:l,editing:!1,onReplyAdded:a,toggleEditor:function(n){return e.setState({showReplyEditor:n})}})}})),u}},{key:"getSecondaryActions",value:function(){var e=this.props,n=e.comment,l=e.toggleEditor,a=e.isCommentsDisabled,t=n.viewerIsAuthor,r=[];return Object(Rn.c)()||(r.push(Ke.a.createElement(Pn,{comment:n})),!t&&r.push(Ke.a.createElement(un,{comment:n}))),r.push(Ke.a.createElement(Ae.c,{comment:n,isCommentsDisabled:a,toggleEditor:l})),r}},{key:"renderActionBar",value:function(){return Ke.a.createElement(De.d,{size:"small",responsive:!0,primaryActions:this.getPrimaryActions(),secondaryActions:this.getSecondaryActions(),primaryItemSpacing:"lightweight"===Object(Rn.c)()?"tiny":"consistent"===Object(Rn.c)()?"small":0})}},{key:"render",value:function(){var e=this;if(Object(Xe.b)())return Ke.a.createElement(Ee.e.Consumer,null,(function(n){return(n===Ye.a.tribe_item||n===Ye.a.tribe)&&Ke.a.createElement(Ze,{comment:e.props.comment})}));var n=this.props,l=n.comment,a=n.onReplyAdded,t=l.user,r=l.authorIsBlockedByTribe,i=t.isBlocking,s=!(r||i);return Ke.a.createElement(Ke.a.Fragment,null,this.state.showReplyEditor?Ke.a.createElement(Ke.a.Fragment,null,s&&Ke.a.createElement(An,{comment:l,editing:!0,onReplyAdded:a,toggleEditor:function(n){return e.setState({showReplyEditor:n})}})):this.renderActionBar())}}]),l}(Ke.a.Component);ol.fragments={comment:void 0!==rl?rl:rl=m},ol.displayName="CommentActionBar";var ul,dl=Object(Re.b)(ol),ml=l("vOnD"),cl={kind:"Fragment",name:"CommentEditor_comment",type:"Comment",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"FragmentSpread",name:"CommentEditMutation_comment",args:null}],hash:"70d45ae3b50e42b418a628af5353e751"},gl=cl,pl=l("9Tc6");function yl(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var fl=Object(ml["default"])(Te.s).withConfig({displayName:"CommentEditor___StyledText",componentId:"sc-1hr4eh4-0"})([".doc{line-height:22px;min-height:0;margin:0;padding:0;}"]),kl=function(e){H()(l,e);var n=yl(l);function l(e){var a;return U()(this,l),(a=n.call(this,e)).editorRef=void 0,a.state={buttonIsDisabled:!1},a.editorRef=Ke.a.createRef(),a}return M()(l,[{key:"render",value:function(){var e=this,n=this.props.comment,l=(n||{}).content,a="string"===typeof l?JSON.parse(l):l;return Ke.a.createElement(Ke.a.Fragment,null,Ke.a.createElement(fl,{bg:"white",borderAll:!0,borderRadius:"20px",py:"small",px:"medium"},Ke.a.createElement(vn.a,{ref:this.editorRef,placeholder:Object(fe.plaintextTranslate)("Add a comment..."),toolbarOnWeb:!1,content:a,commandsToDisable:["horizontal-rule","video"],editorPaddingReset:!0,onMeaningfulChange:function(n){n&&(n.isEmpty()&&!e.state.buttonIsDisabled?e.setState({buttonIsDisabled:!0}):!n.isEmpty()&&e.state.buttonIsDisabled&&e.setState({buttonIsDisabled:!1}))},settingOverrides:{qtext_hyperlink_embed:!0}})),Ke.a.createElement(Te.j,{justifyContent:"flex-end",my:"small"},Ke.a.createElement(Be.a,{text:Object(fe.plaintextTranslate)("Cancel"),variant:"gray",size:"small",onClick:this.props.onCancel}),Ke.a.createElement(pl.a,{comment:n},(function(n){return Ke.a.createElement(fn.a,{disabled:e.state.buttonIsDisabled,text:Object(fe.plaintextTranslate)("Update"),size:"small",onClick:function(){var l=JSON.stringify(e.editorRef.current.save());n(l),e.props.onSubmit()}})}))))}}]),l}(Ke.a.Component);kl.fragments={comment:void 0!==ul?ul:ul=K},kl.displayName="CommentEditor";var vl=Object(Re.b)(kl),Fl=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null};return{kind:"Fragment",name:"CommentHeader_comment",type:"Comment",metadata:null,argumentDefinitions:[],selections:[e,n,{kind:"ScalarField",alias:null,name:"commenterIsTribeModerator",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commenterIsTribeAdmin",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isReply",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[e,n,l,{kind:"FragmentSpread",name:"UserPhoto_user",args:null},{kind:"FragmentSpread",name:"UserLink_user",args:null}]},{kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[e,n,l]},{kind:"FragmentSpread",name:"CommentTimestamp_comment",args:null},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerDirectSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"LinkedField",alias:null,name:"authorTribeUser",storageKey:null,args:null,concreteType:"TribeUser",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isDirectSubscriber",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"permission",args:null,storageKey:null}]}]}]}}();Fl.hash="e9bdcf3462eb3517e0d30d1cd35604a0";var Cl,Kl=Fl,Sl=l("zv2T"),hl=l("F0ZP"),bl=l("sC65"),Tl={kind:"Fragment",name:"CommentTimestamp_comment",type:"Comment",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"creationTime",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null}],hash:"a21fe387fff7890b2b95037238da8fc6"},Ll=Tl;function Rl(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var Il=function(e){H()(l,e);var n=Rl(l);function l(){return U()(this,l),n.apply(this,arguments)}return M()(l,[{key:"render",value:function(){var e=this.props.comment,n=e.creationTime,l=e.url;return Ke.a.createElement(Te.p,{href:null!==l&&void 0!==l?l:undefined},Object(Rn.d)()?Ke.a.createElement(fe.FormattedDateTime,{utime:n,monthFormatLength:"short",formatType:fe.FormattedDateTimeType.CompactAll}):Ke.a.createElement(fe.FormattedDateTime,{utime:n}))}}]),l}(Ke.a.Component);Il.fragments={comment:void 0!==Cl?Cl:Cl=h},Il.displayName="CommentTimestamp";var wl,_l=Object(Re.b)(Il);function Al(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var El=function(e){H()(l,e);var n=Al(l);function l(){return U()(this,l),n.apply(this,arguments)}return M()(l,[{key:"render",value:function(){var e,n,l,a=this.props.comment,t=a.commenterIsTribeModerator,r=a.commenterIsTribeAdmin,i=a.isReply,s=a.user,o=a.owner,u=a.user;return Ke.a.createElement(hl.a,{forceInlineTimestamp:!0,photo:i&&!Object(Rn.d)()?Ke.a.createElement(Le.a,{user:u,size:18,shouldShowBadge:!0}):undefined,name:Ke.a.createElement(bl.a,{user:u,isTribePremiumMember:Object(Sl.c)()&&(null===(e=a.authorTribeUser)||void 0===e?void 0:e.isDirectSubscriber)}),isTribeAdmin:null!==r&&void 0!==r?r:undefined,isTribeModerator:null!==t&&void 0!==t?t:undefined,isOriginalAuthor:null!==(n=o.uid===s.uid)&&void 0!==n?n:undefined,timestamp:Ke.a.createElement(_l,{comment:a}),compact:null!==(l=i&&!Object(Rn.d)())&&void 0!==l?l:undefined})}}]),l}(Ke.a.Component);El.fragments={comment:void 0!==wl?wl:wl=S},El.displayName="CommentHeader";var Dl,Vl=Object(Re.b)(El),Nl=l("ptJ+");function Ol(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var Bl=function(e){H()(l,e);var n=Ol(l);function l(e){var a;return U()(this,l),(a=n.call(this,e)).commentDeletedMessage=function(e){return Ke.a.createElement(ye.a,null,Ke.a.createElement(fe.Translate,null,"Comment deleted"),0!==e?Ke.a.createElement(fe.FormattedDateTime,{utime:e}):null)},a.state={isEditing:!1},a}return M()(l,[{key:"render",value:function(){var e=this,n=this.props,l=n.comment,a=n.onReplyAdded,t=n.showHighlight,r=n.isCommentsDisabled,i=l.isDeleted&&!l.viewerIsAuthor&&!l.viewer.canSeeDeletedContent,s=l.viewer.isAdmin||l.viewerIsAuthor||!l.isDeleted&&!r;return i?Ke.a.createElement(ve.a,{my:"small",variant:"muted",dismissable:!1},Ke.a.createElement(Te.s,{fontSize:"small"},this.commentDeletedMessage(l.deletedTime))):Ke.a.createElement(ce.a,{showHighlight:t,isTopLevel:!l.isReply},Ke.a.createElement(ke.a,{onImpression:function(){Object(Ie.a)("comment_impression",{comment_id:l.commentId,comment_type:l.contentType})}},l.isDeleted&&Ke.a.createElement(he,null),Ke.a.createElement(be.a,{condition:!!Object(Rn.d)()||!l.isReply,wrapper:function(e){return Ke.a.createElement(Te.j,{alignItems:"start"},Ke.a.createElement(Le.a,{user:l.user,size:l.isReply?20:ce.k,shouldShowBadge:!0}),Ke.a.createElement(Te.e,{ml:"small",flex:"auto",minWidth:0},e))}},Ke.a.createElement(Te.e,{mb:Object(Rn.d)()?undefined:"tiny"},Ke.a.createElement(Vl,{comment:l})),Object(ge.c)()&&Ke.a.createElement(pe.a,{comment:l}),this.state.isEditing?Ke.a.createElement(vl,{comment:l,onSubmit:function(){e.setState({isEditing:!1})},onCancel:function(){e.setState({isEditing:!1})}}):Ke.a.createElement(Ke.a.Fragment,null,Ke.a.createElement(Nl.a,{comment:l,disableFullWidthImages:!0}),l.isDeleted?Ke.a.createElement(Te.s,{fontSize:"small",color:"red_error"},this.commentDeletedMessage(l.deletedTime)):null,s&&Ke.a.createElement(dl,{comment:l,onReplyAdded:a,toggleEditor:function(){return e.setState({isEditing:!0})},isCommentsDisabled:r})))))}}]),l}(Ke.a.Component);Bl.fragments={comment:void 0!==Dl?Dl:Dl=d},Bl.displayName="CommentItem";var Pl=Object(Re.b)(Bl),xl=function(){var e=[{kind:"LocalArgument",name:"commentId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"commentType",type:"EnumOrString!",defaultValue:null},{kind:"LocalArgument",name:"requestType",type:"CommentRequestTypes",defaultValue:null},{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"after",type:"String",defaultValue:null}],n=[{kind:"Variable",name:"commentId",variableName:"commentId"},{kind:"Variable",name:"commentType",variableName:"commentType"}],l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"numReplies",args:null,storageKey:null},s={kind:"Variable",name:"requestType",variableName:"requestType"},o={kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null}]},u={kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null},d=[{kind:"Variable",name:"after",variableName:"after"},{kind:"Variable",name:"first",variableName:"first"},s],m={kind:"ScalarField",alias:null,name:"isDeleted",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},p={kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},y={kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},k={kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},v={kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},F=[a,l,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}],C={kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:F},K={kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:F},S={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},h={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]},b={kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},T={kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null},L={kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null},R=[{kind:"Literal",name:"first",value:1},s],I=["requestType"];return{kind:"Request",fragment:{kind:"Fragment",name:"CommentRepliesListQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[l,a,t,r,i,{kind:"LinkedField",alias:"repliesConnection",name:"__CommentRepliesList_repliesConnection_connection",storageKey:null,args:[s],concreteType:"CommentRepliesConnection",plural:!1,selections:[l,a,o,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[l,a,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[l,a,{kind:"InlineFragment",type:"Comment",selections:[t,r,{kind:"FragmentSpread",name:"CommentReplyListItem_comment",args:[{kind:"Variable",name:"repliesRequestType",variableName:"requestType"}]}]}]},u]}]}]}]},operation:{kind:"Operation",name:"CommentRepliesListQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[l,a,t,r,i,{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:null,args:d,concreteType:"CommentRepliesConnection",plural:!1,selections:[l,a,o,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[l,a,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[l,a,{kind:"InlineFragment",type:"Comment",selections:[t,r,m,{kind:"ScalarField",alias:null,name:"deletedTime",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isReply",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerIsAuthor",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,c,g,p,y,f,a,k,v,C,K,{kind:"ScalarField",alias:null,name:"isBlocking",args:null,storageKey:null},S,h]},{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"canSeeDeletedContent",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isAdmin",args:null,storageKey:null},l,a,{kind:"ScalarField",alias:null,name:"isAdminMode",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"commenterIsTribeModerator",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commenterIsTribeAdmin",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,a,c]},{kind:"ScalarField",alias:null,name:"creationTime",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},b,{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null},l,a,{kind:"ScalarField",alias:null,name:"viewerCanModerate",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"authorIsBlockedByTribe",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"containerId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"replyDraftContent",args:null,storageKey:null},T,L,T,L,{kind:"ScalarField",alias:null,name:"viewerCanDelete",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanAdminDelete",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanBlockCommentAuthor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanInviteToContribute",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"reportableId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerHasReported",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerInvitedAuthorToTribe",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"socialVoters",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[c,l,g,p,y,f,a,k,v,C,K,S,h]},{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:null,args:R,concreteType:"CommentRepliesConnection",plural:!1,selections:[l,a,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[l,a,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[l,a,{kind:"InlineFragment",type:"Comment",selections:[m,b,{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,a,c,v,C,K,h]}]}]},u]},o]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:R,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:I},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerDirectSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"LinkedField",alias:null,name:"authorTribeUser",storageKey:null,args:null,concreteType:"TribeUser",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isDirectSubscriber",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"permission",args:null,storageKey:null},l]}]},h]}]},u]}]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:d,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:I}]}]},params:{operationKind:"query",name:"CommentRepliesListQuery",id:"eb8c97207ad79c0611ea616bf23c3e324dddaaaa143fe8e4a60e4d4b32b0dd61",text:null,metadata:{connection:[{count:"first",cursor:"after",direction:"forward",path:["comment","repliesConnection"]}]}}}}();xl.hash="251a28ea924e8f839a3c2687ab1d2697";var ql=xl,Ul=function(){var e=[{kind:"LocalArgument",name:"commentId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"commentType",type:"EnumOrString!",defaultValue:null}],n=[{kind:"Variable",name:"commentId",variableName:"commentId"},{kind:"Variable",name:"commentType",variableName:"commentType"}],l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"isDeleted",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},o={kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},u={kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},m={kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},p=[a,l,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}],y={kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:p},f={kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:p},k={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},v={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]},F={kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},C={kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null},K={kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null},S=[{kind:"Literal",name:"first",value:1}];return{kind:"Request",fragment:{kind:"Fragment",name:"CommentRepliesListAddedQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[l,a,t,r,{kind:"FragmentSpread",name:"CommentReplyListItem_comment",args:null}]}]},operation:{kind:"Operation",name:"CommentRepliesListAddedQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[l,a,t,r,i,{kind:"ScalarField",alias:null,name:"deletedTime",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isReply",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerIsAuthor",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,s,o,u,d,m,a,c,g,y,f,{kind:"ScalarField",alias:null,name:"isBlocking",args:null,storageKey:null},k,v]},{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"canSeeDeletedContent",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isAdmin",args:null,storageKey:null},l,a,{kind:"ScalarField",alias:null,name:"isAdminMode",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"commenterIsTribeModerator",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commenterIsTribeAdmin",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,a,s]},{kind:"ScalarField",alias:null,name:"creationTime",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},F,{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null},l,a,{kind:"ScalarField",alias:null,name:"viewerCanModerate",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"authorIsBlockedByTribe",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"containerId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"replyDraftContent",args:null,storageKey:null},C,K,C,K,{kind:"ScalarField",alias:null,name:"viewerCanDelete",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanAdminDelete",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanBlockCommentAuthor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanInviteToContribute",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"reportableId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerHasReported",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerInvitedAuthorToTribe",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"socialVoters",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[s,l,o,u,d,m,a,c,g,y,f,k,v]},{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:"repliesConnection(first:1)",args:S,concreteType:"CommentRepliesConnection",plural:!1,selections:[l,a,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[l,a,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[l,a,{kind:"InlineFragment",type:"Comment",selections:[i,F,{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,a,s,g,y,f,v]}]}]},{kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null}]}]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:S,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:["requestType"]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerDirectSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"LinkedField",alias:null,name:"authorTribeUser",storageKey:null,args:null,concreteType:"TribeUser",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isDirectSubscriber",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"permission",args:null,storageKey:null},l]}]},v]}]},params:{operationKind:"query",name:"CommentRepliesListAddedQuery",id:"ba42acac766af6a323516d55b4897358aa8b5bc399c5050939154a984abc9094",text:null,metadata:{}}}}();Ul.hash="4aa78b7bb19a5d6c8504e5c48754e658";var jl=Ul,Ml=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null};return{kind:"Fragment",name:"CommentRepliesList_comment",type:"Comment",metadata:{connection:[{count:null,cursor:null,direction:"forward",path:["repliesConnection"]}]},argumentDefinitions:[{kind:"LocalArgument",name:"repliesRequestType",type:"CommentRequestTypes",defaultValue:null}],selections:[e,n,l,a,{kind:"ScalarField",alias:null,name:"numReplies",args:null,storageKey:null},{kind:"LinkedField",alias:"repliesConnection",name:"__CommentRepliesList_repliesConnection_connection",storageKey:null,args:[{kind:"Variable",name:"requestType",variableName:"repliesRequestType"}],concreteType:"CommentRepliesConnection",plural:!1,selections:[e,n,{kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[e,n,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[e,n,{kind:"InlineFragment",type:"Comment",selections:[l,a,{kind:"FragmentSpread",name:"CommentReplyListItem_comment",args:[{kind:"Variable",name:"repliesRequestType",variableName:"repliesRequestType"}]}]}]},{kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null}]}]}]}}();Ml.hash="8a83457970781dd3891ad1abd60041fb";var Ql=Ml,Hl=l("D5Zh"),zl=l("td6z"),Wl=l("fV0L"),Gl={kind:"Fragment",name:"CommentReplyListItem_comment",type:"Comment",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"repliesRequestType",type:"CommentRequestTypes",defaultValue:null}],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},{kind:"FragmentSpread",name:"CommentItem_comment",args:null},{kind:"FragmentSpread",name:"CommentReplySwitcher_comment",args:[{kind:"Variable",name:"repliesRequestType",variableName:"repliesRequestType"}]}],hash:"9fccd8a4f4cb6d60c02ab94ade2e4605"},Jl=Gl,Zl=function(){var e=[{kind:"LocalArgument",name:"commentId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"commentType",type:"EnumOrString!",defaultValue:null},{kind:"LocalArgument",name:"requestType",type:"CommentRequestTypes",defaultValue:null}],n=[{kind:"Variable",name:"commentId",variableName:"commentId"},{kind:"Variable",name:"commentType",variableName:"commentType"}],l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},i={kind:"Variable",name:"requestType",variableName:"requestType"},s=[{kind:"Literal",name:"first",value:2},i],o={kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null}]},u={kind:"ScalarField",alias:null,name:"isDeleted",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},m={kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},p={kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},y={kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},k=[a,l,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}],v={kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:k},F={kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:k},C={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},K={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]},S={kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},h={kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null},b={kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null},T=[{kind:"Literal",name:"first",value:1},i],L={kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null},R=["requestType"];return{kind:"Request",fragment:{kind:"Fragment",name:"CommentReplySwitcherQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[l,a,{kind:"FragmentSpread",name:"CommentRepliesList_comment",args:[{kind:"Variable",name:"repliesRequestType",variableName:"requestType"}]}]}]},operation:{kind:"Operation",name:"CommentReplySwitcherQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[l,a,t,r,{kind:"ScalarField",alias:null,name:"numReplies",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:null,args:s,concreteType:"CommentRepliesConnection",plural:!1,selections:[l,a,o,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[l,a,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[l,a,{kind:"InlineFragment",type:"Comment",selections:[t,r,u,{kind:"ScalarField",alias:null,name:"deletedTime",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isReply",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerIsAuthor",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,d,m,c,g,p,a,y,f,v,F,{kind:"ScalarField",alias:null,name:"isBlocking",args:null,storageKey:null},C,K]},{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"canSeeDeletedContent",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isAdmin",args:null,storageKey:null},l,a,{kind:"ScalarField",alias:null,name:"isAdminMode",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"commenterIsTribeModerator",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commenterIsTribeAdmin",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,a,d]},{kind:"ScalarField",alias:null,name:"creationTime",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},S,{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null},l,a,{kind:"ScalarField",alias:null,name:"viewerCanModerate",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"authorIsBlockedByTribe",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"containerId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"replyDraftContent",args:null,storageKey:null},h,b,h,b,{kind:"ScalarField",alias:null,name:"viewerCanDelete",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanAdminDelete",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanBlockCommentAuthor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanInviteToContribute",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"reportableId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerHasReported",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerInvitedAuthorToTribe",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"socialVoters",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[d,l,m,c,g,p,a,y,f,v,F,C,K]},{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:null,args:T,concreteType:"CommentRepliesConnection",plural:!1,selections:[l,a,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[l,a,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[l,a,{kind:"InlineFragment",type:"Comment",selections:[u,S,{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,a,d,f,v,F,K]}]}]},L]},o]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:T,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:R},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerDirectSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"LinkedField",alias:null,name:"authorTribeUser",storageKey:null,args:null,concreteType:"TribeUser",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isDirectSubscriber",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"permission",args:null,storageKey:null},l]}]},K]}]},L]}]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:s,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:R}]}]},params:{operationKind:"query",name:"CommentReplySwitcherQuery",id:"bbd41663da3b9250e4643d08bbbe872ba4fec0e60ecd433f018d46a1097cf461",text:null,metadata:{}}}}();Zl.hash="dbfcdeb040881fff73c9b67b39ec6542";var Xl=Zl,Yl=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null};return{kind:"Fragment",name:"CommentReplySwitcher_comment",type:"Comment",metadata:{connection:[{count:null,cursor:null,direction:"forward",path:["repliesConnection"]}]},argumentDefinitions:[{kind:"LocalArgument",name:"repliesRequestType",type:"CommentRequestTypes",defaultValue:null}],selections:[e,n,{kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},{kind:"LinkedField",alias:"repliesConnection",name:"__CommentRepliesList_repliesConnection_connection",storageKey:null,args:[{kind:"Variable",name:"requestType",variableName:"repliesRequestType"}],concreteType:"CommentRepliesConnection",plural:!1,selections:[e,n,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[e,n,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[e,n,{kind:"InlineFragment",type:"Comment",selections:[{kind:"ScalarField",alias:null,name:"isDeleted",args:null,storageKey:null},{kind:"FragmentSpread",name:"CommentReplyPreview_comment",args:null}]}]},{kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null}]}]}]}}();Yl.hash="9e743ddc8a239bf9a3d58191e643ef05";var $l=Yl,ea=l("dPKq"),na=l("8lmh"),la=l("HZII"),aa=l.n(la),ta=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null};return{kind:"Fragment",name:"CommentReplyPreview_comment",type:"Comment",metadata:null,argumentDefinitions:[],selections:[e,n,{kind:"ScalarField",alias:null,name:"isDeleted",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[e,n,{kind:"FragmentSpread",name:"UserName_user",args:null}]}]}}();ta.hash="69117fba8b5b10fe141ac1cd7362ca91";var ra,ia=ta,sa=l("gP7D"),oa=l("R+um");function ua(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var da=function(e){H()(l,e);var n=ua(l);function l(){return U()(this,l),n.apply(this,arguments)}return M()(l,[{key:"render",value:function(){var e=this.props.comment,n=e.user,l=e.content;Kn()(null!==l,"missing content for comment");var a=JSON.parse(l);return Ke.a.createElement(ce.e,null,Ke.a.createElement(Te.s,{bold:!0,as:"span",pr:"tiny"},Ke.a.createElement(oa.b,{user:n})),Ke.a.createElement(sa.a,{qt:a,options:{lists:!1}}))}}]),l}(Ke.a.Component);da.fragments={comment:void 0!==ra?ra:ra=_},da.displayName="CommentReplyPreview";var ma,ca,ga=Object(Re.b)(da);function pa(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var ya=function(e){var n=e.commentId,l=e.commentType,a=e.isCommentsDisabled,t=e.repliesAdded,r=void 0===t?[]:t,i=e.requestType;return Ke.a.createElement(Hl.a,{query:fa.getQuery(),variables:{commentId:n,commentType:l,requestType:i}},(function(e){var n=e.loading,l=e.error,t=e.data,s=e.refetch;return n||l||null===(null===t||void 0===t?void 0:t.comment)?l?(console.error(l),Object(na.isConnectionError)(l)?Object(ea.a)(s):Object(ea.b)(s)):Ke.a.createElement(zl.c,null):Ke.a.createElement(Ia,{comment:t.comment,repliesAdded:r,isCommentsDisabled:a,requestType:i})}))},fa=function(e){H()(l,e);var n=pa(l);function l(e){var a,t,r,i,s,o,u,d;U()(this,l);var m=null!==(a=null===(t=(d=n.call(this,e)).props)||void 0===t||null===(r=t.comment)||void 0===r||null===(i=r.repliesConnection)||void 0===i||null===(s=i.edges)||void 0===s||null===(o=s[0])||void 0===o||null===(u=o.node)||void 0===u?void 0:u.isDeleted)&&void 0!==a&&a;return d.state={showPreview:!m},d}return M()(l,[{key:"render",value:function(){var e=this,n=this.props,l=n.comment,a=n.isCommentsDisabled,t=n.requestType;return l.repliesConnection.edges.length>0?this.state.showPreview?Ke.a.createElement(tn.ClientLogConsumer,null,(function(n){return Ke.a.createElement(Te.f,{onClick:function(){n("ChildCommentToggle"),e.setState({showPreview:!1})},underlineHover:!1,width:"100%",display:"block"},Ke.a.createElement(ga,{comment:l.repliesConnection.edges[0].node}))})):Ke.a.createElement(ya,{commentId:l.commentId,commentType:l.contentType,isCommentsDisabled:a,requestType:t}):null}}]),l}(Ke.a.Component);fa.connectionKey="CommentRepliesList",fa.fragments={comment:void 0!==ma?ma:ma=w},fa.getQuery=aa()((function(){return void 0!==ca?ca:ca=I})),fa.displayName="CommentReplySwitcher";var ka,va=Object(Re.b)(fa);function Fa(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var Ca=function(e){H()(l,e);var n=Fa(l);function l(e){var a;return U()(this,l),(a=n.call(this,e)).state={repliesAdded:[]},a}return M()(l,[{key:"render",value:function(){var e=this,n=this.props,l=n.comment,a=n.isCommentsDisabled,t=n.repliesRequestType;return Ke.a.createElement(tn.ClientLogConsumer,null,(function(n){return Ke.a.createElement(Te.e,null,Ke.a.createElement(Pl,{onReplyAdded:function(l){var a=l.commentId;e.setState((function(e){return{repliesAdded:[a].concat(e.repliesAdded)}})),n("CommentReply")},comment:l,isCommentsDisabled:a}),e.state.repliesAdded.length>0?Ke.a.createElement(ya,{commentId:l.commentId,commentType:l.contentType,repliesAdded:e.state.repliesAdded,isCommentsDisabled:a}):Ke.a.createElement(va,{comment:l,isCommentsDisabled:a,requestType:t}))}))}}]),l}(Ke.a.Component);Ca.fragments={comment:void 0!==ka?ka:ka=R},Ca.displayName="CommentReplyListItem";var Ka,Sa,ha,ba=Object(Re.b)(Ca);function Ta(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var La=function(e){H()(l,e);var n=Ta(l);function l(){return U()(this,l),n.apply(this,arguments)}return M()(l,[{key:"render",value:function(){var e=this.props,n=e.comment,a=e.isCommentsDisabled,t=e.repliesAdded,r=e.requestType,i=n.repliesConnection.edges;return 0===(void 0===i?[]:i).length&&0===t.length?null:Ke.a.createElement(ce.d,null,t.length>0?t.map((function(e){return Ke.a.createElement(Hl.a,{key:e,query:l.queries.addedReply,variables:{commentId:e,commentType:n.contentType}},(function(e){var n=e.loading,l=e.error,t=e.data;return n?Ke.a.createElement(zl.c,null):l||null===t.comment?null:Ke.a.createElement(ba,{comment:t.comment,isCommentsDisabled:a})}))})):null,Ke.a.createElement(Wl.a,{relayObject:this.props.relay,connection:n.repliesConnection,endOfPageComponent:function(e){return Ke.a.createElement(Te.f,{onClick:e,underlineHover:!1},Ke.a.createElement(ce.c,null))}},(function(e){var n=e.node,l=n.commentId;return l===undefined||-1===t.indexOf(l)?Ke.a.createElement(ba,{key:n.commentId,comment:n,isCommentsDisabled:a,repliesRequestType:r}):null})))}}]),l}(Ke.a.Component);La.initialPageSize=2,La.pageSize=5,La.connectionKey="CommentRepliesList",La.fragments={comment:void 0!==Ka?Ka:Ka=L},La.queries={addedReply:void 0!==Sa?Sa:Sa=T,commentRepliesList:void 0!==ha?ha:ha=b},La.connectionConfig={query:La.queries.commentRepliesList,direction:"forward",getConnectionFromProps:function(e){var n;return null===(n=e.comment)||void 0===n?void 0:n.repliesConnection},getFragmentVariables:function(e,n){return Object.assign({},e,{count:n})},getVariables:function(e,n){var l=n.cursor;return{commentId:e.comment.commentId,commentType:e.comment.contentType,requestType:e.requestType,first:La.pageSize,after:l}}},La.displayName="CommentRepliesList";var Ra,Ia=Object(Re.d)(La);function wa(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var _a=function(e){H()(l,e);var n=wa(l);function l(e){var a;return U()(this,l),(a=n.call(this,e)).state={repliesAdded:[]},a}return M()(l,[{key:"render",value:function(){var e=this,n=this.props,l=n.comment,a=n.isCommentsDisabled,t=n.repliesRequestType,r=n.hasTopBorder,i=void 0===r||r;return Ke.a.createElement(ce.f,{hasTopBorder:i},Ke.a.createElement(Pl,{onReplyAdded:function(n){var l=n.commentId;e.setState((function(e){return{repliesAdded:[l].concat(e.repliesAdded)}}))},comment:l,isCommentsDisabled:a}),Ke.a.createElement(Ia,{repliesAdded:this.state.repliesAdded,comment:l,isCommentsDisabled:a,requestType:t}))}}]),l}(Ke.a.Component);_a.fragments={comment:void 0!==Ra?Ra:Ra=u},_a.displayName="CommentThreadItem";var Aa=Object(Re.b)(_a),Ea=l("J4zp"),Da=l.n(Ea),Va=function(){var e=[{kind:"LocalArgument",name:"commentId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"commentType",type:"EnumOrString!",defaultValue:null}],n=[{kind:"Variable",name:"commentId",variableName:"commentId"},{kind:"Variable",name:"commentType",variableName:"commentType"}],l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"containerId",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},o={kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},u={kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},m={kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},p=[a,l,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}],y={kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:p},f={kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:p},k={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},v={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]},F={kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null},C={kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"NotifInjectedCommentsLoaderQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[l,a,t,{kind:"LinkedField",alias:null,name:"allAncestors",storageKey:null,args:null,concreteType:"Comment",plural:!0,selections:[l,a,r,i,t,{kind:"FragmentSpread",name:"CommentItem_comment",args:null},{kind:"FragmentSpread",name:"NotifInjectedCommentsPreviewLoader_comment",args:null}]}]}]},operation:{kind:"Operation",name:"NotifInjectedCommentsLoaderQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[l,a,t,{kind:"LinkedField",alias:null,name:"allAncestors",storageKey:null,args:null,concreteType:"Comment",plural:!0,selections:[l,a,r,i,t,{kind:"ScalarField",alias:null,name:"isDeleted",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"deletedTime",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isReply",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerIsAuthor",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,s,o,u,d,m,a,c,g,y,f,{kind:"ScalarField",alias:null,name:"isBlocking",args:null,storageKey:null},k,v]},{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"canSeeDeletedContent",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isAdmin",args:null,storageKey:null},l,a,{kind:"ScalarField",alias:null,name:"isAdminMode",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"commenterIsTribeModerator",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commenterIsTribeAdmin",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,a,s]},{kind:"ScalarField",alias:null,name:"creationTime",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null},l,a,{kind:"ScalarField",alias:null,name:"viewerCanModerate",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"authorIsBlockedByTribe",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"replyDraftContent",args:null,storageKey:null},F,C,F,C,{kind:"ScalarField",alias:null,name:"viewerCanDelete",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanAdminDelete",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanBlockCommentAuthor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanInviteToContribute",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"reportableId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerHasReported",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerInvitedAuthorToTribe",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"socialVoters",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[s,l,o,u,d,m,a,c,g,y,f,k,v]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerDirectSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"LinkedField",alias:null,name:"authorTribeUser",storageKey:null,args:null,concreteType:"TribeUser",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isDirectSubscriber",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"permission",args:null,storageKey:null},l]}]},v]}]}]},params:{operationKind:"query",name:"NotifInjectedCommentsLoaderQuery",id:"3e9af5a5c1204a55a7774df1c4085ee9b75094e742257a7c5c7f74b9955f3325",text:null,metadata:{}}}}();Va.hash="01ed0b819175e89444cd61fa462d595f";var Na=Va,Oa=l("nG0s"),Ba=l("s/A7"),Pa=l("mF64"),xa=l("UDrg"),qa=function(){var e=[{kind:"LocalArgument",name:"commentId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"commentType",type:"EnumOrString!",defaultValue:null},{kind:"LocalArgument",name:"filtered",type:"[BigInt!]",defaultValue:null}],n=[{kind:"Variable",name:"commentId",variableName:"commentId"},{kind:"Variable",name:"commentType",variableName:"commentType"}],l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},i={kind:"Variable",name:"filtered",variableName:"filtered"},s={kind:"Literal",name:"first",value:1},o=[i,s],u={kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null}]},d={kind:"ScalarField",alias:null,name:"isDeleted",args:null,storageKey:null},m={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},p={kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},y={kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},k={kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},v=[a,l,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}],F={kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:v},C={kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:v},K={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},S={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]},h={kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},b={kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null},T={kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null},L=[s],R={kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"NotifInjectedCommentsPreviewLoaderCommentRepliesListQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[l,a,t,r,{kind:"FragmentSpread",name:"NotifInjectedCommentsPreviewPagedList_comment",args:[i]}]}]},operation:{kind:"Operation",name:"NotifInjectedCommentsPreviewLoaderCommentRepliesListQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[l,a,t,r,{kind:"ScalarField",alias:null,name:"numReplies",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:null,args:o,concreteType:"CommentRepliesConnection",plural:!1,selections:[l,a,u,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[l,a,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[l,a,{kind:"InlineFragment",type:"Comment",selections:[t,r,d,{kind:"ScalarField",alias:null,name:"deletedTime",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isReply",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerIsAuthor",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,m,c,g,p,y,a,f,k,F,C,{kind:"ScalarField",alias:null,name:"isBlocking",args:null,storageKey:null},K,S]},{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"canSeeDeletedContent",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isAdmin",args:null,storageKey:null},l,a,{kind:"ScalarField",alias:null,name:"isAdminMode",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"commenterIsTribeModerator",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commenterIsTribeAdmin",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,a,m]},{kind:"ScalarField",alias:null,name:"creationTime",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},h,{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null},l,a,{kind:"ScalarField",alias:null,name:"viewerCanModerate",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"authorIsBlockedByTribe",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"containerId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"replyDraftContent",args:null,storageKey:null},b,T,b,T,{kind:"ScalarField",alias:null,name:"viewerCanDelete",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanAdminDelete",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanBlockCommentAuthor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanInviteToContribute",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"reportableId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerHasReported",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerInvitedAuthorToTribe",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"socialVoters",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[m,l,c,g,p,y,a,f,k,F,C,K,S]},{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:"repliesConnection(first:1)",args:L,concreteType:"CommentRepliesConnection",plural:!1,selections:[l,a,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[l,a,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[l,a,{kind:"InlineFragment",type:"Comment",selections:[d,h,{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,a,m,k,F,C,S]}]}]},R]},u]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:L,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:["requestType"]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerDirectSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"LinkedField",alias:null,name:"authorTribeUser",storageKey:null,args:null,concreteType:"TribeUser",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isDirectSubscriber",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"permission",args:null,storageKey:null},l]}]},S]}]},R]}]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:o,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:["filtered"]}]}]},params:{operationKind:"query",name:"NotifInjectedCommentsPreviewLoaderCommentRepliesListQuery",id:"ed4f3fe4cb64dd6dc472a96f1671198b16cffd4df07d25d255e019417ff96b63",text:null,metadata:{}}}}();qa.hash="0a54e5748df76ca2283a664182661081";var Ua=qa,ja={kind:"Fragment",name:"NotifInjectedCommentsPreviewLoader_comment",type:"Comment",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null}],hash:"4dc1dde0a9b55d42aa06d7bf9e2d660d"},Ma=ja,Qa=l("6Gvz"),Ha=function(){var e=[{kind:"LocalArgument",name:"commentId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"commentType",type:"EnumOrString!",defaultValue:null},{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"after",type:"String",defaultValue:null},{kind:"LocalArgument",name:"filtered",type:"[BigInt!]",defaultValue:null}],n=[{kind:"Variable",name:"commentId",variableName:"commentId"},{kind:"Variable",name:"commentType",variableName:"commentType"}],l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"numReplies",args:null,storageKey:null},s={kind:"Variable",name:"filtered",variableName:"filtered"},o={kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null}]},u={kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null},d=[{kind:"Variable",name:"after",variableName:"after"},s,{kind:"Variable",name:"first",variableName:"first"}],m={kind:"ScalarField",alias:null,name:"isDeleted",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},p={kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},y={kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},k={kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},v={kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},F=[a,l,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}],C={kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:F},K={kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:F},S={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},h={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]},b={kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},T={kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null},L={kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null},R=[{kind:"Literal",name:"first",value:1}];return{kind:"Request",fragment:{kind:"Fragment",name:"NotifInjectedCommentsPreviewPagedListCommentRepliesListQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[l,a,t,r,i,{kind:"LinkedField",alias:"repliesConnection",name:"__CommentRepliesList_repliesConnection_connection",storageKey:null,args:[s],concreteType:"CommentRepliesConnection",plural:!1,selections:[l,a,o,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[l,a,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[l,a,{kind:"InlineFragment",type:"Comment",selections:[t,r,{kind:"FragmentSpread",name:"CommentReplyListItem_comment",args:null}]}]},u]}]}]}]},operation:{kind:"Operation",name:"NotifInjectedCommentsPreviewPagedListCommentRepliesListQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"comment",storageKey:null,args:n,concreteType:"Comment",plural:!1,selections:[l,a,t,r,i,{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:null,args:d,concreteType:"CommentRepliesConnection",plural:!1,selections:[l,a,o,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[l,a,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[l,a,{kind:"InlineFragment",type:"Comment",selections:[t,r,m,{kind:"ScalarField",alias:null,name:"deletedTime",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isReply",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerIsAuthor",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,c,g,p,y,f,a,k,v,C,K,{kind:"ScalarField",alias:null,name:"isBlocking",args:null,storageKey:null},S,h]},{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"canSeeDeletedContent",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isAdmin",args:null,storageKey:null},l,a,{kind:"ScalarField",alias:null,name:"isAdminMode",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"commenterIsTribeModerator",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commenterIsTribeAdmin",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,a,c]},{kind:"ScalarField",alias:null,name:"creationTime",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},b,{kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null},l,a,{kind:"ScalarField",alias:null,name:"viewerCanModerate",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"authorIsBlockedByTribe",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"containerId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"replyDraftContent",args:null,storageKey:null},T,L,T,L,{kind:"ScalarField",alias:null,name:"viewerCanDelete",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanAdminDelete",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanBlockCommentAuthor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanInviteToContribute",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"reportableId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerHasReported",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerInvitedAuthorToTribe",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"socialVoters",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[c,l,g,p,y,f,a,k,v,C,K,S,h]},{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:"repliesConnection(first:1)",args:R,concreteType:"CommentRepliesConnection",plural:!1,selections:[l,a,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[l,a,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[l,a,{kind:"InlineFragment",type:"Comment",selections:[m,b,{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[l,a,c,v,C,K,h]}]}]},u]},o]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:R,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:["requestType"]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerDirectSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"LinkedField",alias:null,name:"authorTribeUser",storageKey:null,args:null,concreteType:"TribeUser",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isDirectSubscriber",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"permission",args:null,storageKey:null},l]}]},h]}]},u]}]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:d,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:["filtered"]}]}]},params:{operationKind:"query",name:"NotifInjectedCommentsPreviewPagedListCommentRepliesListQuery",id:"64fa96107a3c55a92d7a61b16f83036830bde0e8c75a628a9cb183ea0e1375fd",text:null,metadata:{connection:[{count:"first",cursor:"after",direction:"forward",path:["comment","repliesConnection"]}]}}}}();Ha.hash="42cb1734938bab668f0074375780dcea";var za=Ha,Wa=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null};return{kind:"Fragment",name:"NotifInjectedCommentsPreviewPagedList_comment",type:"Comment",metadata:{connection:[{count:null,cursor:null,direction:"forward",path:["repliesConnection"]}]},argumentDefinitions:[{kind:"LocalArgument",name:"filtered",type:"[BigInt!]",defaultValue:[]}],selections:[e,n,l,a,{kind:"ScalarField",alias:null,name:"numReplies",args:null,storageKey:null},{kind:"LinkedField",alias:"repliesConnection",name:"__CommentRepliesList_repliesConnection_connection",storageKey:null,args:[{kind:"Variable",name:"filtered",variableName:"filtered"}],concreteType:"CommentRepliesConnection",plural:!1,selections:[e,n,{kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[e,n,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[e,n,{kind:"InlineFragment",type:"Comment",selections:[l,a,{kind:"FragmentSpread",name:"CommentReplyListItem_comment",args:null}]}]},{kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null}]}]}]}}();Wa.hash="7e940ae6377c5bca2991b332a061002c";var Ga,Ja,Za=Wa;function Xa(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var Ya=function(e){H()(l,e);var n=Xa(l);function l(){return U()(this,l),n.apply(this,arguments)}return M()(l,[{key:"render",value:function(){var e,n,l,a,t,r=this,i=this.props,s=i.comment,o=i.isCommentsDisabled;if(!((null!==(e=null===(n=s.repliesConnection)||void 0===n||null===(l=n.edges)||void 0===l?void 0:l.length)&&void 0!==e?e:0)>0))return null;var u=new Set(this.props.commentsAlreadyRendered);return 0===(null===(a=s.repliesConnection)||void 0===a||null===(t=a.edges)||void 0===t?void 0:t.filter((function(e){return!r.props.commentsAlreadyRendered||!e.node.commentId||!u.has(e.node.commentId)}))).length?null:Ke.a.createElement(ce.d,null,Ke.a.createElement(Wl.a,{relayObject:this.props.relay,connection:s.repliesConnection,endOfPageComponent:function(e){return Ke.a.createElement(Te.f,{onClick:e,underlineHover:!1},Ke.a.createElement(ce.c,null))}},(function(e){var n=e.node;return r.props.commentsAlreadyRendered&&n.commentId&&u.has(n.commentId)?null:Ke.a.createElement(ba,{key:n.commentId,comment:n,isCommentsDisabled:o})})))}}]),l}(Ke.a.Component);Ya.initialPageSize=1,Ya.fragments={comment:void 0!==Ga?Ga:Ga=N},Ya.queries={commentRepliesList:void 0!==Ja?Ja:Ja=V},Ya.connectionConfig={query:Ya.queries.commentRepliesList,direction:"forward",getConnectionFromProps:function(e){var n;return null===(n=e.comment)||void 0===n?void 0:n.repliesConnection},getVariables:function(e,n){var l=n.cursor;return{commentId:e.comment.commentId,commentType:e.comment.contentType,first:Ya.initialPageSize,after:l,filtered:e.commentsAlreadyRendered||[]}},getFragmentVariables:function(e){return{filtered:e.filtered}}},Ya.displayName="NotifInjectedCommentsPreviewPagedList";var $a,et,nt=Object(Re.d)(Ya);function lt(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var at=function(e){H()(l,e);var n=lt(l);function l(){return U()(this,l),n.apply(this,arguments)}return M()(l,[{key:"render",value:function(){var e=this;return Ke.a.createElement(Hl.a,{query:l.queries.commentRepliesList,variables:{commentId:this.props.comment.commentId,commentType:this.props.comment.contentType,filtered:this.props.commentsAlreadyRendered}},(function(n){var l=n.loading,a=n.error,t=n.data;return l?Ke.a.createElement(zl.c,null):a?Ke.a.createElement(Qa.a,null,a):t.comment?Ke.a.createElement(nt,{comment:t.comment,commentsAlreadyRendered:e.props.commentsAlreadyRendered,isCommentsDisabled:e.props.isCommentsDisabled}):null}))}}]),l}(Ke.a.Component);at.initialPageSize=1,at.connectionKey="CommentRepliesList",at.fragments={comment:void 0!==$a?$a:$a=D},at.queries={commentRepliesList:void 0!==et?et:et=E},at.displayName="NotifInjectedCommentsPreviewLoader";var tt,rt=Object(Re.b)(at);function it(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var st=new Map([[1,xa.a.question_comment],[2,xa.a.answer_comment],[3,xa.a.post_comment]]),ot=function(e){var n=e.children,l=e.isTopLevel,a={};return Ke.a.createElement(Te.q,a,l?Ke.a.createElement(Te.e,null,n):Ke.a.createElement(ce.d,null,n))};ot.displayName="Wrapper";var ut,dt,mt,ct=function(e){var n=e.childRef,l=e.children,a=Object(Ce.useState)(!1),t=Da()(a,2),r=t[0],i=t[1];return Object(Ce.useEffect)((function(){r||(Object(Ba.a)(n.current,"center"),i(!0))}),[r,n]),l},gt=function(e){H()(l,e);var n=it(l);function l(e){var a;U()(this,l),(a=n.call(this,e)).commentId=void 0,a.commentType=void 0,a.scrollToRef=void 0;var t=Object(Pa.e)();a.commentId=Number(t.comment_id);var r=Number(t.comment_type);return a.commentType=st.get(r),a.scrollToRef=Ke.a.createRef(),a}return M()(l,[{key:"renderCommentsTree",value:function(e){var n=this,l=arguments.length>1&&arguments[1]!==undefined&&arguments[1];if(0===e.length)return null;var a=e[0],t=0===e.slice(1).length;return a&&Ke.a.createElement(ot,{isTopLevel:l},Ke.a.createElement(be.a,{condition:t,wrapper:function(e){return Ke.a.createElement(Te.e,{innerRef:n.scrollToRef},e)}},Ke.a.createElement(Pl,{key:a.commentId,comment:a,showHighlight:t,isCommentsDisabled:this.props.isCommentsDisabled})),this.renderCommentsTree(e.slice(1)),Ke.a.createElement(rt,{comment:a,commentsAlreadyRendered:e.map((function(e){return e.commentId})),isCommentsDisabled:this.props.isCommentsDisabled}))}},{key:"render",value:function(){var e=this,n=this.props.children;return Number.isNaN(this.commentId)||!this.commentType||this.props.containerObjectId!==this.props.commentContainerId?n():Ke.a.createElement(Hl.a,{query:l.queries.InjectedCommentsList,variables:{commentId:this.commentId,commentType:this.commentType}},(function(l){var a=l.loading,t=l.error,r=l.data;if(a)return Ke.a.createElement(zl.c,null);if(t)return n();var i=r.comment;if((null===i||void 0===i?void 0:i.containerId)!==e.props.containerObjectId)return n();if(i){var s=i.allAncestors;return Ke.a.createElement(Oa.b,null,Ke.a.createElement(ct,{childRef:e.scrollToRef},Ke.a.createElement(ce.f,null,e.renderCommentsTree(s,!0))),n(s[0].commentId))}return null}))}}]),l}(Ke.a.Component);function pt(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}gt.queries={InjectedCommentsList:void 0!==tt?tt:tt=A},gt.displayName="NotifInjectedCommentsLoader";var yt=function(e){H()(l,e);var n=pt(l);function l(){return U()(this,l),n.apply(this,arguments)}return M()(l,[{key:"getIgnoreList",value:function(e){var n=this.props.commentsAdded;return e&&(n=n.concat(e)),n.map((function(e){return String(e)}))}},{key:"render",value:function(){var e,n,a=this,t=this.props,r=t.container,i=t.autoPaged,s=t.onPagingEnd,o=t.isCommentsDisabled,u=(null===r||void 0===r||null===(e=r.allCommentsConnection)||void 0===e?void 0:e.edges.length)>0?null===r||void 0===r||null===(n=r.allCommentsConnection)||void 0===n?void 0:n.edges[0].node.containerId:null;return Ke.a.createElement(gt,{commentContainerId:u,containerObjectId:r.containerId,isCommentsDisabled:o},(function(e){return Ke.a.createElement(Wl.a,{relayObject:a.props.relay,autoPaged:{enabled:i},onPagingEnd:s,endOfPageComponent:function(e){return Ke.a.createElement(Te.e,{onClick:function(){e()}},Ke.a.createElement(ce.g,null))},connection:null===r||void 0===r?void 0:r.allCommentsConnection,liveBannerConfig:{query:l.queries.getLiveBannerHash,initialData:{node:r},bannerText:Object(fe.plaintextTranslate)("See new comments"),variables:function(){return{id:r.id}},hashValue:r.genericCommentsLiveBannerHash,ignoreList:a.getIgnoreList(e)}},(function(n){var l=n.index,t=n.node,r=null===t||void 0===t?void 0:t.commentId;return r&&-1===a.props.commentsAdded.indexOf(r)&&r!==e?Ke.a.createElement(Aa,{key:r,comment:t,isCommentsDisabled:o,hasTopBorder:0!==l}):null}))}))}}]),l}(Ke.a.Component);yt.nextPageSize=5,yt.defaultProps={commentsAdded:[],autoPaged:!1},yt.fragments={container:void 0!==ut?ut:ut=o},yt.queries={allCommentsList:void 0!==dt?dt:dt=s,getLiveBannerHash:void 0!==mt?mt:mt=i},yt.connectionConfig={query:yt.queries.allCommentsList,direction:"forward",getConnectionFromProps:function(e){var n;return null===(n=e.container)||void 0===n?void 0:n.allCommentsConnection},getFragmentVariables:function(e){return{first:e.first,refetch:!1}},getVariables:function(e,n){var l=n.cursor;return{id:e.container.id,first:yt.nextPageSize,after:l,refetch:!1}}},yt.displayName="AllCommentsList";var ft=Object(Re.d)(yt),kt=function(){var e=[{kind:"LocalArgument",name:"id",type:"ID!",defaultValue:null},{kind:"LocalArgument",name:"requestType",type:"IntOrCommentRequestTypes",defaultValue:null},{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"after",type:"String",defaultValue:null}],n=[{kind:"Variable",name:"id",variableName:"id"}],l={kind:"Variable",name:"requestType",variableName:"requestType"},a={kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null}]},t={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null},s=[{kind:"Variable",name:"after",variableName:"after"},{kind:"Variable",name:"first",variableName:"first"},l],o={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},u={kind:"ScalarField",alias:null,name:"isDeleted",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"deletedTime",args:null,storageKey:null},m={kind:"ScalarField",alias:null,name:"contentType",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"isReply",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"viewerIsAuthor",args:null,storageKey:null},p={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},y={kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},k={kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},v={kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},F={kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},C={kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},K=[t,o,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}],S={kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:K},h={kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:K},b={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},T={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]},L={kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[o,p,y,f,k,v,t,F,C,S,h,{kind:"ScalarField",alias:null,name:"isBlocking",args:null,storageKey:null},b,T]},R={kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"canSeeDeletedContent",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isAdmin",args:null,storageKey:null},o,t,{kind:"ScalarField",alias:null,name:"isAdminMode",args:null,storageKey:null}]},I={kind:"ScalarField",alias:null,name:"commenterIsTribeModerator",args:null,storageKey:null},w={kind:"ScalarField",alias:null,name:"commenterIsTribeAdmin",args:null,storageKey:null},_={kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[o,t,p]},A={kind:"ScalarField",alias:null,name:"creationTime",args:null,storageKey:null},E={kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},D={kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},V={kind:"LinkedField",alias:null,name:"tribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isSensitive",args:null,storageKey:null},o,t,{kind:"ScalarField",alias:null,name:"viewerCanModerate",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null}]},N={kind:"ScalarField",alias:null,name:"authorIsBlockedByTribe",args:null,storageKey:null},O={kind:"ScalarField",alias:null,name:"containerId",args:null,storageKey:null},B={kind:"ScalarField",alias:null,name:"replyDraftContent",args:null,storageKey:null},P={kind:"ScalarField",alias:null,name:"numUpvotes",args:null,storageKey:null},x={kind:"ScalarField",alias:null,name:"viewerVoteType",args:null,storageKey:null},q={kind:"ScalarField",alias:null,name:"viewerCanDelete",args:null,storageKey:null},U={kind:"ScalarField",alias:null,name:"viewerCanAdminDelete",args:null,storageKey:null},j={kind:"ScalarField",alias:null,name:"viewerCanBlockCommentAuthor",args:null,storageKey:null},M={kind:"ScalarField",alias:null,name:"viewerCanInviteToContribute",args:null,storageKey:null},Q={kind:"ScalarField",alias:null,name:"reportableId",args:null,storageKey:null},H={kind:"ScalarField",alias:null,name:"viewerHasReported",args:null,storageKey:null},z={kind:"ScalarField",alias:null,name:"viewerInvitedAuthorToTribe",args:null,storageKey:null},W={kind:"LinkedField",alias:null,name:"socialVoters",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[p,o,y,f,k,v,t,F,C,S,h,b,T]},G={kind:"Literal",name:"requestType",value:"all"},J=[{kind:"Literal",name:"first",value:2},G],Z=[{kind:"Literal",name:"first",value:1},G],X=["requestType"],Y={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerDirectSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"LinkedField",alias:null,name:"authorTribeUser",storageKey:null,args:null,concreteType:"TribeUser",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"isDirectSubscriber",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"permission",args:null,storageKey:null},o]}]};return{kind:"Request",fragment:{kind:"Fragment",name:"CollapsedCommentListQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:n,concreteType:null,plural:!1,selections:[{kind:"LinkedField",alias:"hiddenComments",name:"__AllComments_hiddenComments_connection",storageKey:null,args:[l],concreteType:"GenericCommentsConnection",plural:!1,selections:[a,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"NodeEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[t,{kind:"InlineFragment",type:"Comment",selections:[r,{kind:"FragmentSpread",name:"CommentThreadItem_comment",args:[{kind:"Literal",name:"repliesRequestType",value:"all"}]}]}]},i]}]}]}]},operation:{kind:"Operation",name:"CollapsedCommentListQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:n,concreteType:null,plural:!1,selections:[t,{kind:"LinkedField",alias:"hiddenComments",name:"genericCommentsConnection",storageKey:null,args:s,concreteType:"GenericCommentsConnection",plural:!1,selections:[a,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"NodeEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[o,t,{kind:"InlineFragment",type:"Comment",selections:[r,u,d,m,c,g,L,R,I,w,_,A,E,D,V,N,O,B,P,x,P,x,q,U,j,M,Q,H,z,W,{kind:"ScalarField",alias:null,name:"numReplies",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:'repliesConnection(first:2,requestType:"all")',args:J,concreteType:"CommentRepliesConnection",plural:!1,selections:[o,t,a,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[o,t,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[o,t,{kind:"InlineFragment",type:"Comment",selections:[r,m,u,d,c,g,L,R,I,w,_,A,E,D,V,N,O,B,P,x,P,x,q,U,j,M,Q,H,z,W,{kind:"LinkedField",alias:null,name:"repliesConnection",storageKey:'repliesConnection(first:1,requestType:"all")',args:Z,concreteType:"CommentRepliesConnection",plural:!1,selections:[o,t,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"CommentReplyEdge",plural:!0,selections:[o,t,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[o,t,{kind:"InlineFragment",type:"Comment",selections:[u,D,{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[o,t,p,C,S,h,T]}]}]},i]},a]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:Z,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:X},Y,T]}]},i]}]},{kind:"LinkedHandle",alias:null,name:"repliesConnection",args:J,handle:"connection",key:"CommentRepliesList_repliesConnection",filters:X},Y,T]}]},i,o]},o]},{kind:"LinkedHandle",alias:"hiddenComments",name:"genericCommentsConnection",args:s,handle:"connection",key:"AllComments_hiddenComments",filters:X},o]}]},params:{operationKind:"query",name:"CollapsedCommentListQuery",id:"3886ae7d013fa6c177d5db09f7d74561f8fa189e47d88b1c92b201bccc27bb67",text:null,metadata:{connection:[{count:"first",cursor:"after",direction:"forward",path:["node","hiddenComments"]}]}}}}();kt.hash="eb9ba9e07de9cb9012d9a03e29a99040";var vt=kt,Ft=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null};return{kind:"Fragment",name:"CollapsedCommentList_container",type:"Commentable",metadata:{connection:[{count:null,cursor:null,direction:"forward",path:["hiddenComments"]}]},argumentDefinitions:[],selections:[e,n,{kind:"ScalarField",alias:null,name:"containerId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"collapsedCommentCount",args:null,storageKey:null},{kind:"LinkedField",alias:"hiddenComments",name:"__AllComments_hiddenComments_connection",storageKey:"__AllComments_hiddenComments_connection(requestType:3)",args:[{kind:"Literal",name:"requestType",value:3}],concreteType:"GenericCommentsConnection",plural:!1,selections:[e,n,{kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"NodeEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[n,{kind:"InlineFragment",type:"Comment",selections:[{kind:"ScalarField",alias:null,name:"commentId",args:null,storageKey:null},{kind:"FragmentSpread",name:"CommentThreadItem_comment",args:[{kind:"Literal",name:"repliesRequestType",value:"all"}]}]}]},{kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null}]}]}]}}();Ft.hash="131fe966e48e4d629458e3fa4bdad437";var Ct,Kt=Ft,St=l("KP5v");!function(e){e.all="all",e.featured="featured",e.nonfeatured="nonfeatured",e.collapsed="collapsed",e.all_uncollapsed="all_uncollapsed"}(Ct||(Ct={}));var ht,bt,Tt=Ct;function Lt(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var Rt=function(e){H()(l,e);var n=Lt(l);function l(e){var a;return U()(this,l),(a=n.call(this,e)).state={showList:!1},a}return M()(l,[{key:"render",value:function(){var e=this,n=this.props,l=n.container,a=n.isCommentsDisabled;return this.state.showList?Ke.a.createElement(Wl.a,{relayObject:this.props.relay,connection:null===l||void 0===l?void 0:l.hiddenComments,endOfPageComponent:function(e){return Ke.a.createElement(Te.e,{onClick:e},Ke.a.createElement(ce.g,null))}},(function(e){var n=e.node;return Ke.a.createElement(Aa,{key:n.commentId,comment:n,isCommentsDisabled:a,repliesRequestType:Tt.all})})):Ke.a.createElement(ce.j,{onClick:function(){return e.setState({showList:!0})},count:Object(St.a)("depersonalized_comment_count")?null===l||void 0===l?void 0:l.collapsedCommentCount:undefined})}}]),l}(Ke.a.Component);Rt.initialPageSize=3,Rt.fragments={container:void 0!==ht?ht:ht=B},Rt.queries={collapsedComments:void 0!==bt?bt:bt=O},Rt.connectionConfig={query:Rt.queries.collapsedComments,direction:"forward",getConnectionFromProps:function(e){var n;return null===(n=e.container)||void 0===n?void 0:n.hiddenComments},getVariables:function(e,n){var l=n.cursor;return{id:e.container.id,requestType:3,first:Rt.initialPageSize,after:l}}},Rt.displayName="CollapsedCommentList";var It=Object(Re.d)(Rt),wt=function(){var e=[{kind:"LocalArgument",name:"oid",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"isAnswer",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"isPost",type:"Boolean!",defaultValue:null}],n=[{kind:"Variable",name:"aid",variableName:"oid"}],l={kind:"ScalarField",alias:null,name:"commentDraftContent",args:null,storageKey:null},a=[l],t=[{kind:"Variable",name:"pid",variableName:"oid"}],r=[l,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}];return{kind:"Request",fragment:{kind:"Fragment",name:"CommentAddRootQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"Condition",isCustom:!1,customValue:null,passingValue:!0,condition:"isAnswer",selections:[{kind:"LinkedField",alias:null,name:"answer",storageKey:null,args:n,concreteType:"Answer",plural:!1,selections:a}]},{kind:"Condition",isCustom:!1,customValue:null,passingValue:!0,condition:"isPost",selections:[{kind:"LinkedField",alias:null,name:"post",storageKey:null,args:t,concreteType:"Post",plural:!1,selections:a}]}]},operation:{kind:"Operation",name:"CommentAddRootQuery",argumentDefinitions:e,selections:[{kind:"Condition",passingValue:!0,isCustom:!1,customValue:null,condition:"isAnswer",selections:[{kind:"LinkedField",alias:null,name:"answer",storageKey:null,args:n,concreteType:"Answer",plural:!1,selections:r}]},{kind:"Condition",passingValue:!0,isCustom:!1,customValue:null,condition:"isPost",selections:[{kind:"LinkedField",alias:null,name:"post",storageKey:null,args:t,concreteType:"Post",plural:!1,selections:r}]}]},params:{operationKind:"query",name:"CommentAddRootQuery",id:"ed5fa545e3b7fb49f671836525b5abf9ca34d9ebec6b7cb807d7dae68978b297",text:null,metadata:{}}}}();wt.hash="4f98201a4c90139a1027e99553ef7239";var _t,At,Et=wt,Dt={kind:"Fragment",name:"CommentAddRoot_container",type:"Commentable",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},{kind:"FragmentSpread",name:"UserPhoto_user",args:[{kind:"Literal",name:"medium",value:!0}]}]}]},{kind:"ScalarField",alias:null,name:"commentType",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"containerId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"commentDraftContent",args:null,storageKey:null}],hash:"be65c8de16fda40e03d51ce5a18bda41"},Vt=Dt;function Nt(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var Ot=function(e){H()(l,e);var n=Nt(l);function l(e){var a;return U()(this,l),(a=n.call(this,e)).editorRef=void 0,a.editorRef=Ke.a.createRef(),a.state={isSubmitting:!1},a}return M()(l,[{key:"renderCommentPromptText",value:function(){return Ke.a.createElement(fe.Translate,null,"Add a comment...")}},{key:"renderCommentsDisabled",value:function(){return Ke.a.createElement(Te.j,{flex:"auto"},Ke.a.createElement(Te.s,{fontSize:"tiny",color:"gray_light"},Ke.a.createElement(fe.Translate,null,"Adding comments disabled")))}},{key:"renderMobile",value:function(){var e=this,n=this.props,l=n.commentAddedUpdater,a=n.onCommentAdded,t=n.container,r=n.relay,i=t.containerId,s=t.commentDraftContent,o=t.viewer.user,u=Object(Rn.a)(t.commentType);return Ke.a.createElement(Tn.a,{commentType:u,containerId:i,commentDraftContent:s,postDismissCallback:function(e){e.shouldRefetch&&r.refetch({oid:i,isAnswer:u===xa.a.answer_comment,isPost:u===xa.a.post_comment})},onCommentAdded:a,commentAddedUpdater:l},(function(n){return Ke.a.createElement(Ke.a.Fragment,null,o&&Ke.a.createElement(Le.a,{user:o,size:36}),Ke.a.createElement(Fn.a,{color:"gray_light",height:36,px:"small",ml:"small",onClick:function(){n()}},Ke.a.createElement(Te.j,{height:"100%",alignItems:"center"},e.renderCommentPromptText())))}))}},{key:"renderDesktop",value:function(){var e=this,n=this.props,l=n.container,a=l.viewer.user,t=l.containerId,r=l.commentType,i=n.onCommentAdded,s=n.commentAddedUpdater,o=Object(Rn.a)(r);return Ke.a.createElement(Ke.a.Fragment,null,a&&Ke.a.createElement(Le.a,{user:a,size:36}),Ke.a.createElement(Fn.a,{ml:"small"},Ke.a.createElement(vn.a,{ref:this.editorRef,placeholder:Object(fe.plaintextTranslate)(this.renderCommentPromptText()),content:Object(kn.h)(),focusOnLoad:!1,toolbarOnWeb:!1,commandsToDisable:["horizontal-rule","video"],editorPaddingReset:!0,isCompactEditor:!0})),Ke.a.createElement(Te.e,{ml:"tiny"},Ke.a.createElement(tn.ClientLogConsumer,null,(function(n){return Ke.a.createElement(Te.j,{alignItems:"center",justifyContent:"flex-end"},Ke.a.createElement(Ln.a,{objectId:t,commentType:o,onSuccess:function(n){var l=n.commentId;e.editorRef.current.clear(),i({commentId:l})},updater:s},(function(l){return Ke.a.createElement(fn.a,{size:"small",text:Object(fe.plaintextTranslate)("Add Comment"),disabled:e.state.isSubmitting,onClick:function(){e.editorRef.current&&!e.state.isSubmitting&&e.setState({isSubmitting:!0},(function(){var a=e.editorRef.current.save();l(a).then((function(){e.setState((function(){return{isSubmitting:!1}}))})),function(e,n,l){var a,t;switch(n){case xa.a.answer_comment:t="AddAnswerComment",a={aid:l};break;case xa.a.post_comment:t="TribePostCommentAdd",a={pid:l};break;default:return null}e(t,a)}(n,o,t)}))}})})))}))))}},{key:"render",value:function(){var e=this.props.isCommentsDisabled;return Object(Xe.b)()?null:Ke.a.createElement(Te.j,{bg:"gray_ultralight",px:"medium",py:"small",alignItems:"center"},e?this.renderCommentsDisabled():Object(Sn.e)()?this.renderMobile():this.renderDesktop())}}]),l}(Ke.a.Component);Ot.fragments={container:void 0!==_t?_t:_t=x},Ot.queries={refetchQuery:void 0!==At?At:At=P},Ot.displayName="CommentAddRoot";var Bt,Pt,xt,qt=Object(Re.f)(Ot),Ut=l("m6aV"),jt=l("06DM");function Mt(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a=J()(e);if(n){var t=J()(this).constructor;l=Reflect.construct(a,arguments,t)}else l=a.apply(this,arguments);return W()(this,l)}}var Qt=function(e){H()(l,e);var n=Mt(l);function l(e){var a;return U()(this,l),(a=n.call(this,e)).state={hasMoreCommentsToPage:!0,commentsAdded:[]},a}return M()(l,[{key:"isCommentsDisabled",value:function(){var e=this.props.container,n=e.isCommentsDisabled,l=e.canViewerAddComment;return n||!l}},{key:"renderCommentsAdded",value:function(){var e=this,n=this.props.container.commentEntityType;return 0===this.state.commentsAdded.length?null:this.state.commentsAdded.map((function(a){return Ke.a.createElement(Hl.a,{key:a,query:l.queries.addedComment,variables:{commentId:a,commentType:n}},(function(n){var l=n.loading,a=n.error,t=n.data;return l?Ke.a.createElement(zl.c,null):a||null===t.comment?null:Ke.a.createElement(Aa,{comment:t.comment,isCommentsDisabled:e.isCommentsDisabled()})}))}))}},{key:"getCommentExperimentVariant",value:function(){var e=[],n=Object(St.b)("hackernews_comment_ranking");n&&e.push(n);var l=Object(St.b)("wilson_score_comment_ranking");l&&e.push(l);var a=Object(St.b)("content_expand_comment_prefetching");a&&e.push(a);var t=Object(St.b)("new_collapsed_logic");return t&&e.push(t),e}},{key:"userPerceivedSpeedLogging",value:function(){var e=this.props,n=e.container,l=e.commentClickTime;if(l){var a=this.getCommentExperimentVariant();0===a.length&&a.push("control"),a.forEach((function(e){Object(Ie.a)("comment_user_perceived_speed_log",{time:Date.now()-l,variant:e,content_type:n.contentType,oid:n.containerId})}))}}},{key:"renderCommentsList",value:function(e){var n=this,l=this.props,a=l.container,t=l.autoPaged,r=l.hideCollapsedCommentsToggle,i=!this.state.hasMoreCommentsToPage||!a.hasAtLeastPageSizeUncollapsedComments;this.userPerceivedSpeedLogging();var s=null;return(a.hasUncollapsedTopLevelComments||a.numDisplayComments>0)&&(s=Ke.a.createElement(ft,{container:a,onPagingEnd:function(e,l){l||n.setState({hasMoreCommentsToPage:!1})},commentsAdded:this.state.commentsAdded,autoPaged:t,isCommentsDisabled:this.isCommentsDisabled()})),Ke.a.createElement(Ke.a.Fragment,null,s,Ke.a.createElement(Ut.a.Consumer,null,(function(l){return i&&!(l.hideCollapsedCommentsToggle||r)&&!(e===Ye.a.question_main&&a.commentEntityType===xa.a.answer_comment&&0===a.numDisplayComments)&&n.renderCollapsedComments.call(n,!1)})))}},{key:"renderCollapsedComments",value:function(e){var n=this;return this.props.container.hasCollapsedTopLevelComments?Ke.a.createElement(Hl.a,{query:l.queries.loadCollapsedComments,variables:{id:this.props.container.id}},(function(l){var a,t=l.loading,r=l.error,i=l.data;return t?e?null:Ke.a.createElement(zl.c,null):r?null:(null===i||void 0===i||null===(a=i.node)||void 0===a?void 0:a.hasCollapsedTopLevelComments)!==undefined&&i.node.hasCollapsedTopLevelComments&&Ke.a.createElement(It,{container:i.node,isCommentsDisabled:n.isCommentsDisabled()})})):null}},{key:"renderAddRoot",value:function(){var e=this,n=this.props,l=n.container,a=n.onClick,t=n.commentAddedUpdater;return Ke.a.createElement(qt,{container:l,onCommentAdded:function(n){var l=n.commentId;e.state.commentsAdded.includes(l)||e.setState((function(e){return{commentsAdded:[l].concat(e.commentsAdded)}})),null===a||void 0===a||a()},isCommentsDisabled:this.isCommentsDisabled(),commentAddedUpdater:t})}},{key:"render",value:function(){var e=this,n=this.props.isBorderAll;return Ke.a.createElement(ce.h,{isBorderAll:n},Ke.a.createElement(Ee.e.Consumer,null,(function(n){return Ke.a.createElement(Ke.a.Fragment,null,e.renderAddRoot(),e.renderCommentsAdded(),!Object(Xe.a)()&&Ke.a.createElement(Te.e,{borderTop:!0},Ke.a.createElement(jt.a,{borderBottom:!1,bg:"ultralight_gray",titleText:Ke.a.createElement(fe.Translate,null,"Comments")})),e.renderCommentsList(n))})))}}]),l}(Ke.a.Component);Qt.fragments={container:void 0!==Bt?Bt:Bt=r},Qt.queries={addedComment:void 0!==Pt?Pt:Pt=t,loadCollapsedComments:void 0!==xt?xt:xt=a},Qt.displayName="CommentArea";n.a=Object(Re.b)(Qt)}}]);