(window.ansFrontendRelayWebpackJsonpFunction=window.ansFrontendRelayWebpackJsonpFunction||[]).push([["component-DesktopMessagesDock"],{"+ISc":function(e,a,n){"use strict";n.r(a);var t={};n.r(t),n.d(t,"default",(function(){return T}));var l={};n.r(l),n.d(l,"default",(function(){return A}));var r={};n.r(r),n.d(r,"default",(function(){return P}));var i,s,o=n("lwsE"),u=n.n(o),d=n("W8MJ"),c=n.n(d),m=n("PJYZ"),g=n.n(m),f=n("7W2i"),h=n.n(f),p=n("a1gu"),y=n.n(p),k=n("Nsbk"),b=n.n(k),v=n("vOnD"),F=n("vfSt"),S={kind:"Fragment",name:"DesktopMessagesDock_viewer",type:"Viewer",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"FragmentSpread",name:"MessageThreadList_viewer",args:null}],hash:"2f9084286d843f16d785b4181a3e3738"},T=S,E=n("D5Zh"),w=n("jufJ"),O=n("e5FG"),_=n("/bbo"),K=n("gujl"),C=n("td6z"),R=n("ga2z"),M=n("HC+x"),x=n("RA+f"),j=n("I2ps"),L=n("VyO/"),I=n("UyMh"),D=n("q1tI"),N=n.n(D),U=n("4Xda"),B=n("SW63"),V={kind:"Fragment",name:"DesktopMessagesDockHeader_viewer",type:"Viewer",metadata:{reloadable:{operation:new(n("vfSt")["default"])(()=>n.e("query-ReloadableDesktopMessagesDockHeader_viewerQuery.graphql").then(n.bind(null,"yXi9")),"ReloadableDesktopMessagesDockHeader_viewerQuery.graphql")}},argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"inboxCount",args:null,storageKey:null,isLive:!0}],hash:"d390e22c46766da4ddcaa6340f1e438a"},A=V,H={kind:"Fragment",name:"DesktopMessagesDockHeader_thread",type:"Thread",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"threadId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isUnreadForViewer",args:null,storageKey:null,isLive:!0},{kind:"LinkedField",alias:null,name:"otherUsers",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},{kind:"FragmentSpread",name:"UserName_user",args:null},{kind:"FragmentSpread",name:"UserPhoto_user",args:null}]}],hash:"29bad934ee1bb201925f769ed4f86747"},P=H,z=n("zLpq"),q=n("xGwX"),W=n("OMLc"),Q=n("zUwh"),Y=n("GxN1"),J=n("hXLn"),X=n("R+um"),G=n("r+vq");function Z(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,t=b()(e);if(a){var l=b()(this).constructor;n=Reflect.construct(t,arguments,l)}else n=t.apply(this,arguments);return y()(this,n)}}var $=function(e){h()(n,e);var a=Z(n);function n(){return u()(this,n),a.apply(this,arguments)}return c()(n,[{key:"renderDefaultHeader",value:function(){var e=this.props.viewer;return N.a.createElement(N.a.Fragment,null,N.a.createElement(J.a,{fragmentOrQuery:n.fragments.viewer,initialData:e},(null===e||void 0===e?void 0:e.inboxCount)>0?N.a.createElement(q.b,{count:e.inboxCount,mr:"tiny"}):N.a.createElement(N.a.Fragment,null)),N.a.createElement(x.s,{flex:1,fontSize:"regular",medium:!0},N.a.createElement(w.Translate,null,"Messages")),N.a.createElement(z.a,{size:"small",tooltipText:N.a.createElement(w.Translate,null,"New message"),icon:N.a.createElement(W.b,{name:"NewMessage"}),href:"/messages/new",onClick:function(e){e.stopPropagation()}}),N.a.createElement(z.a,{size:"small",icon:N.a.createElement(W.b,{name:this.props.isExpanded?"ChevronDown":"ChevronUp"})}))}},{key:"render",value:function(){var e=this.props.thread;return e?N.a.createElement(J.a,{fragmentOrQuery:n.fragments.thread,initialData:e},N.a.createElement(N.a.Fragment,null,this.props.isExpanded&&N.a.createElement(z.a,{size:"small",icon:N.a.createElement(W.b,{name:"ChevronLeft"}),onClick:this.props.onBackClick,tooltipText:N.a.createElement(w.Translate,null,"Back to message list")}),N.a.createElement(x.j,{alignItems:"center",flex:1,minWidth:0},1===e.otherUsers.length&&N.a.createElement(x.q,{flexGrow:0,flexShrink:0,display:"inline-flex"},N.a.createElement(G.a,{user:e.otherUsers[0],linked:!1,includeHovercard:!1,size:18}),e.isUnreadForViewer?N.a.createElement(x.a,{top:-2,right:-2,display:"inline-flex"},N.a.createElement(Y.b,{ml:"tiny",hasBorder:!0})):N.a.createElement(N.a.Fragment,null)),N.a.createElement(x.s,{fontSize:"regular",pl:"small",medium:!0,overflow:"hidden",whiteSpace:"nowrap",flex:1,minWidth:0,underlineLinks:!1},N.a.createElement(w.InlineCommaList,null,e.otherUsers.map((function(e){return N.a.createElement(X.b,{user:e,key:e.uid})}))))),this.props.isExpanded&&N.a.createElement(z.a,{size:"small",icon:N.a.createElement(W.b,{name:"Expand"}),onClick:this.props.onExpand,tooltipText:N.a.createElement(w.Translate,null,"Open in message inbox"),tooltipPlacement:"top"}),N.a.createElement(z.a,{size:"small",icon:N.a.createElement(W.b,{name:this.props.isExpanded?"ChevronDown":"ChevronUp"})}))):this.renderDefaultHeader()}}]),n}(N.a.Component);$.fragments={thread:void 0!==i?i:i=r,viewer:void 0!==s?s:s=l},$.displayName="DesktopMessagesDockHeader";var ee,ae,ne,te=function(){return N.a.createElement(x.j,{height:38,alignItems:"center",px:"medium"},N.a.createElement(Q.h,{bgColor:"raised"},N.a.createElement(Q.k,{width:80,fontSize:"regular",maskColor:"raised"})))},le=Object(L.b)($),re=n("vcKx"),ie=n("XNsX"),se=n("ujEb"),oe=n("LoNO"),ue=n("LsXc");function de(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,t=b()(e);if(a){var l=b()(this).constructor;n=Reflect.construct(t,arguments,l)}else n=t.apply(this,arguments);return y()(this,n)}}var ce=Object(v["default"])(x.i).withConfig({displayName:"DesktopMessagesDock___StyledFixed",componentId:"sc-1bh1698-0"})(["transform:translateY( "," );"],(function(e){return e._css})),me=Object(v["default"])(x.a).withConfig({displayName:"DesktopMessagesDock___StyledAbsolute",componentId:"sc-1bh1698-1"})(["&:hover > div{opacity:0.6 !important;}"]),ge=function(e){h()(n,e);var a=de(n);function n(e){var t;return u()(this,n),(t=a.call(this,e)).scrollRef=void 0,t.scrollingElementRef=void 0,t.containerRef=void 0,t.scrollHeight=void 0,t.dragHandleHeight=void 0,t.state={isExpanded:"true"===Object(j.a)(B.a.dock_expand_state),bodyHeight:0,hasMounted:!1,currentThreadId:undefined,isDragging:!1,dockHeight:parseInt(Object(j.a)(B.a.dock_height)||"60")},t.scrollRef=N.a.createRef(),t.scrollingElementRef=N.a.createRef(),t.containerRef=N.a.createRef(),t.scrollHeight=0,t.dragHandleHeight=24,t.handleNavbarClick=t.handleNavbarClick.bind(g()(t)),t.handleWindowResize=t.handleWindowResize.bind(g()(t)),t.onThreadClick=t.onThreadClick.bind(g()(t)),t.handleDragHandleMouseDown=t.handleDragHandleMouseDown.bind(g()(t)),t.handleDrag=t.handleDrag.bind(g()(t)),t.handleDragHandleMouseCancel=t.handleDragHandleMouseCancel.bind(g()(t)),t}return c()(n,[{key:"handleNavbarClick",value:function(){Object(j.f)(B.a.dock_expand_state,!this.state.isExpanded,{expires:0}),this.setState((function(e){return Object.assign({},e,{isExpanded:!e.isExpanded})}))}},{key:"handleWindowResize",value:function(){var e,a;null!==(e=this.scrollRef)&&void 0!==e&&e.current&&this.setState({bodyHeight:null===(a=this.scrollRef.current)||void 0===a?void 0:a.clientHeight})}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({hasMounted:!0})}),500),window.addEventListener("resize",this.handleWindowResize),this.handleWindowResize()}},{key:"onThreadClick",value:function(e){this.setState({currentThreadId:e})}},{key:"renderThreadList",value:function(){var e=this.props.viewer;return e?N.a.createElement(ue.a,{viewer:e,onItemClick:this.onThreadClick}):N.a.createElement(C.c,{fillParent:!0})}},{key:"handleDragHandleMouseDown",value:function(){this.state.isDragging||(this.setState({isDragging:!0}),window.addEventListener("mousemove",this.handleDrag),window.addEventListener("mouseup",this.handleDragHandleMouseCancel,{once:!0}))}},{key:"handleDragHandleMouseCancel",value:function(){this.state.isDragging&&(this.setState({isDragging:!1}),window.removeEventListener("mousemove",this.handleDrag),this.handleWindowResize(),Object(j.f)(B.a.dock_height,this.state.dockHeight))}},{key:"handleDrag",value:function(e){e.preventDefault();var a=window.innerHeight;this.setState({dockHeight:Math.max(Math.min(80,(a-e.y-this.dragHandleHeight/2)/a*100),40)})}},{key:"renderThread",value:function(){return this.state.currentThreadId?N.a.createElement(E.a,{query:n.queries.thread,variables:{threadId:this.state.currentThreadId}},(function(e){var a=e.loading,n=e.error,t=e.data;return a?Object(ie.a)(!0):!n&&t&&t.thread?N.a.createElement(se.a,{thread:t.thread,minHeight:"1%"}):N.a.createElement(K.a,{type:"error",bg:"transparent",title:N.a.createElement(w.Translate,null,"Something went wrong"),body:N.a.createElement(w.Translate,null,"Wait a moment and try again."),buttonComponent:N.a.createElement(_.a,{text:N.a.createElement(w.Translate,null,"Refresh page"),size:"small",onClick:function(){window.location.reload()}})})})):N.a.createElement(N.a.Fragment,null)}},{key:"render",value:function(){var e=this;return N.a.createElement(re.a.Provider,{value:{container:"dock"}},N.a.createElement(O.a.Consumer,null,(function(a){return N.a.createElement(U.a.Consumer,null,(function(t){return N.a.createElement(v.ThemeConsumer,null,(function(l){return N.a.createElement(ce,{bottom:a.stickyFooterHeight||0,zIndex:l.zIndices.search_overlay-1,height:"".concat(e.state.dockHeight,"vh"),right:8,bg:"raised",display:"flex",flexDirection:"column",width:e.state.isExpanded?oe.b:240,boxShadow:"0 0 0 1px ".concat(t.isDarkModeOn?"rgba(255, 255, 255, .1)":"rgba(0, 0, 0, .1)",", ").concat(l.shadows.medium).concat(e.state.isExpanded?", rgb(0 0 0 / 20%) 0px 0px 30px":""),borderTopLeftRadius:"small",borderTopRightRadius:"small",innerRef:e.containerRef,transitionProperty:e.state.hasMounted?"transform":undefined,transitionDuration:e.state.hasMounted?"120ms":"0ms",transitionTimingFunction:x.x,_css:e.state.isExpanded?"0":e.state.bodyHeight+"px"},N.a.createElement(R.a,{wrapperRef:e.containerRef},(function(a){var l=a.isHovered;return N.a.createElement(N.a.Fragment,null,e.state.isExpanded&&N.a.createElement(me,{bottom:"calc(100%)",fullX:!0,height:e.dragHandleHeight,display:"flex",alignItems:"center",justifyContent:"center",onMouseDown:e.handleDragHandleMouseDown,cursor:"ns-resize",opacity:l||e.state.isDragging?1:0,transition:"opacity",transitionDelay:l?"200ms":undefined},N.a.createElement(x.e,{width:36,height:4,borderRadius:"pill",bg:t.isDarkModeOn?"rgba(255, 255, 255, 0.5)":"gray_dark",opacity:e.state.isDragging?.6:.4})),N.a.createElement(x.f,{p:"tiny",pl:e.state.currentThreadId&&e.state.isExpanded?"tiny":"small",alignItems:"center",display:"flex",onClick:e.handleNavbarClick,underlineLinks:!1,underlineHover:!1,borderRadius:"inherit",userSelect:"none",borderBottom:e.state.isExpanded,height:38,hover:{bg:"darken"}},N.a.createElement(E.a,{query:n.queries.header,variables:{threadId:e.state.currentThreadId||0,includeThread:e.state.currentThreadId!==undefined}},(function(a){var n=a.loading,t=a.error,l=a.data;return n||t||!l?N.a.createElement(te,null):N.a.createElement(le,{thread:l.thread?l.thread:null,viewer:l.viewer,isExpanded:e.state.isExpanded,onBackClick:function(a){a.stopPropagation(),e.setState({currentThreadId:undefined})},onExpand:function(a){a.stopPropagation(),Object(I.b)("/messages/thread/"+e.state.currentThreadId)}})}))),N.a.createElement(x.j,{flexDirection:"column",flex:1,innerRef:e.scrollRef,height:0},N.a.createElement(M.a,{flex:1,useShadows:!0,height:0,wrapperProps:{display:"flex",flexDirection:"column",flex:1,height:0},innerRef:e.scrollingElementRef},!e.state.currentThreadId&&e.renderThreadList(),e.state.currentThreadId&&e.renderThread())))})))}))}))})))}}]),n}(N.a.Component);ge.fragments={viewer:void 0!==ee?ee:ee=t},ge.queries={thread:void 0!==ae?ae:ae=new F["default"]((function(){return n.e("query-DesktopMessagesDockThreadQuery").then(n.bind(null,"oq56"))}),"DesktopMessagesDockThreadQuery"),header:void 0!==ne?ne:ne=new F["default"]((function(){return n.e("query-DesktopMessagesDockHeaderQuery").then(n.bind(null,"MM2Q"))}),"DesktopMessagesDockHeaderQuery")},ge.displayName="DesktopMessagesDock";a["default"]=Object(L.b)(ge)},"4n8n":function(e,a,n){"use strict";n.d(a,"a",(function(){return u}));var t=n("VwdU"),l=n("RA+f"),r=n("nwxp"),i=n("q1tI"),s=n.n(i),o=n("vOnD");function u(e){return s.a.createElement(t.a,{condition:!(!e.hasFloatingActionButtonOnApp||!Object(r.g)())||!(!e.hasFloatingActionButtonOnMweb||!Object(r.f)()),wrapper:function(e){return s.a.createElement(o.ThemeContext.Consumer,null,(function(a){return s.a.createElement(l.e,{pb:58+2*a.space.medium},e)}))}},e.children)}},"7yJA":function(e,a,n){"use strict";var t={};n.r(t),n.d(t,"default",(function(){return b}));var l={};n.r(l),n.d(l,"default",(function(){return R}));var r={};n.r(r),n.d(r,"default",(function(){return x}));var i={};n.r(i),n.d(i,"default",(function(){return H}));var s={};n.r(s),n.d(s,"default",(function(){return W}));var o=n("lwsE"),u=n.n(o),d=n("W8MJ"),c=n.n(d),m=n("7W2i"),g=n.n(m),f=n("a1gu"),h=n.n(f),p=n("Nsbk"),y=n.n(p),k=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Fragment",name:"ThreadOverflowMenu_thread",type:"Thread",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"threadId",args:null,storageKey:null},e,{kind:"ScalarField",alias:null,name:"reportableId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerHasReported",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"otherUsers",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[{kind:"FragmentSpread",name:"UserName_user",args:null}]},{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[e,{kind:"ScalarField",alias:null,name:"inboxCount",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"profileNavBadgeCount",args:null,storageKey:null}]}]}}();k.hash="0379824048376fb626098595bd2b104b";var b=k,v=n("pa+i"),F=n("jufJ"),S=n("6pr2"),T=n("XRWA"),E=n("VyO/"),w=n("q1tI"),O=n.n(w),_=function(){var e=[{kind:"LocalArgument",name:"threadId",type:"BigInt!",defaultValue:null}],a=[{kind:"LinkedField",alias:null,name:"hideThread",storageKey:null,args:[{kind:"Variable",name:"threadId",variableName:"threadId"}],concreteType:"HideThread",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"HideThread_hideThread_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:a},operation:{kind:"Operation",name:"HideThread_hideThread_Mutation",argumentDefinitions:e,selections:a},params:{operationKind:"mutation",name:"HideThread_hideThread_Mutation",id:"0e8738d7be99cffd522e101b06772b98b6a25624dadd2e47f44b7a906665afa3",text:null,metadata:{}}}}();_.hash="ee9bf52dee586f8b2d34a92ce15ed018";var K,C,R=_,M={kind:"Fragment",name:"HideThread_thread",type:"Thread",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"threadId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"otherUsers",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[{kind:"FragmentSpread",name:"UserName_user",args:null}]}],hash:"9589e1c9e82a67478d3644b947998af9"},x=M,j=n("R+um"),L=n("/nKJ"),I=n("yju1"),D=n("nwxp"),N=n("UyMh");function U(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,t=y()(e);if(a){var l=y()(this).constructor;n=Reflect.construct(t,arguments,l)}else n=t.apply(this,arguments);return h()(this,n)}}var B=function(e){g()(n,e);var a=U(n);function n(){return u()(this,n),a.apply(this,arguments)}return c()(n,null,[{key:"getOverflowItem",value:function(e){var a=e.threadId,t=e.otherUsers,l=Object(F.plaintextTranslate)(O.a.createElement(O.a.Fragment,null,"Hide Messages from ",O.a.createElement(j.b,{user:t[0]}))),r=Object(F.plaintextTranslate)(O.a.createElement(O.a.Fragment,null,"Messages will be hidden until either you or"," ",O.a.createElement(j.b,{user:t[0],format:"short"})," sends a new message."));return{label:Object(F.plaintextTranslate)("Mute Conversation"),onSelected:function(){Object(L.b)({title:l,message:r,submitButtonTitle:Object(F.plaintextTranslate)("Hide"),onAccept:function(){return Object(E.c)({mutation:n.mutations.hideThread,variables:{threadId:a}}).then((function(){Object(D.g)()?(Object(I.a)("broadcastAllWebViews",{messageName:"markPageAsDirty",data:{url:"/messages"}}),Object(I.a)("dismiss")):Object(N.b)("/messages","push")}))}})}}}}]),n}(O.a.Component);B.fragments={thread:void 0!==K?K:K=r},B.mutations={hideThread:void 0!==C?C:C=l},B.displayName="HideThread";var V=Object(E.b)(B),A=function(){var e=[{kind:"LocalArgument",name:"threadId",type:"BigInt!",defaultValue:null}],a={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},n=[{kind:"LinkedField",alias:null,name:"threadMarkUnread",storageKey:null,args:[{kind:"Variable",name:"threadId",variableName:"threadId"}],concreteType:"ThreadMarkUnread",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:null,concreteType:"Thread",plural:!1,selections:[a,{kind:"ScalarField",alias:null,name:"isUnreadForViewer",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[a,{kind:"ScalarField",alias:null,name:"inboxCount",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"profileNavBadgeCount",args:null,storageKey:null}]}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"ThreadMarkUnread_threadMarkUnread_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:n},operation:{kind:"Operation",name:"ThreadMarkUnread_threadMarkUnread_Mutation",argumentDefinitions:e,selections:n},params:{operationKind:"mutation",name:"ThreadMarkUnread_threadMarkUnread_Mutation",id:"30148ad41564df216f3888dea6ac3a80823ac0472e68f31cac43624863b80f79",text:null,metadata:{}}}}();A.hash="183714e7d86c7cda71e8d4f29a23d53a";var H=A,P=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Fragment",name:"ThreadMarkUnread_thread",type:"Thread",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"threadId",args:null,storageKey:null},e,{kind:"LinkedField",alias:null,name:"otherUsers",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[{kind:"FragmentSpread",name:"UserName_user",args:null}]},{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[e,{kind:"ScalarField",alias:null,name:"inboxCount",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"profileNavBadgeCount",args:null,storageKey:null}]}]}}();P.hash="b66bc77eb3768a606a20f0741f44fd9d";var z,q,W=P;function Q(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,t=y()(e);if(a){var l=y()(this).constructor;n=Reflect.construct(t,arguments,l)}else n=t.apply(this,arguments);return h()(this,n)}}var Y=function(e){g()(n,e);var a=Q(n);function n(){return u()(this,n),a.apply(this,arguments)}return c()(n,null,[{key:"getOverflowItem",value:function(e){var a=e.id,t=e.threadId,l=e.otherUsers,r=e.viewer,i=Object(F.plaintextTranslate)("Mark as Unread"),s=Object(F.plaintextTranslate)(O.a.createElement(O.a.Fragment,null,"Are you sure you would like to mark your conversation with"," ",O.a.createElement(j.b,{user:l[0],format:"short"})," as unread?"));return{label:Object(F.plaintextTranslate)("Mark as Unread"),onSelected:function(){Object(L.b)({title:i,message:s,submitButtonTitle:Object(F.plaintextTranslate)("Mark Unread"),onAccept:function(){return Object(E.c)({mutation:n.mutations.threadMarkUnread,variables:{threadId:t},optimisticResponse:{threadMarkUnread:{thread:{id:a,isUnreadForViewer:!0,viewer:{id:r.id,inboxCount:r.inboxCount+1,profileNavBadgeCount:r.profileNavBadgeCount+1}}}}}).then((function(){Object(D.g)()?(Object(I.a)("broadcastAllWebViews",{messageName:"markPageAsDirty",data:{url:"/messages"}}),Object(I.a)("dismiss")):Object(N.b)("/messages","push")}))}})}}}}]),n}(O.a.Component);Y.fragments={thread:void 0!==z?z:z=s},Y.mutations={threadMarkUnread:void 0!==q?q:q=i},Y.displayName="ThreadMarkUnread";var J,X=Object(E.b)(Y);function G(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,t=y()(e);if(a){var l=y()(this).constructor;n=Reflect.construct(t,arguments,l)}else n=t.apply(this,arguments);return h()(this,n)}}var Z=function(e){g()(n,e);var a=G(n);function n(){return u()(this,n),a.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,a=e.thread,n=e.variant,t=e.isInModal,l=e.disableFocus;return O.a.createElement(T.a,null,(function(e){var r=[V.getOverflowItem(a),X.getOverflowItem(a),v.a.getOverflowItem(a,e)];return O.a.createElement(S.a,{title:Object(F.plaintextTranslate)("Message"),items:r,tooltipText:Object(F.plaintextTranslate)("More"),size:"small",buttonProps:{type:"flat",variant:n},isInModal:t,onClick:function(){return null===l||void 0===l?void 0:l()}})}))}}]),n}(O.a.Component);Z.fragments={thread:void 0!==J?J:J=t},Z.displayName="ThreadOverflowMenu";a.a=Object(E.b)(Z)},"HC+x":function(e,a,n){"use strict";n.d(a,"a",(function(){return y}));var t=n("J4zp"),l=n.n(t),r=n("QILm"),i=n.n(r),s=n("vOnD"),o=n("RA+f"),u=n("nwxp"),d=n("q1tI"),c=n.n(d),m=n("4Xda"),g=n("zaBG"),f=Object(s["default"])(o.e).withConfig({displayName:"ScrollBox___StyledBox",componentId:"sc-1t8bc7j-0"})(["-webkit-overflow-scrolling:touch;",""],(function(e){return e._css})),h=Object(s["default"])(o.a).withConfig({displayName:"ScrollBox___StyledAbsolute",componentId:"sc-1t8bc7j-1"})(["background-image:linear-gradient( to bottom,rgba(0,0,0,0.05),rgba(0,0,0,0) );pointer-events:none;"]),p=Object(s["default"])(o.a).withConfig({displayName:"ScrollBox___StyledAbsolute2",componentId:"sc-1t8bc7j-2"})(["background-image:linear-gradient( to top,rgba(0,0,0,0.05),rgba(0,0,0,0) );pointer-events:none;"]),y=function(e){var a=e.children,n=e.innerRef,t=e.onAtTopChange,r=e.lockBodyNative,s=void 0===r||r,y=e.showScrollbarOnHover,k=e.wrapperProps,b=e.useShadows,v=e.shadowOffset,F=void 0===v?0:v,S=i()(e,["children","innerRef","onAtTopChange","lockBodyNative","showScrollbarOnHover","wrapperProps","useShadows","shadowOffset"]),T=c.a.useRef(!1),E=c.a.useRef(window.innerHeight),w=c.a.useRef(document.body.style.overflow||""),O=c.a.useState(!1),_=l()(O,2),K=_[0],C=_[1],R=c.a.useState(!1),M=l()(R,2),x=M[0],j=M[1],L=c.a.useRef(Object(g.e)()),I=c.a.useContext(m.a).isDarkModeOn,D=L.current>0,N=I?"rgba(255, 255, 255, .1)":"rgba(0, 0, 0, .1)",U=c.a.useRef((function(){if(n.current){var e=n.current,a=e.scrollTop,l=e.scrollHeight,r=e.clientHeight,i=Object(u.c)()&&T.current&&s?1:0;Object(u.c)()&&s&&(a===l-r?n.current.scrollTo(0,l-r-i):0===a&&n.current.scrollTo(0,i)),a<=i+F&&(null===t||void 0===t||t(!0)),a>i+F&&(null===t||void 0===t||t(!1))}})),B=c.a.useRef((function(){Object(u.c)()&&s&&setTimeout((function(){var e=Math.abs(E.current-300-window.innerHeight)<=50;T.current=e,U.current()}),200)})),V=c.a.useRef((function(){if(window.requestAnimationFrame(U.current),b){var e=n.current,a=e.scrollTop,t=e.scrollHeight,l=e.clientHeight,r=Object(u.c)()&&T.current&&s?1:0;C(a>r+F),j(a+l+r+F<t)}}));return Object(d.useEffect)((function(){Object(u.c)()&&s&&window.addEventListener("resize",B.current)}),[s]),Object(d.useEffect)((function(){null!==n&&void 0!==n&&n.current&&n.current.addEventListener("scroll",V.current)}),[V,n]),Object(d.useEffect)((function(){var e=w.current;return Object(u.g)()&&s&&(document.body.style.overflow="hidden"),U.current(),function(){Object(u.g)()&&s&&(document.body.style.overflow=e)}}),[s,U,w]),c.a.createElement(o.q,Object.assign({display:"flex",flexDirection:"column"},S),c.a.createElement(f,{overflowY:"auto",flex:1,innerRef:n,display:"flex",flexDirection:"column",_css:D&&Object(u.b)()?"\n              &::-webkit-scrollbar-track {\n                background-color: transparent;\n              }\n              &::-webkit-scrollbar-thumb {\n\n                border-radius: 9999em;\n                box-shadow: inset 0 0 ".concat(10,"px ").concat(10,"px ").concat(y?"transparent":N,";\n                border: solid 2px transparent;\n              }\n              &::-webkit-scrollbar {\n                width: ").concat(10,"px;\n              }\n\n              scrollbar-color: ").concat(y?"transparent":N," transparent;\n              scrollbar-width: ").concat(10,"px;\n\n              &:hover {\n                &::-webkit-scrollbar-thumb {\n                  box-shadow: inset 0 0 ").concat(10,"px ").concat(10,"px ").concat(N,";\n                }\n                scrollbar-color: ").concat(N," transparent;\n              }\n          "):""},c.a.createElement(o.e,k,a),c.a.createElement(h,{top:0,fullX:!0,height:6,opacity:K?1:0,transition:"opacity",transitionDuration:"100ms"}),c.a.createElement(p,{bottom:0,fullX:!0,height:6,opacity:x?1:0,transition:"opacity",transitionDuration:"100ms"})))}},LoNO:function(e,a,n){"use strict";n.d(a,"b",(function(){return d})),n.d(a,"a",(function(){return c})),n.d(a,"c",(function(){return m})),n.d(a,"d",(function(){return f}));var t={};n.r(t),n.d(t,"default",(function(){return i}));var l=function(){var e=[{kind:"LocalArgument",name:"threadId",type:"BigInt!",defaultValue:null}],a=[{kind:"Variable",name:"threadId",variableName:"threadId"}],n={kind:"ScalarField",alias:null,name:"isUnreadForViewer",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"inboxCount",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"profileNavBadgeCount",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"messagesThreadUtils_threadMarkRead_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"threadMarkRead",storageKey:null,args:a,concreteType:"ThreadMarkRead",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:null,concreteType:"Thread",plural:!1,selections:[n,{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[t,l]}]}]}]},operation:{kind:"Operation",name:"messagesThreadUtils_threadMarkRead_Mutation",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"threadMarkRead",storageKey:null,args:a,concreteType:"ThreadMarkRead",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:null,concreteType:"Thread",plural:!1,selections:[n,{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[t,l,r]},r]}]}]},params:{operationKind:"mutation",name:"messagesThreadUtils_threadMarkRead_Mutation",id:"fa1bb5fa2db97e9c98169a6cd194d5ae0eab3c0e543ed76de387d2c66aa48fd2",text:null,metadata:{}}}}();l.hash="85b9ec750c1f2cb8def11d934e497fb7";var r,i=l,s=n("VyO/"),o=n("d1zJ"),u=n("yju1"),d=320,c=o.a,m=36,g=void 0!==r?r:r=t;function f(e){Object(s.c)({mutation:g,variables:{threadId:e}}).then((function(){Object(u.a)("broadcastAllWebViews",{messageName:"updateMessageListData",data:{threadId:e}}),Object(u.a)("broadcastAllWebViews",{messageName:"markPageAsDirty",data:{url:"/mobile_nav_sidebar"}})}))}},LsXc:function(e,a,n){"use strict";n.d(a,"b",(function(){return ue}));var t={};n.r(t),n.d(t,"default",(function(){return o}));var l={};n.r(l),n.d(l,"default",(function(){return d}));var r={};n.r(r),n.d(r,"default",(function(){return W}));var i={};n.r(i),n.d(i,"default",(function(){return X}));var s=function(){var e=[{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"after",type:"String",defaultValue:null}],a=[{kind:"Variable",name:"after",variableName:"after"},{kind:"Variable",name:"first",variableName:"first"}],n={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l=[t,n,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}],r=[n,{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},{kind:"ScalarField",alias:"smallProfileImageUrl",name:"profileImageUrl",args:[{kind:"Literal",name:"size",value:"small"}],storageKey:'profileImageUrl(size:"small")'},{kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},t,{kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:l},{kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:l},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"MessageThreadListQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"FragmentSpread",name:"MessageThreadList_viewer",args:a}]}]},operation:{kind:"Operation",name:"MessageThreadListQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"threadsConnection",storageKey:null,args:a,concreteType:"ThreadsConnection",plural:!1,selections:[n,t,{kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"ThreadEdge",plural:!0,selections:[n,t,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"Thread",plural:!1,selections:[n,t,{kind:"ScalarField",alias:null,name:"threadId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isUnreadForViewer",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"latestMessage",storageKey:null,args:null,concreteType:"Message",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"author",storageKey:null,args:null,concreteType:"User",plural:!1,selections:r},{kind:"ScalarField",alias:null,name:"time",args:null,storageKey:null},n]},{kind:"LinkedField",alias:null,name:"otherUsers",storageKey:null,args:null,concreteType:"User",plural:!0,selections:r}]},{kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null}]}]},{kind:"LinkedHandle",alias:null,name:"threadsConnection",args:a,handle:"connection",key:"MessageThreadList_threadsConnection",filters:null},n]}]},params:{operationKind:"query",name:"MessageThreadListQuery",id:"48b95d11c6fb3900e03b62885e1ef40678f06d067989141e0e19cd95be119fc9",text:null,metadata:{}}}}();s.hash="024057a991be289a98069e8967d01dac";var o=s,u=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null};return{kind:"Fragment",name:"MessageThreadList_viewer",type:"Viewer",metadata:{connection:[{count:"first",cursor:"after",direction:"forward",path:["threadsConnection"]}]},argumentDefinitions:[{kind:"LocalArgument",name:"first",type:"Int",defaultValue:10},{kind:"LocalArgument",name:"after",type:"String",defaultValue:null}],selections:[{kind:"LinkedField",alias:"threadsConnection",name:"__MessageThreadList_threadsConnection_connection",storageKey:null,args:null,concreteType:"ThreadsConnection",plural:!1,selections:[e,a,{kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"ThreadEdge",plural:!0,selections:[e,a,{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"Thread",plural:!1,selections:[e,a,{kind:"ScalarField",alias:null,name:"threadId",args:null,storageKey:null},{kind:"FragmentSpread",name:"MessageThreadListItem_thread",args:null}]},{kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null}]}]}]}}();u.hash="45be8f2cbcffc046c02d145198d7c929";var d=u,c=n("jufJ"),m=n("lwsE"),g=n.n(m),f=n("W8MJ"),h=n.n(f),p=n("7W2i"),y=n.n(p),k=n("a1gu"),b=n.n(k),v=n("Nsbk"),F=n.n(v),S=n("/bbo"),T=n("OMLc"),E=n("RA+f"),w=n("SKAY"),O=n("KP5v"),_=n("SW3P"),K=n("yju1"),C=n("nwxp"),R=n("UyMh"),M=n("q1tI"),x=n.n(M);function j(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,t=F()(e);if(a){var l=F()(this).constructor;n=Reflect.construct(t,arguments,l)}else n=t.apply(this,arguments);return b()(this,n)}}var L=function(e){y()(n,e);var a=j(n);function n(){return g()(this,n),a.apply(this,arguments)}return h()(n,[{key:"shouldUseReactButtonOnNative",value:function(){if(Object(C.a)()){var e="android_react_button_for_messages";return Object(_.a)(e)||Object(O.a)(e)}if(Object(C.c)()&&Object(w.getNativeSupportedSetting)("supports_set_floating_action_button_visible")){var a="ios_react_button_for_messages";return Object(_.a)(a)||Object(O.a)(a)}return!1}},{key:"renderNativeFloatingButton",value:function(){var e="//qsf.fs.quoracdn.net/-4-ans_frontend_assets.icons.new_chat.svg-26-a28e4e35ba9b22c7.svg";e.startsWith("//")&&(e="https:"+e);var a={visible:!0,iconUrl:e,colors:{light:{foreground:"white",background:"#b92b27"},dark:{foreground:"white",background:"#f52936"}},cached:!0,action:{messageName:"openURL",data:{url:"/messages/new"}}};Object(K.a)("setFloatingActionButton",a)}},{key:"renderReactButton",value:function(){return x.a.createElement(E.i,{bottom:"tiny",right:"0",p:"medium",zIndex:"footer"},x.a.createElement(S.a,{size:"large",icon:x.a.createElement(T.b,{name:"NewMessage"}),variant:"red",onClick:function(){Object(R.b)("/messages/new","push")},hasBoxShadow:!0}))}},{key:"render",value:function(){if(Object(C.g)()){if(!this.shouldUseReactButtonOnNative())return this.renderNativeFloatingButton(),null;var e={visible:!1};Object(C.a)()&&(e.cached=!0),Object(K.a)("setFloatingActionButton",e)}return this.renderReactButton()}}]),n}(x.a.Component);L.displayName="NewMessageFloatingButton";var I=n("gujl"),D=n("4n8n"),N=n("fV0L"),U=n("HC+x"),B=n("06DM"),V=n("VwdU"),A=n("VyO/"),H=n("HZII"),P=n.n(H),z=n("LoNO"),q=function(){var e=[{kind:"LocalArgument",name:"threadId",type:"BigInt!",defaultValue:null}],a=[{kind:"Variable",name:"threadId",variableName:"threadId"}],n={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l=[t,n,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}],r=[n,{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},{kind:"ScalarField",alias:"smallProfileImageUrl",name:"profileImageUrl",args:[{kind:"Literal",name:"size",value:"small"}],storageKey:'profileImageUrl(size:"small")'},{kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},t,{kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:l},{kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:l},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"MessageThreadListItemQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:a,concreteType:"Thread",plural:!1,selections:[n,t,{kind:"FragmentSpread",name:"MessageThreadListItem_thread",args:null}]}]},operation:{kind:"Operation",name:"MessageThreadListItemQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:a,concreteType:"Thread",plural:!1,selections:[n,t,{kind:"ScalarField",alias:null,name:"threadId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isUnreadForViewer",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"latestMessage",storageKey:null,args:null,concreteType:"Message",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"author",storageKey:null,args:null,concreteType:"User",plural:!1,selections:r},{kind:"ScalarField",alias:null,name:"time",args:null,storageKey:null},n]},{kind:"LinkedField",alias:null,name:"otherUsers",storageKey:null,args:null,concreteType:"User",plural:!0,selections:r}]}]},params:{operationKind:"query",name:"MessageThreadListItemQuery",id:"a2b03a041321df9679b1875c248058be71fab464ffe152864a87461367a65c84",text:null,metadata:{}}}}();q.hash="77c6404cd41c0cf2696ffaab2f48fb7f";var W=q,Q=function(){var e={kind:"FragmentSpread",name:"UserPhoto_user",args:[{kind:"Literal",name:"small",value:!0}]};return{kind:"Fragment",name:"MessageThreadListItem_thread",type:"Thread",metadata:{reloadable:{operation:new(n("vfSt")["default"])(()=>n.e("query-ReloadableMessageThreadListItem_threadQuery.graphql").then(n.bind(null,"ccJa")),"ReloadableMessageThreadListItem_threadQuery.graphql")}},argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"threadId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isUnreadForViewer",args:null,storageKey:null,isLive:!0},{kind:"LinkedField",alias:null,name:"latestMessage",storageKey:null,args:null,concreteType:"Message",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"author",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[e]},{kind:"ScalarField",alias:null,name:"time",args:null,storageKey:null}],isLive:!0},{kind:"LinkedField",alias:null,name:"otherUsers",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[e,{kind:"FragmentSpread",name:"UserName_user",args:null}]}]}}();Q.hash="d83c24c7e5cfeaa8ece81bb567ccaefe";var Y,J,X=Q,G=n("MI6j"),Z=n("AFGi"),$=n("GxN1"),ee=n("hXLn"),ae=n("R+um"),ne=n("r+vq"),te=n("vcKx");function le(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,t=F()(e);if(a){var l=F()(this).constructor;n=Reflect.construct(t,arguments,l)}else n=t.apply(this,arguments);return b()(this,n)}}var re=function(e){y()(n,e);var a=le(n);function n(){return g()(this,n),a.apply(this,arguments)}return h()(n,[{key:"componentDidMount",value:function(){var e=this;if(Object(C.g)()){var a=this.props.thread.threadId;Object(w.registerMessageHandler)("updateMessageListData",(function(n){a&&(null===n||void 0===n?void 0:n.threadId)===a&&e.refetchData()}))}}},{key:"refetchData",value:function(){var e=this.props,a=e.thread.threadId,n=e.relay;n&&n.refetch({threadId:a},null,(function(){}))}},{key:"render",value:function(){var e=this.props,a=e.thread,t=e.onDesktopClickCallback,l=e.inSideBar,r=e.highlighted,i=a.threadId,s=a.isUnreadForViewer,o=a.latestMessage,u=a.otherUsers,d=a.url;if(!o||!u[0])return x.a.createElement(x.a.Fragment,null);var m=function(){Object(C.b)()&&t?t():Object(C.g)()?Object(K.a)("openURL",{url:d,hideNavigationBar:!0,target:"current"}):Object(R.b)(d,"push")};return x.a.createElement(ee.a,{fragmentOrQuery:n.fragments.thread,variables:{id:i},initialData:a},function(){if(!o||null===o.content)return x.a.createElement(x.a.Fragment,null);var e=Object(Z.t)(o.content),a=0===e.length&&Object(Z.m)(JSON.parse(o.content));return x.a.createElement(te.a.Consumer,null,(function(n){return x.a.createElement(G.b,{size:"large",borderBottom:!0,highlighted:r||(Object(C.e)()||Object(C.b)()&&"dock"===n.container)&&s,bg:"dock"===n.container?"raised":"white",mainText:x.a.createElement(E.j,{alignItems:"flex-start"},x.a.createElement(E.s,{medium:!0,flex:1},x.a.createElement(ae.b,{user:u[0]})),x.a.createElement(E.s,{fontSize:"regular"},x.a.createElement(E.s,{fontSize:"tiny",color:"gray_light",display:"inline-block",verticalAlign:"middle"},x.a.createElement(c.FormattedDateTime,{utime:o.time,formatType:"Compact",monthFormatLength:"short"})),Object(C.e)()&&x.a.createElement(T.b,{name:"ChevronRight",size:12,ml:"tiny",verticalAlign:"middle"}))),icon:x.a.createElement(E.q,{ml:"medium",display:"inline-flex",top:Object(C.b)()?3:undefined},x.a.createElement(ne.a,{user:u[0],size:l||"dock"===n.container?32:40,linked:!1}),l&&s&&!r?x.a.createElement(E.a,{left:-10,top:13,width:6,height:6,display:"inline-flex"},x.a.createElement($.b,{size:6,color:"blue"})):null),hover:{bg:"gray_ultralight"},includePageMargin:!1,subText:x.a.createElement(E.s,{truncateLines:2,italic:a},a?x.a.createElement(c.Translate,null,"Sent a photo"):e),secondaryComponent:x.a.createElement(x.a.Fragment,null,l&&r?x.a.createElement(E.a,{right:0,top:"small",bottom:"small",width:2,bg:"blue",borderTopLeftRadius:"pill",borderBottomLeftRadius:"pill"}):undefined),alignSecondaryComponent:"flex-start",alignIcon:"flex-start",onClick:m})}))}())}}]),n}(x.a.Component);re.fragments={thread:void 0!==Y?Y:Y=i},re.queries={refetchQuery:void 0!==J?J:J=r},re.displayName="MessageThreadListItem";var ie,se,oe=Object(A.f)(re),ue=function(){Object(A.e)({query:me.queries.threadList,variables:{first:25,after:null},fetchPolicy:"network-only"})},de=P()((function(){Object(C.g)()&&Object(w.registerMessageHandler)("pageShow",ue)})),ce=function(e){return x.a.createElement(S.a,Object.assign({},e,{size:"small",icon:x.a.createElement(T.b,{name:"NewMessage"}),isFullWidth:Object(C.b)()}))};ce.displayName="NewMessageButton";var me=function(e){var a=e.viewer,n=e.inSideBar,t=e.highlightedThreadId,l=e.onItemClick,r=e.onNewMessageClickCallback,i=e.relay,s=x.a.useRef(null),o=x.a.useRef(),u=a.threadsConnection.edges.length>0;de();var d=function(){r?r():Object(R.b)("/messages/new")};return x.a.createElement(x.a.Fragment,null,(n||!Object(C.b)()&&!Object(C.g)())&&x.a.createElement(V.a,{condition:!!n,wrapper:function(e){return x.a.createElement(E.j,{justifyContent:"stretch",alignItems:"flex-end",height:z.a,bg:"white"},x.a.createElement(E.e,{flex:1},e))}},x.a.createElement(B.a,{titleText:x.a.createElement(c.Translate,null,"Messages"),includePageMargin:!0,inCard:!1,bg:"white",secondaryComponent:u&&!Object(C.e)()?x.a.createElement(ce,{text:x.a.createElement(c.Translate,null,"New"),variant:"blue_outline",onClick:d}):undefined})),u?x.a.createElement(V.a,{condition:!!n,wrapper:function(e){return x.a.createElement(U.a,{useShadows:!0,flex:1,height:"1%",pb:Object(_.a)("unread_messages_filter")?z.c+16:undefined,innerRef:s},e)}},x.a.createElement(x.a.Fragment,null,x.a.createElement(D.a,{hasFloatingActionButtonOnApp:!0,hasFloatingActionButtonOnMweb:!0},x.a.createElement(N.a,{relayObject:i,autoPaged:{enabled:!0,infiniteScrollOptions:Object(C.b)()?{useWindow:!1,getScrollParent:function(){return s.current},threshold:200}:undefined,pagingElement:Object(C.b)()?o:undefined},connection:a.threadsConnection},(function(e){var a=e.node;return x.a.createElement(oe,{key:a.id,thread:a,onDesktopClickCallback:l?function(){return l(a.threadId)}:undefined,inSideBar:n,highlighted:a.threadId===t})}))),x.a.createElement(E.e,{pb:"1px",innerRef:o}))):n?x.a.createElement(E.j,{p:"large",justifyContent:"center"},x.a.createElement(E.s,{color:"gray_light"},x.a.createElement(c.Translate,null,"No messages"))):x.a.createElement(E.e,null,x.a.createElement(I.a,{type:"dormant",title:x.a.createElement(c.Translate,null,"No messages"),body:x.a.createElement(c.Translate,null,"Connect with others on Quora by beginning a new conversation."),bg:"transparent",buttonComponent:x.a.createElement(E.e,{mt:"large"},x.a.createElement(ce,{text:x.a.createElement(c.Translate,null,"New message"),variant:"blue",onClick:d}))})),Object(C.e)()&&x.a.createElement(L,null))};me.displayName="MessageThreadList",me.fragments={viewer:void 0!==ie?ie:ie=l},me.queries={threadList:void 0!==se?se:se=t};var ge={query:me.queries.threadList,direction:"forward",getConnectionFromProps:function(e){return e.viewer.threadsConnection},getVariables:function(e,a){return{first:10,after:a.cursor}},getFragmentVariables:function(e){return e}};me.connectionConfig=ge;a.a=Object(A.d)(me)},PRXj:function(e,a,n){"use strict";var t=n("J4zp"),l=n.n(t),r=n("QILm"),i=n.n(r),s=n("vOnD"),o=n("RA+f"),u=n("q1tI"),d=n.n(u),c=Object(s["default"])(o.s).withConfig({displayName:"TextInputWrapper___StyledText",componentId:"abzlxg-0"})([""," .doc{min-height:0;margin:0;padding:0;line-height:1.5;}"],(function(e){return e._css})),m=function(e){var a=e.children,n=e.theme,t=e.shouldRemeasure,r=e.hasBorder,s=i()(e,["children","theme","shouldRemeasure","hasBorder"]),o=d.a.useRef(),u=d.a.useState(0),m=l()(u,2),g=m[0],f=m[1];return d.a.useEffect((function(){o.current&&f(o.current.clientHeight)}),[t]),d.a.createElement(c,Object.assign({color:"gray_dark",fontSize:"regular",innerRef:o,py:"small",px:"medium",bg:"white",flex:1,borderRadius:0!==g?g/2:undefined,minWidth:"0"},s,{boxShadow:r?"inset 0 0 0 1px ".concat(n.colors.border.gray):undefined,_css:r?"@media only screen and (-webkit-min-device-pixel-ratio: 1.5) {\n          box-shadow: inset 0 0 0 0.5px ".concat(n.colors.border.gray," !important;\n        }"):undefined}),a)};m.displayName="TextInputWrapper",a.a=Object(s.withTheme)(m)},WBlH:function(e,a,n){"use strict";n.d(a,"a",(function(){return u}));var t=n("lSNA"),l=n.n(t),r=n("jufJ"),i=n("q1tI"),s=n.n(i),o=n("teWg");function u(e){var a,n=e.status;return s.a.createElement(r.Translate,null,s.a.createElement(r.EnumTranslate,{value:n},(a={},l()(a,o.a.suspected_spam,"The message you are trying to send contains content which has been identified as unsafe or abusive."),l()(a,o.a.unconfirmed_email,"Please confirm your email before sending this message."),l()(a,o.a.unsupported_characters,"Your message has failed to send because it contains unsupported characters."),l()(a,o.a.disabled_inbox,"This user currently has turned off receiving inbox messages."),l()(a,o.a.daily_rate_limit_exceeded,"You have reached the daily limit of sending messages to people who are not following you."),l()(a,o.a.no_access,"You don't have access to this thread."),a)))}},XNsX:function(e,a,n){"use strict";n.d(a,"a",(function(){return o}));var t=n("zUwh"),l=n("RA+f"),r=n("nwxp"),i=n("q1tI"),s=n.n(i);function o(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0];if(Object(r.f)())return null;var a=Object(r.b)()?e?54:132:94;return s.a.createElement(l.j,{flexDirection:"column",alignItems:"stretch",flex:1,height:"100%"},s.a.createElement(l.j,{flex:1,flexDirection:"column",alignItems:"stretch",justifyContent:"flex-end",px:"medium",py:"large"},s.a.createElement(t.g,{maskColor:e?"raised":"white"})),s.a.createElement(l.e,{bg:e?"raised":"white",height:a}))}},rxyS:function(e,a,n){"use strict";var t=n("rg3m"),l=n("q1tI"),r=n("vOnD"),i=Object(t.a)({loader:function(){return n.e("common-NativeApp").then(n.bind(null,"Ure0"))},loading:function(){return l.createElement(l.Fragment,null)},defer:!1});a.a=Object(r.withTheme)(i)},teWg:function(e,a,n){"use strict";var t;!function(e){e.permission_denied="permission_denied",e.permission_rate_limited="permission_rate_limited",e.success="success",e.suspected_spam="suspected_spam",e.unconfirmed_email="unconfirmed_email",e.unsupported_characters="unsupported_characters",e.disabled_inbox="disabled_inbox",e.daily_rate_limit_exceeded="daily_rate_limit_exceeded",e.no_access="no_access"}(t||(t={})),a.a=t},ujEb:function(e,a,n){"use strict";var t={};n.r(t),n.d(t,"default",(function(){return w}));var l={};n.r(l),n.d(l,"default",(function(){return K}));var r={};n.r(r),n.d(r,"default",(function(){return W}));var i={};n.r(i),n.d(i,"default",(function(){return ie}));var s={};n.r(s),n.d(s,"default",(function(){return me}));var o={};n.r(o),n.d(o,"default",(function(){return Ve}));var u={};n.r(u),n.d(u,"default",(function(){return He}));var d=n("QILm"),c=n.n(d),m=n("lwsE"),g=n.n(m),f=n("W8MJ"),h=n.n(f),p=n("PJYZ"),y=n.n(p),k=n("7W2i"),b=n.n(k),v=n("a1gu"),F=n.n(v),S=n("Nsbk"),T=n.n(S),E=function(){var e=[{kind:"LocalArgument",name:"threadId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"first",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"after",type:"String",defaultValue:null}],a=[{kind:"Variable",name:"threadId",variableName:"threadId"}],n={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"threadId",args:null,storageKey:null},l={kind:"ScalarField",alias:null,name:"isUnreadForViewer",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"isPotentialSpamForViewer",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},o={kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null}]},u={kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},c=[s,i,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}],m={kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:c},g={kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:c},f={kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},h={kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},p={kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},y={kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},k={kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},b={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]},v={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},F=[{kind:"Variable",name:"after",variableName:"after"},{kind:"Variable",name:"first",variableName:"first"}];return{kind:"Request",fragment:{kind:"Fragment",name:"MessagesThreadQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:a,concreteType:"Thread",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"otherUsers",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[n,{kind:"FragmentSpread",name:"UserName_user",args:null},{kind:"FragmentSpread",name:"UserPhoto_user",args:null}]},t,l,r,{kind:"LinkedField",alias:"messagesConnection",name:"__MessagesThread_messagesConnection_connection",storageKey:null,args:null,concreteType:"MessagesConnection",plural:!1,selections:[i,s,o,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessageEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"Message",plural:!1,selections:[i,s,{kind:"FragmentSpread",name:"Message_message",args:null}]},u]}]},{kind:"FragmentSpread",name:"ThreadReplyComposer_thread",args:null},{kind:"FragmentSpread",name:"FirstMessageBanner_thread",args:null},{kind:"FragmentSpread",name:"ThreadOverflowMenu_thread",args:null}]}]},operation:{kind:"Operation",name:"MessagesThreadQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:a,concreteType:"Thread",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"otherUsers",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[n,i,s,d,m,g,f,h,p,y,k,{kind:"ScalarField",alias:null,name:"viewerCanMessage",args:null,storageKey:null},b,v]},t,{kind:"ScalarField",alias:null,name:"isFromModeration",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"network",storageKey:null,args:null,concreteType:"Network",plural:!1,selections:[{kind:"ScalarField",alias:"helpCenterLink",name:"linkUrl",args:[{kind:"Literal",name:"name",value:"help_center"}],storageKey:'linkUrl(name:"help_center")'},i]},l,r,{kind:"ScalarField",alias:null,name:"eligibleToSendReason",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"eligibleToSendReasonTribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[i,s,{kind:"ScalarField",alias:null,name:"tribeId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"nameString",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null}]},i,{kind:"ScalarField",alias:null,name:"reportableId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerHasReported",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[i,{kind:"ScalarField",alias:null,name:"inboxCount",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"profileNavBadgeCount",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"messagesConnection",storageKey:null,args:F,concreteType:"MessagesConnection",plural:!1,selections:[i,s,o,{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessageEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"Message",plural:!1,selections:[i,{kind:"LinkedField",alias:null,name:"author",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[s,n,i,f,h,p,y,k,d,m,g,v,b]},{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"time",args:null,storageKey:null},s]},u,i]}]},{kind:"LinkedHandle",alias:null,name:"messagesConnection",args:F,handle:"connection",key:"MessagesThread_messagesConnection",filters:null}]}]},params:{operationKind:"query",name:"MessagesThreadQuery",id:"c7ecc5a522d814afba66e998bac5fea80cbecc9a01ede2494468dc0b08da292d",text:null,metadata:{connection:[{count:"first",cursor:"after",direction:"forward",path:["thread","messagesConnection"]}]}}}}();E.hash="e8c4670bf8e2d9e69ba561e787faadf2";var w=E,O=function(){var e={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},a={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null};return{kind:"Fragment",name:"MessagesThread_thread",type:"Thread",metadata:{connection:[{count:"first",cursor:"after",direction:"forward",path:["messagesConnection"]}]},argumentDefinitions:[{kind:"LocalArgument",name:"first",type:"Int",defaultValue:20},{kind:"LocalArgument",name:"after",type:"String",defaultValue:null}],selections:[{kind:"LinkedField",alias:null,name:"otherUsers",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},{kind:"FragmentSpread",name:"UserName_user",args:null},{kind:"FragmentSpread",name:"UserPhoto_user",args:null}]},{kind:"ScalarField",alias:null,name:"threadId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"numMessages",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isUnreadForViewer",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isPotentialSpamForViewer",args:null,storageKey:null},{kind:"LinkedField",alias:"messagesConnection",name:"__MessagesThread_messagesConnection_connection",storageKey:null,args:null,concreteType:"MessagesConnection",plural:!1,selections:[e,a,{kind:"LinkedField",alias:null,name:"pageInfo",storageKey:null,args:null,concreteType:"PageInfo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"hasNextPage",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"endCursor",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessageEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"Message",plural:!1,selections:[e,a,{kind:"FragmentSpread",name:"Message_message",args:null}]},{kind:"ScalarField",alias:null,name:"cursor",args:null,storageKey:null}]}]},{kind:"FragmentSpread",name:"ThreadReplyComposer_thread",args:null},{kind:"FragmentSpread",name:"FirstMessageBanner_thread",args:null},{kind:"FragmentSpread",name:"ThreadOverflowMenu_thread",args:null}]}}();O.hash="d1c639417325f4e7b91e4159a86dd3e1";var _,K=O,C=n("rxyS"),R=n("fJRf"),M=n("fV0L"),x=n("HC+x"),j=n("VwdU"),L=n("RA+f"),I=n("R+um"),D=n("r+vq"),N=n("VyO/"),U=n("d1zJ"),B=n("yju1"),V=n("nwxp"),A=n("q1tI"),H=n.n(A),P=n("lSNA"),z=n.n(P),q={kind:"Fragment",name:"FirstMessageBanner_thread",type:"Thread",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"isPotentialSpamForViewer",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"eligibleToSendReason",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"eligibleToSendReasonTribe",storageKey:null,args:null,concreteType:"Tribe",plural:!1,selections:[{kind:"FragmentSpread",name:"TribeLink_tribe",args:null}]},{kind:"LinkedField",alias:null,name:"otherUsers",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},{kind:"FragmentSpread",name:"UserName_user",args:null}]},{kind:"FragmentSpread",name:"Report_reportable",args:null}],hash:"ea7265cb2f7f540cb8d82814c1ef83ac"},W=q,Q=n("pa+i"),Y=n("NL3F"),J=n("jufJ"),X=n("Iu3b"),G=n("Khkn"),Z=n("QLaP"),$=n.n(Z);!function(e){e["default"]="default",e.from_followed_tribe="from_followed_tribe",e.msg_setting_enabled="msg_setting_enabled",e.from_quora_employee="from_quora_employee",e.from_verified_user="from_verified_user"}(_||(_={}));var ee,ae=_;function ne(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,t=T()(e);if(a){var l=T()(this).constructor;n=Reflect.construct(t,arguments,l)}else n=t.apply(this,arguments);return F()(this,n)}}var te=function(e){b()(n,e);var a=ne(n);function n(){return g()(this,n),a.apply(this,arguments)}return h()(n,[{key:"openBlockUserModal",value:function(e){e({modalProps:{name:"UserBlockModal",queryVariables:{targetUid:this.props.thread.otherUsers[0].uid}}})}},{key:"render",value:function(){var e=this,a=this.props.thread,n=a.isPotentialSpamForViewer,t=a.otherUsers,l=a.eligibleToSendReason,r=a.eligibleToSendReasonTribe;return n?($()(l!==ae.from_followed_tribe||r,"eligibleToSendReasonTribe should exist for ".concat(t[0].uid)),H.a.createElement(X.a,null,(function(n){var i,s=n.openStandaloneModal;return H.a.createElement(L.e,{p:"medium",textAlign:"center"},H.a.createElement(L.s,{fontSize:"tiny",color:"gray_light"},H.a.createElement(J.Translate,null,"This is the first time"," ",H.a.createElement(I.b,{user:t[0],format:"short"})," has messaged you on Quora."),H.a.createElement(Y.a,null),H.a.createElement(J.Translate,null,H.a.createElement(J.EnumTranslate,{value:l},(i={},z()(i,ae.from_quora_employee,H.a.createElement(H.a.Fragment,null,"You received this message from"," ",H.a.createElement(I.b,{user:t[0],format:"short"})," because they are an official representative of Quora.")),z()(i,ae.from_verified_user,H.a.createElement(H.a.Fragment,null,"You received this message because"," ",H.a.createElement(I.b,{user:t[0],format:"short"})," is a verified user.")),z()(i,ae.from_followed_tribe,H.a.createElement(H.a.Fragment,null,"You received this message because you follow"," ",H.a.createElement(G.a,{tribe:r})," ","and ",H.a.createElement(I.b,{user:t[0],format:"short"})," is an admin of this Space.")),z()(i,ae.msg_setting_enabled,H.a.createElement(H.a.Fragment,null,"You received this message because your"," ",H.a.createElement(L.p,{href:"/settings/privacy"},"inbox preference")," ",'is set to "Anyone on Quora can message you".')),z()(i,"DEFAULT",""),i))),H.a.createElement(L.j,{pt:"small",alignItems:"center",justifyContent:"center"},H.a.createElement(L.f,{onClick:function(){return e.openBlockUserModal(s)},mx:"medium"},H.a.createElement(J.Translate,null," Block ")),H.a.createElement(L.e,{mx:"medium"},H.a.createElement(Q.a,{reportable:a})))))}))):null}}]),n}(H.a.Component);te.fragments={thread:void 0!==ee?ee:ee=r},te.displayName="FirstMessageBanner";var le=Object(N.b)(te),re=function(){var e=[{kind:"LocalArgument",name:"threadId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"numMessagesKnownOnClient",type:"Int!",defaultValue:null}],a=[{kind:"Variable",name:"threadId",variableName:"threadId"}],n={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},t={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l=[{kind:"Variable",name:"numMessagesKnownOnClient",variableName:"numMessagesKnownOnClient"}],r={kind:"ScalarField",alias:null,name:"msgId",args:null,storageKey:null},i={platforms:["DESKTOP"]},s={kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},o={kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},u={kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},m={kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},f=[t,n,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}],h={kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:f},p={kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:f},y={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},k={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]},b={kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},v={kind:"ScalarField",alias:null,name:"time",args:null,storageKey:null},F=[n,s,o,{kind:"ScalarField",alias:"smallProfileImageUrl",name:"profileImageUrl",args:[{kind:"Literal",name:"size",value:"small"}],storageKey:'profileImageUrl(size:"small")'},u,d,c,t,m,g,h,p,y,k];return{kind:"Request",fragment:{kind:"Fragment",name:"LatestMessagesLoaderReloadableQuery",type:"QueryRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:a,concreteType:"Thread",plural:!1,selections:[n,t,{kind:"LinkedField",alias:null,name:"allRecentMessages",storageKey:null,args:l,concreteType:"Message",plural:!0,selections:[r,{kind:"FragmentSpread",name:"Message_message",args:null}],isLive:!0},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:i,condition:"onPlatform",selections:[{kind:"FragmentSpread",name:"MessageThreadListItem_thread",args:null}]}]}]},operation:{kind:"Operation",name:"LatestMessagesLoaderReloadableQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:a,concreteType:"Thread",plural:!1,selections:[n,t,{kind:"LinkedField",alias:null,name:"allRecentMessages",storageKey:null,args:l,concreteType:"Message",plural:!0,selections:[r,{kind:"LinkedField",alias:null,name:"author",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[t,s,n,o,u,d,c,m,g,h,p,y,k]},b,v,n]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:i,condition:"onPlatform",selections:[{kind:"ScalarField",alias:null,name:"threadId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isUnreadForViewer",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"latestMessage",storageKey:null,args:null,concreteType:"Message",plural:!1,selections:[b,{kind:"LinkedField",alias:null,name:"author",storageKey:null,args:null,concreteType:"User",plural:!1,selections:F},v,n]},{kind:"LinkedField",alias:null,name:"otherUsers",storageKey:null,args:null,concreteType:"User",plural:!0,selections:F}]}]}]},params:{operationKind:"query",name:"LatestMessagesLoaderReloadableQuery",id:"0ddede1ceddd88821ddfe04b33620609cc1ef3fb9d808cba4b98d3bb5878820d",text:null,metadata:{}}}}();re.hash="b69af30db92e9dde06ff42204efb9f52";var ie=re,se=n("D5Zh"),oe=n("Yc5t"),ue=n("hXLn"),de=n("vOnD"),ce={kind:"Fragment",name:"Message_message",type:"Message",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"author",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},{kind:"FragmentSpread",name:"UserPhoto_user",args:null}]},{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"time",args:null,storageKey:null}],hash:"dd3f2dc9b21cd277ddfbccbeef893b17"},me=ce,ge=n("3jYl"),fe=n("AFGi"),he=n("Kh5g"),pe=n("l/R4"),ye=n("FuLD"),ke=n("YVdv"),be=n.n(ke),ve=n("4Xda"),Fe=n("vcKx"),Se=n("R1F8"),Te=function(e){var a=e.utime;$()(Number.isInteger(a)&&a>0,"react-messages-MessageDateTime: Expected positive integer utime value, Got: ".concat(a));var n=Object(Se.j)(a),t=Object(Se.m)(),l=Object(Se.k)(n,t);return Object(Se.r)(n,t)<24?H.a.createElement(J.FormattedDateTime,{utime:a,monthFormatLength:"short",formatType:"Compact"}):l===Se.b.FIVE_DAYS_AGO_TO_ONE_DAY_AGO?H.a.createElement(H.a.Fragment,null,Object(J.getFormattedShortWeekdayHourMinute)(n)):l===Se.b.SIX_MONTHS_AGO_TO_FIVE_DAYS_AGO||n.getFullYear()===t.getFullYear()&&l===Se.b.ONE_YEAR_AGO_TO_SIX_MONTHS_AGO?H.a.createElement(H.a.Fragment,null,Object(J.getShortMonthAndDayHourMinuteFormat)(n)):l in[Se.b.ONE_YEAR_AGO_TO_SIX_MONTHS_AGO,Se.b.FOREVER_AGO_TO_ONE_YEAR_AGO]?H.a.createElement(H.a.Fragment,null,Object(J.getFormattedYearAndShortMonthAndDayHourMinute)(n)):null};Te.displayName="MessageDateTime";var Ee,we=Te,Oe=n("LoNO");function _e(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,t=T()(e);if(a){var l=T()(this).constructor;n=Reflect.construct(t,arguments,l)}else n=t.apply(this,arguments);return F()(this,n)}}var Ke=de["default"].svg.withConfig({displayName:"Message___StyledSvg",componentId:"sc-1a606on-0"})(["transform:scaleX(",");"],(function(e){return e._css})),Ce=Object(de["default"])(L.s).withConfig({displayName:"Message___StyledText",componentId:"sc-1a606on-1"})(['[data-embed-type="youtube"]{width:',";}blockquote{color:"," !important;}"],(function(e){return e._css2}),(function(e){return e._css3})),Re=function(e){b()(n,e);var a=_e(n);function n(){return g()(this,n),a.apply(this,arguments)}return h()(n,[{key:"render",value:function(){var e=this.props.theme,a=this.props.message,n=a.content,t=a.author,l=a.time,r=e.fontSizes.regular*e.lineHeights.regular+2*(e.space.tiny+1),i=Object(ye.g)(t);$()(null!==n,"missing content");var s=Object(fe.t)(n),o=JSON.parse(n),u=0===s.length&&(Object(fe.l)(o)||Object(fe.m)(o)||Object(fe.n)(o)),d=i?Object(pe.e)("white",e.colors.text):Object(pe.e)("gray_dark",e.colors.text);return H.a.createElement(Fe.a.Consumer,null,(function(a){return H.a.createElement(ve.a.Consumer,null,(function(n){return H.a.createElement(ge.BidiDirectionContext.Consumer,null,(function(s){return H.a.createElement(L.j,{justifyContent:i?"flex-end":"flex-start",flexShrink:0},H.a.createElement(L.j,{alignItems:"flex-end",mb:"small",mt:"tiny",maxWidth:Object(V.e)()||"dock"===a.container?"88%":"70%",flexDirection:i?"row-reverse":undefined},!i&&H.a.createElement(L.j,{flexGrow:0,flexDirection:"column"},H.a.createElement(L.s,{lineHeight:0},H.a.createElement(D.a,{user:t,size:18,position:"relative",top:-2,shouldShowBadge:!1})),H.a.createElement(L.s,{fontSize:"tiny",mt:"tiny"},"\xa0")),H.a.createElement(L.j,{ml:i?undefined:"small",mr:i?"small":undefined,flexGrow:1,justifyContent:i?"flex-end":"flex-start",flexDirection:"column",alignItems:i?"flex-end":"flex-start"},H.a.createElement(L.e,{display:"inline-block",bg:u?undefined:i?"blue":n.isDarkModeOn?"gray_dark":"gray_light",color:d,py:u?undefined:e.space.tiny+1,px:u?undefined:e.space.small+4,position:"relative",borderRadius:r/2,borderBottomLeftRadius:i?undefined:0,borderBottomRightRadius:i?0:undefined,overflow:u?"hidden":undefined},H.a.createElement(Ce,{fontSize:"regular",wordBreak:"break-word",passColorToLinks:!0,underlineLinks:!0,mb:u&&!Object(fe.l)(o)?"-1em":undefined,_css2:Object(V.b)()?"dock"===a.container?.88*(Oe.b-32)+"px":"340px":"70vw",_css3:be()(.3,d)},H.a.createElement(he.a,{qt:o,disableFullWidthImages:!0})),u?undefined:H.a.createElement(L.j,{position:"absolute",left:i?undefined:-6,right:i?-6:undefined,bottom:0},function(a,n,t){return H.a.createElement(Ke,{width:"6",height:"11",viewBox:"0 0 6 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",_css:a===t?1:-1},H.a.createElement("path",{d:"M-3.05176e-05 10.5019C-3.05176e-05 10.777 0.222986 11 0.49809 11H5.99997V0C5.99997 4.06498 4.64357 7.63316 0.640783 9.52185C0.25977 9.70162 -3.05176e-05 10.0768 -3.05176e-05 10.4981V10.4981L-2.69413e-05 10.5L-3.05176e-05 10.5019V10.5019Z",fill:a?e.colors.bg.blue:n?e.colors.bg.gray_dark:e.colors.bg.gray_light}))}(i,n.isDarkModeOn,s===ge.BidiDirection.RTL))),H.a.createElement(L.s,{fontSize:"tiny",mt:"tiny",color:"gray_light",textAlign:i?"right":"left"},H.a.createElement(we,{utime:l})))))}))}))}))}}]),n}(H.a.Component);Re.fragments={message:void 0!==Ee?Ee:Ee=s},Re.displayName="Message";var Me,xe=Object(de.withTheme)(Object(N.b)(Re));function je(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,t=T()(e);if(a){var l=T()(this).constructor;n=Reflect.construct(t,arguments,l)}else n=t.apply(this,arguments);return F()(this,n)}}var Le=function(e){b()(n,e);var a=je(n);function n(e){var t;return g()(this,n),(t=a.call(this,e)).lastestNewMessagesCount=void 0,t.lastestNewMessagesCount=0,t}return h()(n,[{key:"render",value:function(){var e=this,a=this.props,t=a.threadId,l=a.initialCount,r=a.scrollContainerRef;return H.a.createElement(se.a,{query:n.queries.thread,variables:{threadId:t,numMessagesKnownOnClient:l}},(function(a){var i=a.data,s=a.loading;if(a.error||s)return null;var o=i.thread;if(!o)return null;var u=o.allRecentMessages.slice().reverse();return H.a.createElement(ue.a,{fragmentOrQuery:n.queries.thread,initialData:i,variables:{threadId:t,numMessagesKnownOnClient:l}},H.a.createElement(H.a.Fragment,null,u.map((function(e,a){return H.a.createElement(H.a.Fragment,{key:e.msgId},H.a.createElement(oe.a,{ratioThreshold:.5,onImpression:function(e){e&&a===u.length-1&&Object(Oe.d)(t)}},H.a.createElement(xe,{message:e})))})),(e.lastestNewMessagesCount!==u.length&&(setTimeout((function(){var e,a;null===(e=r.current)||void 0===e||e.scroll({top:null===(a=r.current)||void 0===a?void 0:a.scrollHeight,left:0,behavior:"smooth"})}),50),e.lastestNewMessagesCount=u.length),e.lastestNewMessagesCount>20&&e.props.refetchData(),null)))}))}}]),n}(H.a.Component);Le.queries={thread:void 0!==Me?Me:Me=i},Le.displayName="LatestMessagesLoader";var Ie=n("XNsX"),De=n("7yJA"),Ne=function(){var e=[{kind:"LocalArgument",name:"threadId",type:"BigInt!",defaultValue:null},{kind:"LocalArgument",name:"content",type:"JSONString!",defaultValue:null},{kind:"LocalArgument",name:"numMessagesKnownOnClient",type:"Int!",defaultValue:null}],a=[{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"threadId",variableName:"threadId"}],n={kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null},t=[{kind:"Variable",name:"numMessagesKnownOnClient",variableName:"numMessagesKnownOnClient"}],l={kind:"ScalarField",alias:null,name:"msgId",args:null,storageKey:null},r={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},i={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},s=[r,i,{kind:"ScalarField",alias:null,name:"reverseOrder",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"givenName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"familyName",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"scriptCode",args:null,storageKey:null}];return{kind:"Request",fragment:{kind:"Fragment",name:"ThreadReplyComposer_threadReplyAdd_Mutation",type:"MutationRoot",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"threadReplyAdd",storageKey:null,args:a,concreteType:"ThreadReplyAdd",plural:!1,selections:[n,{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:null,concreteType:"Thread",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"allRecentMessages",storageKey:null,args:t,concreteType:"Message",plural:!0,selections:[l,{kind:"FragmentSpread",name:"Message_message",args:null}]}]}]}]},operation:{kind:"Operation",name:"ThreadReplyComposer_threadReplyAdd_Mutation",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"threadReplyAdd",storageKey:null,args:a,concreteType:"ThreadReplyAdd",plural:!1,selections:[n,{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:null,concreteType:"Thread",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"allRecentMessages",storageKey:null,args:t,concreteType:"Message",plural:!0,selections:[l,{kind:"LinkedField",alias:null,name:"author",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[r,{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},i,{kind:"ScalarField",alias:null,name:"isAnon",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"profileImageUrl",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isVerified",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"businessStatus",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"profileUrl",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"useTranslatedName",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"names",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:s},{kind:"LinkedField",alias:null,name:"adminNames",storageKey:null,args:null,concreteType:"UserName",plural:!0,selections:s},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{kind:"ScalarField",alias:null,name:"consumerBundleActive",args:null,storageKey:null}]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{kind:"ScalarField",alias:null,name:"debugInfo",args:null,storageKey:null}]}]},{kind:"ScalarField",alias:null,name:"content",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"time",args:null,storageKey:null},i]},i]}]}]},params:{operationKind:"mutation",name:"ThreadReplyComposer_threadReplyAdd_Mutation",id:"5ce66d30e11c5c4855a47ae91177e97c366f69876e504896e71efe7ce7d05326",text:null,metadata:{}}}}();Ne.hash="8143817d706948dc77861d3ec5a42910";var Ue,Be,Ve=Ne,Ae={kind:"Fragment",name:"ThreadReplyComposer_thread",type:"Thread",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"threadId",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"isFromModeration",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"otherUsers",storageKey:null,args:null,concreteType:"User",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"uid",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewerCanMessage",args:null,storageKey:null},{kind:"FragmentSpread",name:"UserName_user",args:null}]},{kind:"LinkedField",alias:null,name:"network",storageKey:null,args:null,concreteType:"Network",plural:!1,selections:[{kind:"ScalarField",alias:"helpCenterLink",name:"linkUrl",args:[{kind:"Literal",name:"name",value:"help_center"}],storageKey:'linkUrl(name:"help_center")'}]}],hash:"28d28d2c0ff900f19c523d05d36a06e4"},He=Ae,Pe=n("LW3J"),ze=n("/bbo"),qe=n("OMLc"),We=n("EreF"),Qe=n("LJFN"),Ye=n("PRXj"),Je=n("LNH1"),Xe=n("teWg"),Ge=n("WBlH");function Ze(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,t=T()(e);if(a){var l=T()(this).constructor;n=Reflect.construct(t,arguments,l)}else n=t.apply(this,arguments);return F()(this,n)}}var $e=Object(de["default"])(L.e).withConfig({displayName:"ThreadReplyComposer___StyledBox",componentId:"s975db-0"})([".editor_inner{padding:0;}"]),ea=Object(de["default"])(L.e).withConfig({displayName:"ThreadReplyComposer___StyledBox2",componentId:"s975db-1"})([".doc{min-height:0;margin:0;padding:0;line-height:1.5;",":","px;}",""],(function(e){return e._css}),(function(e){return e._css2}),(function(e){return e._css3})),aa=function(e){b()(n,e);var a=Ze(n);function n(e){var t;return g()(this,n),(t=a.call(this,e)).editorRef=void 0,t.buttonRef=void 0,t.fakeInputRef=void 0,t.threadReplyAddMutation=function(e){var a,l=t.props,r=l.thread,i=l.initialCount,s=null===(a=t.editorRef.current)||void 0===a?void 0:a.save();return Object(N.c)({mutation:n.mutations.threadReplyAdd,variables:{threadId:r.threadId,content:JSON.stringify(s),numMessagesKnownOnClient:i}}).then((function(a){var n,l,r,i=t.props.desktopReplyCallback,s=(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.threadReplyAdd).status;if(s===Xe.a.success)null===(l=t.editorRef.current)||void 0===l||l.clear(),t.setState({isSubmitting:!1}),Object(V.b)()&&i&&i(),null===(r=t.editorRef.current)||void 0===r||r.focusEditor();else if(Object.values(Xe.a).includes(s)){var o=H.a.createElement(Ge.a,{status:s});e.error(o),t.setState({isSubmitting:!1})}else e.genericError()}))["catch"]((function(){t.setState({isSubmitting:!1})}))},t.handleSubmit=function(e){t.state.canAdd&&t.editorRef.current&&!t.state.isSubmitting&&t.setState({isSubmitting:!0},(function(){t.threadReplyAddMutation(e)}))},t.editorRef=H.a.createRef(),t.buttonRef=H.a.createRef(),t.fakeInputRef=H.a.createRef(),t.state={canAdd:!1,isSubmitting:!1,submitButtonWidth:null,hasMeaningfulContent:!1,editorLoaded:!1,isFocused:!1,imageUploadStatus:Qe.b.ready},t.handleEditorSetup=t.handleEditorSetup.bind(y()(t)),Object(V.g)()&&Object(B.a)("setupEditor",{hasDraft:!1}),t}return h()(n,[{key:"componentDidMount",value:function(){var e=this.props,a=e.thread,n=e.onEditorSetup,t=a.isFromModeration,l=a.otherUsers;this.measureSendButton(),!t&&l[0].viewerCanMessage||!n||this.handleEditorSetup()}},{key:"componentDidUpdate",value:function(e){!e.threadHasLoaded&&this.props.threadHasLoaded&&this.measureSendButton()}},{key:"openMobileEditorModal",value:function(e,a,n){var t=this.props.initialCount;Object(V.e)()&&e({modalProps:{name:"MessageEditorModal",extraProps:{isReply:!0,initialCount:t},queryVariables:{uid:a,threadId:n,isReply:!0},fetchPolicy:Object(V.g)()?"network-only":"store-or-network"},postDismissCallback:function(e){null!==e&&void 0!==e&&e.nextUrl&&Object(V.g)()&&(Object(B.a)("broadcastAllWebViews",{messageName:"markPageAsDirty",data:{url:"/messages"}}),window.location.reload())}})}},{key:"handleEditorSetup",value:function(){var e=this.props.onEditorSetup;this.setState({editorLoaded:!0}),null===e||void 0===e||e()}},{key:"measureSendButton",value:function(){this.buttonRef.current&&Object(V.b)()&&this.setState({submitButtonWidth:this.buttonRef.current.clientWidth})}},{key:"render",value:function(){var e=this,a=this.props,n=a.thread,t=a.onMeaningfulChange,l=a.theme,r=n.isFromModeration,i=n.network,s=n.otherUsers,o=i.helpCenterLink,u=Object(V.q)()?H.a.createElement(ge.TranslationFragment,null,"Return"):H.a.createElement(ge.TranslationFragment,null,"Enter");if(r)return H.a.createElement(L.e,{bg:"gray_ultralight",p:"medium"},H.a.createElement(L.s,{fontSize:"small",color:"gray",passColorToLinks:!0},H.a.createElement(ge.Translate,null,"You cannot reply to this message directly. Please contact us using our"," ",H.a.createElement(L.p,{href:o+"/requests/new"},"contact form"),".")));if(!s[0].viewerCanMessage)return H.a.createElement(L.e,{bg:"gray_ultralight",p:"medium"},H.a.createElement(L.s,{fontSize:"small",color:"gray"},H.a.createElement(ge.Translate,null,"You cannot send a message to"," ",H.a.createElement(I.b,{user:s[0],format:"short"})," at this time.")));if(Object(V.e)()){var d=this.props,c=d.onMobileClick,m=d.shouldFocusEditor;return H.a.createElement(Je.b,null,(function(a){return H.a.createElement(L.e,{bg:"white",pb:"calc(".concat(Object(V.f)()?"44px":"0px"," + env(safe-area-inset-bottom))"),visibility:e.state.editorLoaded?undefined:"hidden"},H.a.createElement(L.j,{px:"medium",py:"tiny",alignItems:"center",minHeight:50},H.a.createElement("input",{ref:e.fakeInputRef,style:{width:0,height:0},type:"hidden"}),H.a.createElement(Ye.a,{shouldRemeasure:e.state.editorLoaded,bg:"gray_ultralight",hasBorder:!1},H.a.createElement($e,{maxHeight:300,overflowY:"auto",onClick:c},H.a.createElement(We.a,{ref:e.editorRef,placeholder:Object(ge.plaintextTranslate)("Write a message..."),editorKey:"compose-inbox-message",content:Object(fe.h)(),commandsToDisable:["horizontal-rule","video"],toolbarOnMobile:!0,isToolbarBottom:!0,onMeaningfulChange:function(a){e.setState({canAdd:!a.isEmpty()}),null===t||void 0===t||t(a)},focusOnLoad:m,onEditorSetup:e.handleEditorSetup,onFocus:function(){e.setState({isFocused:!0})},onBlur:function(){e.setState({isFocused:!1})},editorPaddingReset:!0,settingOverrides:{imageRemoveButtonEnabled:!0,qtext_hyperlink_embed:!0,lightWeightContentToolbar:Object(Qe.d)(),eagerImageUploading:Object(Qe.d)()},toolbarStyleOverrides:Object(V.f)()?{bg:"transparent",left:"medium",right:"medium",bottom:"env(safe-area-inset-bottom)"}:undefined,onImageUploadStatusChange:function(a){e.setState({imageUploadStatus:a})}}))),H.a.createElement(ze.a,{size:"small",ml:"small",disabled:!e.state.canAdd||e.state.isSubmitting||e.state.imageUploadStatus===Qe.b.uploading,onClick:function(){var n;e.handleSubmit(a),null===(n=e.fakeInputRef.current)||void 0===n||n.focus()},icon:H.a.createElement(qe.b,{name:"Send"})})))}))}return H.a.createElement(Fe.a.Consumer,null,(function(a){return H.a.createElement(Je.b,null,(function(n){return H.a.createElement(ge.BidiDirectionContext.Consumer,null,(function(t){return H.a.createElement(L.e,{bg:"dock"===a.container?"raised":"white",p:"dock"===a.container?undefined:"small",visibility:e.state.editorLoaded?undefined:"hidden",borderTop:"dock"===a.container},H.a.createElement(L.j,{alignItems:"flex-end",position:"relative"},H.a.createElement(L.s,{p:0,borderRadius:"small",fontSize:"regular",overflow:"hidden",flex:1,position:"relative"},"dock"!==a.container&&H.a.createElement(L.a,{fullX:!0,fullY:!0,borderAll:!0,style:{pointerEvents:"none"},borderRadius:"inherit",zIndex:20,borderWidth:1}),H.a.createElement(L.q,null,H.a.createElement(ea,{maxHeight:"dock"===a.container?160:380,overflowY:"auto",_css:t===ge.BidiDirection.RTL?"padding-left":"padding-right",_css2:(e.state.submitButtonWidth||0)+l.space.medium,_css3:"dock"===a.container?"\n                              .editor_inner {\n                        padding: 0;\n                      }":""},H.a.createElement(We.a,{ref:e.editorRef,placeholder:Object(ge.plaintextTranslate)("Write a message..."),content:Object(fe.h)(),toolbarOnWeb:"dock"!==a.container,commandsToDisable:["horizontal-rule","video"],onMeaningfulChange:function(a){e.setState({canAdd:!a.isEmpty(),hasMeaningfulContent:a.getLength()>5})},onEditorSetup:e.handleEditorSetup,settingOverrides:{lightWeightContentToolbar:Object(Qe.d)(),shiftReturnHard:!0},isInline:!0,onKeyDownEvent:function(a){13!==a.which||a.shiftKey||!e.state.canAdd||e.state.isSubmitting||(e.handleSubmit(n),a.preventDefault())}})),H.a.createElement(L.a,{bottom:13,right:"medium",innerRef:e.buttonRef},H.a.createElement(ze.a,{size:"small",text:"dock"!==a.container?H.a.createElement(L.n,{alignItems:"center"},Object(ge.plaintextTranslate)("Send"),H.a.createElement(qe.b,{name:"Send",size:16,ml:"tiny",color:"white"})):undefined,icon:"dock"===a.container?H.a.createElement(qe.b,{name:"Send"}):undefined,disabled:!e.state.canAdd||e.state.isSubmitting,onClick:function(){e.handleSubmit(n)},loading:e.state.isSubmitting&&"dock"!==a.container}))))),"dock"!==a.container&&H.a.createElement(L.s,{fontSize:"micro",opacity:e.state.hasMeaningfulContent?.5:0,transition:"opacity",mt:"tiny",textAlign:"right"},H.a.createElement(Pe.a,null,H.a.createElement(ge.Translate,null,H.a.createElement(L.s,{medium:!0,display:"inline"},u)," ","to send"),H.a.createElement(ge.Translate,null,H.a.createElement(L.s,{medium:!0,display:"inline"},"Shift + ",u)," ","to add new line"))))}))}))}))}}]),n}(H.a.Component);aa.fragments={thread:void 0!==Ue?Ue:Ue=u},aa.mutations={threadReplyAdd:void 0!==Be?Be:Be=o},aa.displayName="ThreadReplyComposer";var na,ta,la=Object(de.withTheme)(Object(N.b)(aa));function ra(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,t=T()(e);if(a){var l=T()(this).constructor;n=Reflect.construct(t,arguments,l)}else n=t.apply(this,arguments);return F()(this,n)}}var ia=function(e){b()(n,e);var a=ra(n);function n(e){var t;return g()(this,n),(t=a.call(this,e)).scrollContainerRef=void 0,t.previousBodyOverflowSetting=void 0,t.scrollOffset=void 0,t.dummyViewHeightOffset=void 0,t.scrollContainerRef=H.a.createRef(),t.previousBodyOverflowSetting=document.body.style.overflow,t.scrollOffset=Object(V.c)()?1:0,t.dummyViewHeightOffset=t.scrollOffset+(Object(V.c)()?1:0),t.handleMobileClick=t.handleMobileClick.bind(y()(t)),t.maybeScrollToBottom=t.maybeScrollToBottom.bind(y()(t)),t.sizeDummyView=t.sizeDummyView.bind(y()(t)),t.state={initialLoadComplete:!1,dummyViewHeight:0,shouldFocusEditor:!0},t}return h()(n,[{key:"scrollToBottom",value:function(e){if(this.scrollContainerRef.current){var a=this.scrollContainerRef.current,n=a.scrollHeight,t=a.clientHeight;e?this.scrollContainerRef.current.scroll({top:n-t-this.scrollOffset,left:0,behavior:"smooth"}):this.scrollContainerRef.current.scrollTop=n-t-this.scrollOffset}}},{key:"sizeDummyView",value:function(){var e=this;this.scrollContainerRef.current&&this.setState({dummyViewHeight:this.scrollContainerRef.current.clientHeight-32+this.dummyViewHeightOffset},(function(){e.scrollToBottom()}))}},{key:"refetchData",value:function(){var e,a=this;this.props.relay.refetchConnection(0,(function(){return a.setState({})}),{first:30,threadId:null===(e=this.props.thread)||void 0===e?void 0:e.threadId})}},{key:"componentDidMount",value:function(){var e=this;this.scrollToBottom(),Object(V.c)()&&setTimeout((function(){e.sizeDummyView(),window.addEventListener("resize",(function(){setTimeout((function(){e.sizeDummyView()}),200)}))}),300),Object(V.g)()&&(Object(B.a)("setPageProperties",{pullToRefresh:!1}),Object(B.a)("setPageAction",{visible:!1}));var a=this.props.thread,n=a.isUnreadForViewer,t=a.threadId;n&&Object(Oe.d)(t)}},{key:"componentWillUnmount",value:function(){Object(V.e)()&&(document.body.style.overflow=this.previousBodyOverflowSetting)}},{key:"isAtBottom",value:function(){var e,a;if(!this.scrollContainerRef.current)return!1;var n=Object(V.c)()?1:0;return(null!==(e=this.scrollContainerRef.current.scrollTop)&&void 0!==e?e:0)+n+(null!==(a=this.scrollContainerRef.current.clientHeight)&&void 0!==a?a:0)===this.scrollContainerRef.current.scrollHeight}},{key:"handleMobileClick",value:function(){var e=this;this.isAtBottom()&&setTimeout((function(){e.scrollToBottom(!0)}),250)}},{key:"maybeScrollToBottom",value:function(){var e=!(arguments.length>0&&arguments[0]!==undefined)||arguments[0];if(this.scrollContainerRef.current){var a=this.scrollContainerRef.current,n=a.scrollTop,t=a.scrollHeight,l=a.clientHeight;n+this.scrollOffset<t-l&&this.scrollToBottom(e)}}},{key:"render",value:function(){var e=this,a=this.props,n=a.thread,t=a.relay,l=a.desktopReplyCallback,r=c()(a,["thread","relay","desktopReplyCallback"]);return H.a.createElement(Fe.a.Consumer,null,(function(a){var i,s;return H.a.createElement(j.a,{condition:Object(V.e)(),wrapper:function(a){return H.a.createElement(H.a.Fragment,null,Object(V.g)()&&H.a.createElement(C.a,{rightButton:H.a.createElement(L.e,null,H.a.createElement(De.a,{thread:n,disableFocus:function(){return e.setState({shouldFocusEditor:!1})}})),variant:"regular",titleTextOnLoad:H.a.createElement(L.j,{alignItems:"center",justifyContent:"center"},H.a.createElement(D.a,{user:n.otherUsers[0],mr:"small"}),H.a.createElement(I.b,{user:n.otherUsers[0]}))}),H.a.createElement(L.i,{full:!0},a))}},H.a.createElement(L.j,Object.assign({flexDirection:"column",flex:1,minHeight:Object(V.f)()?"calc(var(--vh, 1vh) * 100 - ".concat(U.b,"px)"):undefined,height:Object(V.e)()?"100%":undefined,width:"100%",pt:Object(V.g)()?Object(R.c)():Object(V.f)()?U.b:undefined,position:"relative"},r),H.a.createElement(L.j,{flex:1,minHeight:0,bg:"dock"===a.container?"raised":"white",opacity:e.state.initialLoadComplete?1:0},H.a.createElement(x.a,{flex:1,innerRef:e.scrollContainerRef,lockBodyNative:!0,useShadows:!0,shadowOffset:Object(V.c)()?e.dummyViewHeightOffset:undefined,wrapperProps:{justifyContent:"flex-end",p:Object(V.e)()?"medium":undefined,px:Object(V.e)()?undefined:"medium",minHeight:"min-content",flex:1,display:"flex",flexDirection:"column"}},H.a.createElement(j.a,{condition:Object(V.c)(),wrapper:function(a){return H.a.createElement(L.j,{minHeight:e.state.dummyViewHeight,flexDirection:"column",justifyContent:"flex-end"},a)}},H.a.createElement(M.a,{relayObject:t,autoPaged:{enabled:!0,infiniteScrollOptions:{isReverse:!0,useWindow:!1,threshold:Object(V.e)()?10:100,getScrollParent:function(){return e.scrollContainerRef.current?e.scrollContainerRef.current:null}}},connection:null===n||void 0===n?void 0:n.messagesConnection,reverseOrder:!0},(function(e){var a=e.node;return H.a.createElement(xe,{message:a})}))),H.a.createElement(Le,{threadId:n.threadId,initialCount:null!==(i=null===n||void 0===n?void 0:n.numMessages)&&void 0!==i?i:0,scrollContainerRef:e.scrollContainerRef,refetchData:function(){e.refetchData()}}),n.isPotentialSpamForViewer&&H.a.createElement(le,{thread:n}))),H.a.createElement(L.q,null,H.a.createElement(la,{thread:n,initialCount:null!==(s=null===n||void 0===n?void 0:n.numMessages)&&void 0!==s?s:0,onEditorSetup:function(){setTimeout((function(){e.scrollToBottom(),requestAnimationFrame((function(){e.setState({initialLoadComplete:!0}),e.sizeDummyView()}))}),500)},onMeaningfulChange:function(a){a.isEmpty()||document.activeElement!==a.node||e.maybeScrollToBottom(!0)},onMobileClick:e.handleMobileClick,shouldFocusEditor:e.state.shouldFocusEditor,desktopReplyCallback:l,threadHasLoaded:e.state.initialLoadComplete})),!e.state.initialLoadComplete&&H.a.createElement(L.a,{full:!0,zIndex:1},Object(Ie.a)("dock"===a.container))))}))}}]),n}(H.a.Component);ia.fragments={thread:void 0!==na?na:na=l},ia.getPagedListQuery=function(){return void 0!==ta?ta:ta=t},ia.connectionConfig={query:ia.getPagedListQuery(),direction:"forward",getConnectionFromProps:function(e){var a;return null===(a=e.thread)||void 0===a?void 0:a.messagesConnection},getVariables:function(e,a){var n;return{first:10,after:a.cursor,threadId:null===(n=e.thread)||void 0===n?void 0:n.threadId}}},ia.displayName="MessagesThread";a.a=Object(N.d)(ia)},vcKx:function(e,a,n){"use strict";var t=n("q1tI"),l=n.n(t).a.createContext({container:null});l.displayName="MessageContainerContext",a.a=l}}]);